Компания Oracle представила экспериментальный выпуск DTrace для Linux

Компания Oracle объявила о начале тестирования реализации системы динамической отладки DTrace для платформы Linux. Патчи с реализацией поддержки DTrace пока доступны только для ядра Unbreakable Enterprise Kernel 2 (2.6.39), поставляемого в составе дистрибутива Oracle Linux. В тестировании могут принять участие пользователи сети Unbreakable Linux Network, которым следует загрузить пакеты из репозитория ol6_x86_64_Dtrace_BETA. Из возможностей DTrace в версии для Linux пока доступно лишь несколько базовых провайдеров. В частности, реализован dtrace-провайдер SDT (Statically Defined Tracing), позволяющий выполнять статическую трассировку приложений, используя серию контрольных вызовов (probes) внутри ядра Linux. На базе SDT также подготовлен вариант провайдера proc для Linux, который позволяет реализовать проверки на стадии создания/завершения (fork, exec, exit, fault) процессов и легковесных процессов (LWP), отправки и приёма сигналов. Также реализован провайдер profile, позволяющий сбрасывать статистику через указанные промежутки времени. О планах по портированию DTrace для стандартного ядра Linux или ядра из состава Red Hat Enterprise Linux ничего не сообщается. Также нет никаких данных о том, собирается ли Oracle обеспечить распространение кода DTrace под лицензией GPLv2 в дополнение к используемой в настоящее время лицензии CDDL, которая не совместима с GPLv2, или версия DTrace для Linux позиционируется как нишевый продукт, который будет поставляться только в составе дистрибутива Oracle Linux. Следует отметить, что в рамках проекта CRiSP с 2008 года группой независимых энтузиастов достаточно активно развивается порт DTrace для Linux, работающий в виде модуля ядра. Кроме того, в состав Fedora, RHEL и Oracle Linux уже входит похожая по возможностям система SystemTap, код которой доступен под лицензией GPL, а разработку курируют компании Red Hat, IBM, Hitachi и Oracle. Как и DTrace, SystemTap позволяет организовать доскональное наблюдение за работающей системой, производить сбор статистики о работе приложений, выполнять профилирование, контролировать работу системных вызовов. Для обсуждения информации, связанной с работой версии DTrace для Linux компанией Oracle создан специальный форум, в котором пока опубликовано только приветственное сообщение. Кроме того, один из разработчиков порта DTrace для Linux разместил в своём блоге заметку с примерами использования DTrace для отслеживания выполнения процессов в Linux. Дополнение: Анализ тестовой версии DTrace для Linux от Адама Левенталя (Adam Leventhal), одного из основных разработчиков DTrace, ушедшего в 2010 году из Oracle, показал, что проект пока находится в зачаточном состоянии. Прогресс в разработке с октября очень незначительный. В версии для Linux пока реализовано только 618 контрольных вызовов (probes), для сравнения в Mac OS X их 578044.