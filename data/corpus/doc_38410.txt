Выпуск системы мониторинга Zabbix 2.2

Увидел свет релиз новой стабильной ветки открытой системы мониторинга Zabbix 2.2. Zabbix состоит из трёх базовых компонентов: сервера для координации выполнения проверок, формирования проверочных запросов и накопления статистики; агентов для осуществления проверок на стороне внешних хостов; фронтэнда для организации управления системой. Для снятия нагрузки с центрального сервера и формирования распределённой сети мониторинга может быть развёрнута серия прокси-серверов, агрегирующих данные о проверке группы хостов. Код агентов и серверной части написан на языке Си, для разработки web-интерфейса использован язык PHP, данные могут храниться в СУБД MySQL, PostgreSQL, SQLite и Oracle. Код проекта распространяется под лицензией GPL. Ключевые новшества Zabbix 2.2: Значительно увеличена производительность работы системы мониторинга, в основном благодаря задействованию размещённого в ОЗУ сквозного кэша обращений к SQL базе, позволяющего мгновенно получить доступ к данным проверок и агрегированным значениям, без повторного обращения к БД (кэш заполняется при первом запросе к БД, при повторном обращении данные выдаются из кэша). Кроме того, ускорено выполнение процессов отправки и приёма данных мониторинга, проведены оптимизации с кэшами параметров конфигурации и истории проверок. Сокращено число операций по обновлению данных в базе, выполняемых при обработке новых данных. В итоге, удалось ускорить как выполнение операций сбора информации и чистки устаревших данных, так и увеличить отзывчивость web-интерфейса; Поддержка мониторинга работы платформ виртуализации VMWare vCenter и vSphere, в том числе с поддержкой автоматического определения работающих виртуальных машин, отслеживания производительности и работоспособности, как виртуальных окружений так и гипервизоров с учётом миграции окружений между серверами; Поддержка загружаемых модулей, расширяющих функциональность сервера и агентов. Модули выполнены в форме разделяемых библиотек, загружающихся при запуске Zabbix. В отличие от внешних обработчиков, модули обеспечивают более высокую производительность и позволяют реализовать иную логику работы; Реализован режим автоматического обновления структуры базы данных, при котором при переходе на новую значительную версию Zabbix не требуется ручной запуск SQL-скриптов; Добавлена возможность тонкой настройки работы процесса чистки устаревших данных (Housekeeper), что позволяет управлять чисткой на уровне отдельных таблиц с данными проверок; Прекращение поддержки событий с неизвестным статусом, новые проверки теперь создаются в состоянии "OK"; Добавлена поддержка внутренних событий, позволяющих привязать действия или отправить уведомления при возникновении неопределённого состояния или при получении неподдерживаемого значения; Приложения теперь могут наследовать свойства одновременно нескольких шаблонов. Обеспечена возможность создания сценариев web-интерфейса на основе шаблонов; Возможность определения пользовательских макросов в глобальных скриптах, скриптах подтверждения, комментариях к изменению состояний и в списке доступа хостов. Возможность использования сложных макросов вида "{host:key.last/min/avg/max()}" в заголовках графиков. Добавлены новые макросы для уведомлений: {ITEM.STATE<1-9>}, {LLDRULE.ID}, {LLDRULE.NAME}, {LLDRULE.DESCRIPTION}, {LLDRULE.KEY}, {LLDRULE.STATE} и {TRIGGER.STATE}, а также макросы для обработки смены состояния: {TRIGGER.NAME.ORIG}, {ITEM.NAME.ORIG}, {ITEM.KEY.ORIG}; Изменена логика определения прав доступа пользователей (права только на чтение больше не перекрывают права на запись); Максимально допустимое число объектов проверки увеличено до 2^64-1 (осуществлён переход на 64-разрядные значения идентификаторов объектов); Поддержка определения прототипов хостов для заведения записей при использовании новой системы автоматического определения хостов в сети для мониторинга; Улучшения средств для мониторинга web-сайтов: оценка корректности отдачи на основе извлечения данных с использованием регулярных выражений (в дополнение к проверке "{variable}=value" добавлена поддержка "{variable}=regex:regular expression"), возможность настройки числа повторов для web-сценария и поддержка мониторинга через HTTP-прокси; Улучшены средства для мониторинга прокси-серверов; Для отслеживания состояния Windows-систем добавлена поддержка мониторинга с использованием WMI и Windows Eventing 6.0. Для интеграции с приложениями на платформе Windows подготовлена специальная DLL-библиотека; Для SNMPv3 добавлена поддержка аутентификации с использованием SHA и AES. Реализована возможность использования нескольких динамических индексов SNMP; Добавлена поддержка опроса дискретных сенсоров IPMI; Многочисленные улучшения в web-интерфейсе. Новое оформление форм задания регулярных выражений и периода обслуживания, поддержка списков множественного выбра (multiselect) в конфигурации dashboard, новое оформление форм управления шаблонами, поддержка сглаживания вывода для графиков и карт и т.д. Расширены возможности агентов мониторинга. Для платформ FreeBSD, NetBSD и OpenBSD добавлена поддержка свойства net.if.discovery, для AIX - system.swap.size, для HP-UX - proc.num, net.if.in, net.if.out, net.if.total, возможность учета использованного размера файла подкачки для Windows и OSF; Добавлена поддержка PHP 5.5 и нового PHP API для работы с MySQL; Обеспечена возможность доступа к историческим данным для отключенных хостов; Реализовано отражение статуса выполнения процесса в его имени, отражаемом в списке процессов, видимом при использовании утилит "ps" и "top"; Файловая система ZFS добавлена в список ФС, определяемых на основе шаблонов LDD.