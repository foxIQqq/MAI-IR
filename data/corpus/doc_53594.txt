Кодовая база FreeBSD переведена на использование OpenZFS (ZFS on Linux)

Реализация файловой системы ZFS в основной ветке FreeBSD (HEAD) переведена на использование кода OpenZFS, развивающего кодовую базу "ZFS on Linux" в качестве эталонного варианта ZFS. Весной поддержка FreeBSD была перенесена в основной проект OpenZFS, после чего в нём была продолжена разработка всех связанных с FreeBSD изменений, а разработчики FreeBSD получили возможность оперативно переносить в систему все новшества, развиваемые проектом OpenZFS. Среди возможностей, которые стали доступны во FreeBSD после перехода на OpenZFS: расширенная система квот, шифрование наборов данных, раздельный выбор классов распределения блоков (allocation classes), использование векторных процессорных инструкций для ускорения реализация RAIDZ и вычисления контрольных сумм, поддержка алгоритма сжатия ZSTD, режим multihost (MMP, Multi Modifier Protection), улучшенный инструментарий командной строки, исправление многих ошибок, связанных с состоянием гонки и блокировками. Напомним, что в декабре 2018 года разработчики FreeBSD выступили с инициативой перехода на реализацию ZFS от проекта "ZFS on Linux" (ZoL), вокруг которого последнее время сосредоточилась вся активность, связанная с развитием ZFS. В качестве причины миграции была упомянута стагнация кодовой базы ZFS от проекта Illumos (форк OpenSolaris), которая ранее использовалась в качестве основы для переноса связанных с ZFS изменений во FreeBSD. Основной вклад в поддержку кодовой базы ZFS в Illumos до недавнего времени вносила компания Delphix, развивающая операционную систему DelphixOS (форк Illumos). Три года назад компания Delphix приняла решение о переходе на "ZFS on Linux", что привело к стагнации ZFS от проекта Illumos и сосредоточении всей связанной с разработкой активности в проекте "ZFS on Linux", который теперь рассматривается как основная реализация OpenZFS. Разработчики FreeBSD решили последовать общему примеру и не пытаться удержаться за Illumos, так как эта реализация уже сильно отстаёт по функциональности и требует больших ресурсов для сопровождения кода и переноса изменений. OpenZFS на основе "ZFS on Linux" теперь рассматривается как единый совместный проект по разработке ZFS.