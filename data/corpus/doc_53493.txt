Выпуск дистрибутива BSD Router Project 1.97

Оливье Кочар-Лаббе (Olivier Cochard-Labbé), создатель дистрибутива FreeNAS, представил выпуск специализированного дистрибутива BSD Router Project 1.97 (BSDRP), примечательный обновлением кодовой базы до FreeBSD 12.1. Дистрибутив предназначен для создания компактных программных маршрутизаторов, поддерживающих широкий спектр протоколов, таких как RIP, OSPF, BGP и PIM. Управление производится в режиме командной строки через CLI-интерфейс, напоминающий Cisco. Дистрибутив доступен в сборках для архитектур amd64 и i386 (размер установочного образа 140 МБ). Кроме обновления до FreeBSD 12.1-STABLE новая версия примечательна включением по умолчанию загрузки микрокода для процессоров Intel и добавлением пакетов wireguard, Mellanox Firmware, vim-tiny, mrtparse, nrpe3, perl, bash и frr7-pythontools, а также драйверов if_cxgbev (Chelsio Ethernet VF) и if_qlxgb (Ethernet QLogic 3200). По умолчанию включена корректная блокировка ICMP-редиректов. Обновлены версии программ, включая easy-rsa 3.0.7, FRR 7.4, pmacct 1.7.4, openvpn 2.4.9 и strongswan 5.8.4. Из состава исключены multicast-утилиты для IPv6 (pim6-tools, pim6dd, pim6sd). Основные характеристики дистрибутива: В комплект входят два пакета с реализацией протоколов маршрутизации: FRRouting (форк Quagga) с поддержкой BGP, RIP, RIPng (IPv6), OSPF v2, OSPF v3 (IPv6), ISIS и BIRD с поддержкой BGP, RIP, RIPng (IPv6), OSPF v2 и OSPF v3 (IPv6); Дистрибутив адаптирован для параллельного использования нескольких обособленных таблиц маршрутизации (FIB), привязанных к реальным и виртуальным интерфейсам; Для мониторинга и управления может использоваться SNMP (bsnmp-ucd). Поддерживается экспорт данных о трафике в форме потоков Netflow; Для оценки производительности сети в состав входят такие утилиты, как NetPIPE, iperf, netblast, netsend и netreceive. Для накопления статистики о трафике используется ng_netflow; Наличие freevrrpd с реализацией протокола VRRP (Virtual Router Redundancy Protocol, RFC 3768) и ucarp с поддержкой протокола CARP, предназначенных для организации работы отказоустойчивых маршрутизаторов путём привязки к активному серверу виртуального MAC-адреса, в случае сбоя перемещающегося на запасной сервер. В штатном режиме нагрузка может быть распределена на оба сервера, но в случае сбоя первый маршрутизатор может взять на себя нагрузку второго, а второй - первого; mpd (Multi-link PPP daemon) с поддержкой PPTP, PPPoE и L2TP; Для управления пропускной способностью предлагается использовать шейпер из состава IPFW + dummynet или ng_car; Для Ethernet поддерживается работа с VLAN (802.1q), агрегация линков и использование сетевых мостов с задействованием протокола Rapid Spanning Tree Protocol (802.1w); Для мониторинга применяется monit; Предоставляется поддержка VPN: GRE, GIF, IPSec (IKEv1 и IKEv2 со strongswan), OpenVPN и Wireguard; Поддержка NAT64 с использованием демона tayga и встроенная поддержка туннелей IPv6-to-IPv4; Для установки дополнительных программ используется пакетный менеджер pkgng; В состав входят DHCP-сервер и клиент isc-dhcp, а также почтовый сервер ssmtp; Поддержка управления через SSH, последовательный порт, telnet и локальную консоль. Для упрощения администрирования в комплект входит утилита tmux (BSD-аналог screen); Загрузочные образы сгенерированы на основе FreeBSD при помощи скрипта NanoBSD; Для обеспечения обновления системы на Flash-карте создаётся два раздела, при наличии обновлённого образа, он загружается во второй раздел, после перезагрузки этот раздел становится активным, а базовый раздел ожидает появления очередного обновления (разделы используются по очереди). Возможен откат на прошлое состояние системы в случае выявления проблем с установленным обновлением; Для каждого файла имеется контрольная сумма sha256, что позволяет проконтролировать целостность информации.