Разработчики из компании Red Hat представили UEFI-загрузчик Gummiboot

Леннарт Поттеринг (Lennart Poettering) анонсировал в своём блоге новый свободный загрузчик Gummiboot, разработанный сотрудниками компании Red Hat. Загрузчик отличается простотой реализации и ориентацией только на загрузку сконфигурированных EFI-образов. Gummiboot не требует специальной настройки и определяет конфигурацию ядра автоматически, без использования внешних компонентов на уровне пользователя. Код занимает всего 44 Кб и распространяется под лицензией LGPLv2.1. По сути, функции Gummiboot сводятся к автоматическому определению доступных для загрузки систем и передачи управления ядру Linux или другому загрузчику. Поддерживается только работа с разделами ESP (EFI System Partition). Необходимые для загрузки файлы конфигурации, ядра, initrd и EFI-образы должны находиться на ESP-разделе. Ядро Linux должно быть собрано с опцией CONFIG_EFI_STUB, тогда оно сможет быть запущено как образ EFI. В Gummiboot из коробки поддерживается интеграция с systemd, позволяющая передавать в подсистему мониторинга производительности данные о скоростных и временных характеристиках первой стадии загрузки. Для выбора загружаемой системы пользователю выводится меню или выбирается элемент по умолчанию по определённому в конфигурации загрузчика шаблону. Для формирования меню, внутри ESP-раздела производится поиск файлов конфигурации /loader/entries/vendor-release.conf, в которых определяются параметры загрузки Linux (название, путь к ядру, initrd и корневой раздел или ссылка на готовый образ efi), что позволяет из одного ESP-раздела загружать несколько систем. Общие параметры задаются в файле ESP-раздел/loader/loader.conf, в котором определяется время задержки и система, шаблон для загрузки системы по умолчанию. Тем не менее, все файлы конфигурации являются опциональными и Gummiboot может находить и загружать системы без них. Также поддерживается изменение параметров и установка элемента по умолчанию из меню загрузчика (клавиша "d" - установить по умолчанию, "o" - редактировать опции, "v" - показать сведения о загрузчике и F1 выдать подсказку о командах). Изменения сохраняются в переменных EFI. В качестве основного назначения проекта называется использование в качестве первичного загрузчика на системах с UEFI и в том числе для обеспечения первой стадии режима безопасной загрузки. При загрузке на UEFI-системах, Gummiboot вероятно будет использован (планы не подтверждены) в Fedora Linux в роли минимального начального загрузчика, подписанного проверочным ключом Microsoft и передающего управление загрузочным компонентам, подписанным ключом Fedora. Для выполнения аналогичной цели проект Ubuntu планирует использовать модифицированный вариант загрузчика efilinux, развиваемого компанией Intel.