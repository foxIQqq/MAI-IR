Выпуск Samba 4.16.0

Представлен релиз Samba 4.16.0, продолживший развитие ветки Samba 4 с полноценной реализацией контроллера домена и сервиса Active Directory, совместимого с реализацией Windows 2008 и способного обслуживать все поддерживаемые Microsoft версии Windows-клиентов, в том числе Windows 11. Samba 4 является многофункциональным серверным продуктом, предоставляющим также реализацию файлового сервера, сервиса печати и сервера идентификации (winbind). Ключевые изменения в Samba 4.16: В состав включён новый исполняемый файл samba-dcerpcd, обеспечивающий работу сервисов DCE/RPC (Distributed Computing Environment / Remote Procedure Calls). Для обработки приходящих запросов samba-dcerpcd может вызваться по мере необходимости из процессов smbd или "winbind --np-helper" с передачей информации через именованные каналы. Кроме того, samba-dcerpcd может работать и в режиме независимо работающего фонового процесса, самостоятельно обрабатывающего запросы, и в том числе может применяться не только вместе с samba, но и с другими реализациями серверов SMB2, такими как встроенный в ядро Linux сервер ksmbd. Для управления запуском samba-dcerpcd в smb.conf в секции "[global]" предложена настройка "rpc start on demand helpers = [true|false]". Встроенная реализация сервера Kerberos обновлена до выпуска Heimdal 8.0pre, в котором появилась поддержка механизма защиты FAST, обеспечивающего защиту мандатов через инкапсуляцию запросов и ответов в отдельный шифрованный туннель. Добавлен механизм Certificate Auto Enrollment, позволяющий автоматически получать сертификаты из сервисов Active Directory при включении групповых политик ("apply group policies" в smb.conf). Во встроенном DNS-сервере реализована возможность использования произвольного номера сетевого порта при определении DNS-серверов для перенаправления запросов (dns forwarder). Если раньше в настройках мог указываться только хост для перенаправления, то теперь информация может задаваться в формате host:port. В компоненте CTDB, отвечающем за работу кластерных конфигураций, роли "recovery master" и "recovery lock" переименованы в "leader" и "cluster lock", также вместо "master" следует использовать слово "leader" в различных командах (recmaster -> leader, setrecmasterrole -> setleaderrole). Прекращена поддержка команды SMBCopy (SMB_COM_COPY) и функции раскрытия масок (wildcard) в именах файлов, работающих на стороне сервера и определённых в устаревшем протоколе SMB1. Функциональность протокола SMB2 для копирования файлов на стороне сервера сохранена без изменений. На платформе Linux в smbd прекращено использование обязательных (mandatory) блокировок файлов в реализации "share modes". Подобные блокировки, которые реализовывались в ядре через блокирование системных вызовов и считались ненадёжными из-за возможных состояний гонки, не поддерживаются начиная с ядра Linux 5.15.