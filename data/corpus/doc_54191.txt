Доступен WebThings Gateway 1.0, шлюз для умного дома и IoT-устройств

Опубликован выпуск платформы для потребительских интернет-устройств WebThings Gateway 1.0. Значительное изменение номера версии подчёркивает отделение от компании Mozilla в независимый проект, управляемый и развиваемый сообществом. Выпуск в основном нацелен на миграцию пользователей с инфраструктуры, завязанной на Mozilla, на собственные сервисы. Напомним, что компания Mozilla из-за оптимизации расходов прекратила финансирование разработки и отправила проект WebThings в свободное плаванье, предоставив возможность использования своей инфраструктуры для организации удалённого доступа, работы облачных сервисов и доставки обновлений только до 31 декабря 2020 года. WebThings Gateway 1.0 будет распространяться через серверы Mozillа, но все дальнейшие обновления будут переключены на собственные мощности и новый поддомен webthings.io (туннели к домашним шлюзам были завязаны на поддомены *.mozilla-iot.org). После установки обновления WebThings Gateway 1.0 пользователям будет показано приглашение для регистрации на сайте webthings.io и перехода на использование новой инфраструктуры. После миграции продолжат работать автоматическая доставка обновлений и удалённый доступ, но название поддомена для точки входа изменится с *.mozilla-iot.org на *.webthings.io, а обновления станут загружаться через хост api.webthings.io. В случае отказа от миграции локальная установка продолжит работать как и раньше, но без привязки к облачным сервисам и без автоматической доставки обновлений. Кроме обеспечения миграции в выпуске WebThings Gateway 1.0 также реализованы следующие изменения: Проведена чистка от использования бренда Mozilla: каталог с профилем переименован с ~/.mozilla-iot в ~/.webthings, переменная окружения MOZIOT_HOME переименована в WEBTHINGS_HOME, сервисы mozilla-iot-gateway.* переименованы в webthings-gateway.* и т.п. Добавлена поддержка поиска дополнений. Добавлена поддержка новой ветки платформы Node.js 14. Библиотека gateway-addon для Node.js переписана на языке TypeScript. Добавлена поддержка инструментария Podman в образе для Docker. Реализована поддержка датчиков влажности, атмосферного давления, качества воздуха и задымлённости. Добавлено свойство для учёта текущей потребляемой мощности. В настройки добавлен канал доставки обновлений, предоставляющий доступ к пререлизам. В дополнение к MPEG-DASH и HLS добавлена поддержка формата кодирования видео M-JPEG. Добавлен перевод для украинского языка. Удалён встроенный сервер mDNS, вместо которого следует использовать внешние реализации (Avahi или Bonjour). В версии для Raspbian включена поддержка SPI. Напомним, что платформа WebThings состоит из шлюза WebThings Gateway и библиотеки WebThings Framework. Код проекта написан на языке JavaScript с использованием серверной платформы Node.js и распространяется под лицензией MPL 2.0. На базе OpenWrt развивается готовый дистрибутив с интегрированной поддержкой WebThings Gateway, предоставляющий унифицированный интерфейс для настройки умного дома и беспроводной точки доступа. WebThings Gateway представляет собой универсальную прослойку для организации доступа к различным категориям потребительских и IoT-устройств, скрывающую за собой особенности каждой платформы и не требующую использования специфичных для каждого производителя приложений. Для взаимодействия шлюза с IoT-платформами можно использовать протоколы ZigBee и ZWave, WiFi или прямое подключение через GPIO. Шлюз можно установить на плату Raspberry Pi и получить систему управления умным домом, объединяющую все имеющиеся в доме IoT-устройства и предоставляющую средства для мониторинга и управления ими через Web-интерфейс. Платформа также позволяет создавать дополнительные web-приложения, которые могут взаимодействовать с устройствами через Web Thing API. Таким образом, вместо установки своего мобильного приложения для каждого типа IoT-устройств, можно использовать единый унифицированный web-интерфейс. Для установки WebThings Gateway достаточно загрузить предоставленную прошивку на SD-карту, открыть в браузере хост "gateway.local", настроить подключение к WiFi, ZigBee или ZWave, найти имеющиеся IoT-устройства, настроить параметры для доступа извне и добавить самые востребованные устройства на домашний экран. Шлюз поддерживает такие функции, как определение устройств в локальной сети, выбор web-адреса для соединения с устройствами из интернета, создание учётных записей для доступа к web-интерфейсу шлюза, подключение к шлюзу устройств, поддерживающих проприетарные протоколы ZigBee и Z-Wave, удалённое включение и выключение устройств из web-приложения, удалённый мониторинг за состоянием дома и видеонаблюдение. WebThings Framework предоставляет набор заменяемых компонентов для создания IoT-устройств, которые могут напрямую взаимодействовать c использованием Web Things API. Подобные устройства могут автоматически определяться шлюзами на базе WebThings Gateway или клиентским ПО (используется mDNS) для последующего мониторинга и управления через Web. Реализации серверов для Web Things API подготовлены в форме библиотек на Python, Java, Rust, Arduino и MicroPython.