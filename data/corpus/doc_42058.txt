Выпуск cистемы управления контейнерной виртуализацией Docker 1.6

Представлен релиз инструментария для управления изолированными Linux-контейнерами Docker 1.6, предоставляющего высокоуровневый API для манипуляции контейнерами на уровне изоляции отдельных приложений. В частности, Docker позволяет, не заботясь о формировании начинки контейнера, запускать произвольные процессы в режиме изоляции и затем переносить и клонировать сформированные для данных процессов контейнеры на другие серверы, беря на себя всю работу по созданию, обслуживанию и сопровождению контейнеров. Код Docker написан на языке Go и распространяется под лицензией Apache 2.0. Инструментарий базируется на применении встроенных в ядро Linux штатных механизмов изоляции на основе пространств имён (namespaces) и групп управления (cgroups). Для создания контейнеров предлагается использовать libcontainer (обёртка над namespaces и cgroups), также возможно применение lxc, libvirt, systemd-nspawn и других систем изоляции. Для формирования контейнера достаточно загрузить базовый образ окружения (docker pull base), после чего можно запускать в изолированных окружениях произвольные приложения (например, для запуска bash можно выполнить "docker run -i -t base /bin/bash"). Из добавленных в Docker 1.6 новшеств можно отметить: Возможность привязки определяемых пользователем меток к контейнерам и образам для дальнейшего использования данных меток в утилитах. Метки определяются в формате "ключ=значение" и задаются для образов в файлах Dockerfile командой LABEL, а для запущенных контейнеров при помощи опции "--label" ("-l"). После определения метки, её можно использовать в качестве идентификатора контейнера или образа, например, "docker images -f label=com.example.foo=bar" или "docker ps -a -f label=com.example.bar=baz"; Возможность подключения драйверов для ведения логов, позволяющих реализовать различные схемы сохранения системного журнала, в том числе передачи логов контейнера на внешний syslog-сервер. Подключение драйверов логов осуществляется по аналогии с драйверами хранилищ. В настоящее время доступно три драйвера: json-file (по умолчанию), syslog и none; Возможность адресации образов по цифровому идентификатору, формируемому в виде хэша, неизменного для содержимого контейнера. Идентификатор задаётся в формате namespace/repository@digest, по аналогии с адресацией по тегам (namespace/repository:tag). Цифровой идентификатор можно использовать для получения, сборки и запуска образа; Добавлена опция "--cgroup-parent", позволяющая запустить контейнер под индивидуальным cgroup, созданным и обслуживаемым пользователем. При настройке демона docker теперь можно определить параметры ulimit, применяемые по умолчанию для всех контейнеров. Например, "docker -d --default-ulimit nproc=1024:2048 --default-ulimit nofile=100:200" установит лимит на число процессов и открытых файлов для дочерних процессов всех запускаемых контейнеров. Настройки по умолчанию можно переопределить на этапе запуска контейнера, например "docker run -d --ulimit nproc=2048:4096 httpd"; Возможность внести изменения в образ контейнера на лету, без его полной пересборки. Для внесения изменений следует использовать команды "commit --change" и "import --change", изменения задаются в виде инструкций в формате Dockerfile; Предварительный выпуск версии клиента docker для платформы Windows, подготовленного совместно с инженерами из компании Microsoft. Выпуск инструмента Machine 0.2, предназначенного для быстрого развёртывание хостов в гостевых окружениях систем виртуализации VirtualBox, VMware, AWS, Digital Ocean и Microsoft Azure. Осуществляет создание начинки сервера, установку на него Docker и настройку клиента для работы с данным сервером. В новой версии добавлен программный интерфейс для создания драйверов чистильщиков, реализован более надёжный и целостный встроенный механизм управления начинкой серверов, добавлена команда для генерации TLS-сертификатов; Выпуск инструмента Swarm 0.2, предоставляющего средства кластеризации для упакованных в контейнеры приложений. Swar даёт возможность управлять кластером из нескольких хостов Docker (например, созданных с использованием Docker Machine) в форме работы с одним виртуальным хостом. Так как Swarm использует штатный Docker API, он может применяться для управления и другими поддерживающими данный API инструментами, такими как dokku, fig, krane, flynn, deis, docker-ui, shipyard, drone.io, Jenkins. В новой версии реализована новая стратегия планировщика для распределения контейнеров по узлам кластера, добавлена поддержка дополнительных команд docker, обеспечена возможность задания драйверов для поддержки различных видов кластерных систем, таких как Mesos; Выпуск инструмента Docker Compose 1.2, позволяющего организовать работу распределённого на несколько хостов приложения, в работу которого вовлечено несколько контейнеров, запущенных в кластере на базе Docker Swarm. В новой версии появилась возможность создания конфигураций, включающих настройки из других файлов Compose, что позволяет уйти от дублирования настроек при создании конфигурации приложения для разных окружений или обеспечить совместного использование единого блока конфигурации разными приложениями. Дополнительно, объявлено об очередном раунде инвестиций, в рамках которого компания Docker получила 95 млн долларов США.