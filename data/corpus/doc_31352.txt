Вышел дистрибутив для создания сетевых хранилищ NexentaStor 3.1. Прогресс в развитии OpenIndiana

Увидел свет релиз дистрибутива для создания сетевых хранилищ NexentaStor 3.1, сочетающего в себе ядро OpenSolaris и программное окружение Ubuntu 8.04. В качестве файловой системы используется ZFS, для работы пакетами задействован пакетный менеджер APT. Управление системой производится через удобный web-интерфейс. Размер установочного iso-образа составляет 580 Мб, для использования системы требуется минимум 768 Мб ОЗУ. Данный выпуск является последним, основанным на ядре OpenSolaris и пакетной базе Ubuntu, следующая версия дистрибутива будет основана на ядре, разрабатываемом в рамках проекта Illumos (развиваемый сообществом форк OpenSolaris), и пакетной базе Debian Squeeze. Через несколько недель планируется выпустить релиз платформы Nexenta Core Platform 3.1, которая предоставляет собой минимальный костяк для построения производных дистрибутивов на базе ядра OpenSolaris/Illumos и пользовательского окружения GNU. Особенности NexentaStor 3.1: Поддержка SCSI-команды UNMAP для файловой системы ZFS и фреймворка COMSTAR (Common Multiprotocol SCSI Target), который обеспечивает работу системы в режиме SCSI target, позволяющем организовать доступ к сетевым хранилищам данных посредством протоколов FC (Fibre Channel), FCoE (Fibre Channel over Ethernet), iSCSI или iSER. Используя SCSI-команду UNMAP, файловая система может информировать хранилище об освобождении блоков данных и возможности их возвращения в пул свободных блоков физического хранилища. Например, когда для хранения задействован SSD-накопитель, производится не только изменение мета-данных ФС, но и уведомление контроллера SSD о возможности перераспределения указанных блоков, что позволяет заметно повысить эффективность работы сборщика мусора; Проведение работы по увеличению производительности и управляемости. Наибольший прирост производительности наблюдается при организации SCSI-хранилищ (SCSI target). Реализована поддержка VAAI (vStorage API for Array Integration), что позволило существенно повысить производительность при использовании NexentaStor для создания хранилищ, обеспечивающих работу гостевых окружений в системе виртуализации VMware; Переход на 28 версию ZFS, среди особенностей которой можно отметить: поддержку автоматического распознавания и объединения дубликатов данных; реализацию RAIDZ3, отличающегося от RAIDZ хранением трех копий структур, обеспечивающих целостность; добавление утилиты "zfs diff" для просмотра изменений между двумя ZFS-снапшотами или между снапшотом и текущим состоянием ФС; поддержка команды zpool split для разбиения отзеркалированного zpool-раздела на несколько раздельных пулов; возможность импорта пула в режиме только для чтения; ускорение выполнения операций по созданию и удалению снапшотов. Разработчики NexentaStor обращают внимание пользователей, что после обновления до версии 3.1 ZFS-пулы автоматически не будут преобразованы в формат ZFSv28. Обновление формата существующих разделов могут быть выполнены вручную, но в этом случае пользователь будет лишен возможности откатиться на прошлую версию дистрибутива. С 12 до 18 Тб увеличен максимальный размер хранилища, доступ к которому может быть организован при использовании бесплатной Community-версии NexentaStor. Для полного снятия данного ограничения, а также для возможности использовать средства обеспечения повышенной доступности хранилища (средства для поднятия кластера высокой доступности), пользователям предлагается приобрести коммерческую версию NexentaStor; В рамках базовой платформы Nexenta Core Platform 3 пользователи имеют возможность установить из стандартного репозитория более 12 тыс. пакетов с программами. Окружение полностью совместимо с Debian, поддерживаются те же методы обновления и настройки. Дополнительно поставляются инструменты для использования таких подсистем OpenSolaris, как инфраструктура динамической трассировки DTrace, технологии виртуализации IP-стека Crossbow и SMF (Service Management Facility). В состав входит apt-clone, надстройка над apt-get, позволяющая задействовать при управлении пакетами снапшоты ZFS. Например, apt-clone позволяет, клонировать систему в отдельный ZFS-пул, провести там обновление и с минимальным простоем переключить рабочую систему в обновленное окружение. Также при выполнении действий с apt-get создаются контрольные точки, на которые можно при желании откатиться, если возникнут какие-то проблемы с обновленными или установленными пакетами. Что касается проекта OpenIndiana, в рамках которого независимым сообществом развивается построенное на кодовой базе Illumos ответвление от OpenSolaris, то несмотря на то, что последнее обновление oi_148 вышло в декабре прошлого года, в репозитории проекта и списках рассылки наблюдается достаточно высокая активность. Кроме того, на днях было объявлено об обновлении репозитория пакетов pkg.openindiana.org/dev, в котором представлена подборка приложений для сборок oi_147 и oi_148. Через несколько недель планируется выпустить релиз сборки oi_151. Кроме того, анонсировано начало тестирования дополнительного репозитория пакетов для OpenIndiana, созданного на основе наработок проекта SFE (spec-files-extra), в рамках которого поддерживается набор spec-файлов для сборки приложений в OpenSolaris, Solaris Express и OpenIndiana. В настоящий момент в новом репозитории можно найти 228 пакетов, с такими программами, как Qt 4.7.3, Xfce 4.8, mplayer2 2.0.99, mpd 0.16.2, ffmpeg 0.8, lame 3.98.4, tmux 1.4, nginx 0.8.53, Dovecot 2.0.13, Postfix 2.8.1, Postgres 9.0.4, gcc 4.6, LLVM/Clang 3.0-dev, git 1.7.5, cmake 2.8.4, boost 1.46.1.