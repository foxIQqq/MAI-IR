Выпуск CRIU 3.15, системы для сохранения и восстановления состояния процессов в Linux

Доступен выпуск инструментария CRIU 3.15 (Checkpoint and Restore In Userspace), предназначенного для сохранения и восстановления процессов в пространстве пользователя. Инструментарий позволяет сохранить состояние одного или группы процессов, а затем возобновить работу с сохранённой позиции, в том числе после перезагрузки системы или на другом сервере без разрыва уже установленных сетевых соединений. Код проекта распространяется под лицензией GPLv2. Из областей применения технологии CRIU отмечается обеспечение перезагрузки ОС без нарушения непрерывности выполнения длительно выполняемых процессов, Live-миграция изолированных контейнеров, ускорение запуска медленных процессов (можно начать работу с состояния, сохранённого после инициализации), проведение обновлений ядра без перезапуска сервисов, периодическое сохранение состояния долговыполняемых вычислительных задач для возобновления работы в случае краха, балансировка нагрузки на узлы в кластерах, дублирование процессов на другую машину (fork на удалённую систему), создание снапшотов пользовательских приложений в процессе работы для их анализа на другой системе или на случай если потребуется отменить дальнейшие действия в программе. CRIU применяется в таких системах управления контейнерами, как OpenVZ, LXC/LXD и Docker. Необходимые для работы CRIU изменения включены в основной состав ядра Linux. В новом выпуске: Представлен сервис criu-image-streamer, позволяющий в потоковом режиме напрямую передавать образы процессов в/из CRIU в ходе выполнения операций заморозки/восстановления. Образы могут передаваться из внешнего хранилища (S3, GCS и т.п.) без буферизации в локальной ФС. Добавлена поддержка архитектуры MIPS. Разрешена заморозка процессов, не относящихся к существующему пространству имён PID-идентификаторов, с последующим восстановлением в существующем пространстве имён PID. Добавлены дополнительные механизмы проверки файлов. Добавлена поддержка заморозки и восстановление структур BPF BPF_HASH_OF_MAPS и BPF_ARRAY_OF_MAPS. Добавлена начальная поддержка второй версии cgroup.