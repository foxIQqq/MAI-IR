Новая версия почтового сервера Exim 4.93

После 10 месяцев разработки состоялся релиз почтового сервера Exim 4.93, в который внесены накопившиеся исправления и добавлены новые возможности. В соответствии с ноябрьским автоматизированным опросом около миллиона почтовых серверов, доля Exim составляет 56.90% (год назад 56.56%), Postfix используется на 34.98% (33.79%) почтовых серверов, Sendmail - 3.90% (5.59%), Microsoft Exchange - 0.51% (0.85%). Основные изменения: Поддержка внешних аутентификаторов (RFC 4422). При помощи команды "SASL EXTERNAL" клиент может информировать сервер об использовании для аутентификации учётных данных, переданных через внешние сервисы, такие как IP Security (RFC4301) и TLS; Добавлена возможность использования формата JSON для lookup-проверок. Также добавлены варианты условных масок "forall" и "any", использующие JSON. Добавлены переменные $tls_in_cipher_std и $tls_out_cipher_std, содержащие названия наборов шифров, соответствующие наименованию из RFC. Добавлены новые флаги для управления отражением идентификатора сообщений в логе (задаются через настройку log_selector): "msg_id" (включён по умолчанию) с идентификатором сообщения и "msg_id_created" со сгенерированным для нового сообщения идентификатором. В режим "verify=not_blind" добавлена поддержка опции "case_insensitive" для игнорирования регистра символов при проверке. Добавлена экспериментальная опция EXPERIMENTAL_TLS_RESUME, обеспечивающая возможность возобновления ранее прерванного TLS-соединения. Добавлена опция exim_version для переопределения строки с номером версии Exim, выводимой в различных местах и передаваемой через переменные $exim_version и $version_number. Добавлены варианты оператора ${sha2_N:} для N=256, 384, 512. Реализованы переменные "$r_...", устанавливаемые из опций маршрутизации и доступные для использования при принятии решений о маршрутизации и выборе транспорта. В lookup-запросах SPF добавлены поддержка IPv6. При выполнении проверок через DKIM добавлена возможность фильтрации по типам ключей и хэшей. При использовании TLS 1.3 обеспечена поддержка расширения протокола OCSP (Online Certificate Status Protocol) для проверки статуса отзыва сертификата. Добавлено событие "smtp:ehlo" для наблюдения за предоставленным удалённой стороной списком функциональных возможностей. Добавлена опция командной строки для перемещения сообщений из одной именованной очереди в другую. Добавлены переменные с версиями TLS для входящих и исходящих запросов - $tls_in_ver и $tls_out_ver. При использовании OpenSSL добавлена функция записи файлов с ключами в формате NSS для декодирования перехваченных сетевых пакетов. Имя файла задаётся через переменную окружения SSLKEYLOGFILE. При сборке с GnuTLS аналогичная функциональность предоставляется средствами GnuTLS, но требует работы с правами root.