Выпуск децентрализованной видеовещательной платформы PeerTube 2.2

Опубликован выпуск PeerTube 2.2, децентрализованной платформы для организации видеохостинга и видеовещания. PeerTube предлагает независимую от отдельных поставщиков альтернативу YouTube, Dailymotion и Vimeo, использующую сеть распространения контента на базе P2P-коммуникаций и связывания между собой браузеров посетителей. Наработки проекта распространяются под лицензией AGPLv3. PeerTube базируется на применении BitTorrent-клиента WebTorrent, запускаемого в браузере и использующего технологию WebRTC для организации прямого P2P-канала связи между браузерами, и протокола ActivityPub, позволяющего объединить разрозненные серверы с видео в общую федеративную сеть, в которой посетители участвуют в доставке контента и имеют возможность подписки на каналы и получения уведомлений о новых видео. Предоставляемый проектом web-интерфейс построен с использованием фреймворка Angular. Федеративная сеть PeerTube образуется как содружество связанных между собой небольших серверов хостинга видео, на каждом из которых имеется свой администратор и могут быть приняты свои правила. Каждый сервер с видео выполняет роль BitTorrent-трекера, на котором размещены учётные записи пользователей данного сервера и их видео. Идентификатор пользователя формируются в форме "@имя_пользователя@домен_сервера". Передача данных при просмотре осуществляется непосредственно из браузеров других посетителей, просматривающих контент. Если видео никто не просматривает, отдача организуется сервером, на который изначально загружено видео (используется протокол WebSeed). Помимо распределения трафика между пользователями, просматривающими видео, PeerTube также позволяет узлам, запущенным авторами для первичного размещения видео, кэшировать видео других авторов, формируя распределённую сеть не только из клиентов, но и из серверов, а также обеспечивая отказоустойчивость. Для начала вещания через PeerTube пользователю достаточно загрузить на один из серверов видеоролик, описание и набор тегов. После этого ролик станет доступен во всей федеративной сети, а не только с сервера первичной загрузки. Для работы с PeerTube и участия в распространении контента достаточно обычного браузера и не требуется установка дополнительного ПО. Пользователи могут отслеживать активности в выбранных видеоканалах, подписавшись на интересующие каналы в федеративных социальных сетях (например, в Mastodon и Pleroma) или через RSS. Для распространения видео с использованием P2P-коммуникаций пользователь также может добавить на свой сайт специальный виджет со встроенным web-плеером. В настоящее время для размещения контента запущены более 300 серверов, поддерживаемых разными добровольцами и организациями. Если пользователя не устраивают правила размещения видео на определённом сервере PeerTube, он может подключиться к другому серверу или запустить свой собственный сервер. Для быстрого развёртывания сервера предоставляется преднастроенный образ в формате Docker (chocobozzz/peertube). В новом выпуске: Добавлена возможность импорта звуковых файлов, позволяющая распространять через PeerTube свои аранжировки или подкасты без создания видео-заглушки. При желании к звуковому файлу можно прикрепить изображение. Усовершенствована панель поиска, в которой появились подсказки о командах для раздельного поиска каналов и видео. Например, для поиска каналов в привязке к домену предложена конструкция "@channel_id@domain". В окне загрузки видео обеспечено отображение дополнительной информации о файле. В меню в левой части экрана для неподключившихся пользователей добавлена кнопка "Settings", через которую можно настроить работу с PeerTube под свои предпочтения, например, указать использовать ли режим P2P и отображать ли эскизы контента для взрослых, настроить фильтры по языку, активировать автовоспроизведение и выбрать тему оформления. Для загрузки видео в PeerTube теперь можно использовать интерфейс drag&drop для перемещения файла мышью вместо вызова меню "Select file". В диалоге импорта видео добавлена возможность импорта субтитров, определения лицензии и выбора языка. Улучшен интерфейс редактора текста с описанием видео, поддерживающего разметку markdown. Добавлен режим полноэкранного редактирования. Для администратора предложен новый интерфейс для управления дубликатами видео, позволяющий просмотреть список видео текущего узла, которые продублированы на других узлах, а также список чужих видео, продублированных на текущем узле. Для оценки занимаемого чужими дубликатами дискового пространства предложены наглядные диаграммы. Улучшен интерфейс модерирования и рассмотрения жалоб на недопустимые видео. Добавлены фильтры различных типов жалоб, кнопки быстрого блокирования видео и учётных записей, обеспечено отображения эскизов на графике и добавлен быстрый доступ к встроенным видео. Добавлена возможность создания плагинов с реализацией внешних методов аутентификации. Предложены три плагина для аутентификации с использованием LDAP, OpenID и SAMLv2. В API добавлены вызовы для создания плагинов модерирования, выполняющих такие действия, как удаление видео, подтверждение импорта URL или торрента, скрытия узла или учётной записи и поддержание чёрного списка видео. В качестве примера предложен плагин peertube-plugin-auto-mute для автоматического скрытия учётных записей и узлов на основании списка нарушителей. В email-уведомлениях предоставлена возможность использования разметки HTML. В интерфейсе администратора появилась поддержка автоматического пополнения списка отслеживаемых узлов на основании подобного списка на другом узле. В том числе публичные списки узлов для импорта связей можно загружать через сервисы подобные github, gitlab и pastebin. Улучшен API для управление воспроизведением встраиваемого на сайты видео. Через API можно получить сведения о длительности видео, окончании воспроизведения и субтитрах.