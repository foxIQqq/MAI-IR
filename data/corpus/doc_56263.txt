Выпуск дистрибутива NixOS 21.11, использующего пакетный менеджер Nix

Состоялся выпуск дистрибутива NixOS 21.11, основанного на пакетном менеджере Nix и предоставляющего ряд собственных разработок, упрощающих настройку и сопровождение системы. Например, в NixOS вся настройка системы происходит посредством единого файла системной конфигурации (configuration.nix), предоставляется возможность быстрого отката системы на предыдущую версию конфигурации, присутствует поддержка переключения между различными состояниями системы, поддерживается установка индивидуальных пакетов отдельными пользователями, есть возможность одновременного использования нескольких версий одной программы, обеспечены воспроизводимые сборки. Размер полного установочного образа с KDE 1.6 ГБ, GNOME - 2 ГБ, сокращённого консольного варианта - 765 МБ. Основные новшества: Рабочий стол KDE Plasma по умолчанию переведён на использование протокола Wayland. Обновлены рабочие столы GNOME 41 и Pantheon 6 (из Elementary OS 6). Вместо iptables задействован набор iptables-nft, предоставляющий утилиты с тем же синтаксисом командной строки, но транслирующих полученные правила в байткод nf_tables. Обновлены версии Systemd 249, PHP 8.0, Python 3.9, PostgreSQL 13, bash 5, OpenSSH 8.8p1. Значительно улучшена поддержка системы управления контейнерами LXD. Реализована возможность сборки образов для LXD из файлов конфигурации при помощи nixpkgs. Обеспечена сборка образов NixOS с полной поддержкой nixos-rebuild, которые можно использовать обособленно. Добавлено более 40 новых сервисов, включая Git, btrbk (резервное копирование btrfs), clipcat (менеджер буфера обмена), dex (провайдер OAuth 2.0), Jibri (сервис для записи конференций Jitsi Meet), Kea (DHCP-сервер), owncast (стриминг видео), PeerTube, ucarp (реализация протокола CARP), opensnitch (динамический межсетевой экран), Hockeypuck (сервер ключей OpenPGP), MeshCentral (аналог TeamViewer), influxdb2 (СУБД для хранения метрик), fluidd (web-интерфейс для управления 3D-принтерами), postfixadmin (web-интерфейс для управления почтовым сервером на базе Postfix), seafile (платформа облачного хранения данных). При использовании Nix результат сборки пакетов хранится в отдельной поддиректории в /nix/store. Например, после сборки пакет firefox может записываться в /nix/store/3nlv74c8z5skg8mpp0w5wk5lbpl6d6qz-firefox-94.0.2/, где "3nlv74c8z5skg8mpp0w5wk5lbpl6d6qz" является хешем всех его зависимостей и инструкций сборки. Под установкой пакета подразумевается его сборка или скачивание уже собранного (при условии, что он был уже собран на Hydra - сервисе сборки проекта NixOS), а также формирование директории с симлинками на все пакеты в профиле системы или пользователя, с последующим добавлении этой директории в PATH. Аналогичный подход применяется в пакетном менеджере GNU Guix, который основан на наработках Nix. Коллекция пакетов представлена в специальном репозитории Nixpkgs.