ulatencyd - система динамической оптимизации отзывчивости Linux-системы

В списке рассылки разработчиков Linux-ядра представлено системное приложение ulatencyd, меняющее в фоновом режиме параметры планировщика задач (через манипуляцию с cgroups, nice, ionice и т.п.) и другие характеристики Linux-ядра, динамически подгоняя их для обеспечения максимальной отзывчивости десктоп-системы. Параметры работы ulatencyd задаются через правила, оформленные в виде скриптов на языке Lua (непосредственно демон написан на Си), поэтому пользователь легко может изменить поведение и реализовывать собственные методы тюнинга. Для сбора информации о состоянии процессов используются данные из файловой системы proc, интерфейса netlink и встроенной в ядро системы аудита. При росте нагрузки со стороны отдельных процессов демон на основании определенных на языке Lua правил принимает решение об ужесточении лимитов для проблемного процесса (изоляция, урезание доступной памяти или помещение в отдельный cgroups), после чего отслеживает эффект от внесенных изменений путем контроля обратной связи. Эффект от использования ulatencyd при запуске ресурсоемких задач на десктоп-системе сравним c 200-строчным патчем, группирующим задачи в привязке к TTY, или помещении процессов в отдельные cgroup при запуске сервисов. Например, запуск в консоли сборки проекта в 40 потоков ("make -j 40") не мешает просмотру фильма в HD-разрешении. Тем не менее реализация группировки задач на уровне ядра лишена гибкости, в то время как ulatencyd может применять эвристические методы для принятия решений, учитывающие специфику десктоп-систем и взаимодействуя с X-сервером через DBus. Проект пока находится на начальной стадии развития и не поддерживает некоторые тонкие моменты, такие как состояние раздела подкачки (бесконечный свопинг) и разрастание числа процессов (fork-бомбы).