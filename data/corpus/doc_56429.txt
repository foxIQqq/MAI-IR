Сравнение производительности игр при использовании Wayland и X.org

Ресурс Phoronix опубликовал результаты сравнения производительности игровых приложений, запускаемых в окружениях на базе Wayland и X.org в Ubuntu 21.10 на системе с графической картой AMD Radeon RX 6800. В тестировании приняли участие игры Total War: Three Kingdoms, Shadow of the Tomb Raider, HITMAN 2, Xonotic, Strange Brigade, Left 4 Dead 2, Batman: Arkham Knight, Counter-Strike: Global Offensive и F1 2020. Тесты проводились при разрешениях экрана 3840x2160 и 1920x1080 как для родных Linux-сборок игр, так и для Windows-игр, запускаемых с использованием связки Proton + DXVK. В среднем игры в GNOME-сеансе на базе Wayland демонстрировали FPS на 4% выше, чем в сеансе GNOME поверх X.org. В большинстве тестов KDE 5.22.5 немного отставал от GNOME 40.5 при использовании Wayland, но опередил при использовании X.Org в тестах большинства игр (Counter-Strike: Global Offensive, F1 2020, Shadow of the Tomb Raider, Left 4 Dead 2, Xonotic, Total War: Three Kingdoms, Strange Brigade). Для игр "Total War: Three Kingdoms" и "Shadow of the Tomb Raider" тесты KDE на базе Wayland провести не удалось из-за аварийных завершений игр. В игре HITMAN 2 при использовании KDE, независимо от графической подсистемы, наблюдалось аномальное более чем двухкратное отставание от GNOME и Xfce. Xfce тестировался только с X.org и в большинстве измерений находился на последнем месте, за исключения тестов игры Strange Brigade в разрешении 1920x1080, в которых Xfce вырвался на первое место как при запуске родных сборок игры, так и при использовании прослойки Proton. При этом в тесте с разрешением 3840x2160 Xfce оказался на последнем месте. Данный тест также был примечателен тем, что Wayland-сеанс KDE обогнал GNOME. В играх, поддерживающий OpenGL и Vulkan, при использовании Vulkan FPS был примерно на 15% выше. Кроме того, опубликованы результаты сравнения производительности различных игр и тестовых приложений при использовании ядер Linux 5.15.10 и 5.16-rc на ноутбуках с процессорами Ryzen 7 PRO 5850U и Ryzen 5 5500U. Тесты показали ощутимое увеличение производительности (от 2 до 14%) при использовании ядра Linux 5.16, сохраняющееся независимо от версии Mesa (в финальном тесте использовалась ветка 22.0-dev). Релиз ядра 5.16 ожидается 10 января. Какое именно изменение в ядре 5.16 привело к увеличению производительности точно не ясно, предполагается, что это комбинация улучшений, связанных с использованием CPU в планировщике задач и оптимизациями поддержки GPU Radeon Vega в драйвере AMDGPU. Дополнительно, можно отметить выпуск графического драйвера AMDVLK, предоставляющего реализацию графического API Vulkan, развиваемую компанией AMD. До открытия кода драйвер поставлялся в составе проприетарного набора драйверов AMDGPU-PRO и конкурировал с открытым Vulkan-драйвером RADV, развиваемым проектом Mesa. С 2017 года код драйвера AMDVLK открыт под лицензией MIT. Новый выпуск примечателен поддержкой спецификации Vulkan 1.2.201, реализацией Vulkan-расширения VK_EXT_global_priority_query и решением проблем с производительностью в окружениях на базе Wayland (в Ubuntu 21.04 в сеансе на базе Wayland наблюдалось снижение производительности на 40% по сравнению с Ubuntu 20.04 с сеансом X.Org).