Началось бета-тестирование FreeBSD 11.0

Представлен первый бета-выпуск FreeBSD 11.0. Выпуск FreeBSD 11.0-BETA1 доступен для архитектур amd64, i386, powerpc, powerpc64, sparc64 и armv6 (BANANAPI, BEAGLEBONE, CUBIEBOARD, CUBIEBOARD2, CUBOX-HUMMINGBOARD, GUMSTIX, RPI-B, RPI2, PANDABOARD, WANDBOARD). Дополнительно подготовлены образы для систем виртуализации (QCOW2, VHD, VMDK, raw) и облачных окружений Amazon EC2. Релиз FreeBSD 11.0 запланирован на 2 сентября. Основные новшества: Новая высокопроизводительная реализация системного вызова sendfile, предназначенного для организации прямой передачи данных между файловым дескриптором и сокетом, поддерживающая отправку файла в сокет в асинхронном режиме без ожидания завершения чтения файла. Новая система автоматического монтирования ФС (automounter), унифицированная с реализациями из других Unix-систем (macOS, Solaris), использующая совместимый с Solaris формат сопоставления точек монтирования и поддерживающая интеграцию с LDAP. В auto_master добавлен новый тип сопоставления "-media", позволяющий автоматизировать подключение внешних накопителей CD и USB, а также тип "-noauto" для обработки записей noauto в fstab; Добавлена возможность загрузки с временным rootfs, вместо которого затем монтируется реальный корневой раздел. Процесс смены корневого раздела реализован в форме частичного завершения работы с удалением всех процессов, отмонтированием rootfs, монтированием нового rootfs, запуском процесса init и переходом к выполнению скриптов инициализации; Улучшена поддержка систем с архитектурой NUMA; Возможность ведения черного списка сбойных областей памяти; Обновление компилятора Clang до версии 3.8.0. Для платформ amd64 и arm64 по умолчанию задействован отладчик LLDB, развиваемый проектом LLVM; В базовой системе задействованы варианты утилит для работы с объектными файлами в формате ELF - addr2line, elfcopy (strip), nm, readelf, size и strings из набора ELF Tool Chain, эквивалентного набору GNU Binutils, но распространяемого под лицензией BSD; В TCP-стеке добавлена поддержка определения PLPMTUD (Packetization Layer Path MTU Discovery, RFC 4821), которая отключена по умолчанию. Для включения следует использовать sysctl net.inet.tcp.pmtud_blackhole_detection, net.inet.tcp.pmtud_blackhole_mss и net.inet.tcp.v6pmtud_blackhole_mss; Новая версия подсистемы NetMap c поддержкой двунаправленных потоков, поддержкой kqueue, улучшенной пользовательской библиотекой, возможностью эмуляции netmap для любых адаптеров без родной поддержки netmap, интеграцией со стеком VALE (используется в системе виртуализации bhyve); Большая порция улучшений, связанных с поддержкой различных устройств с процессорами ARM, ARM64 и PowerPC; Усовершенствован гипервизор BHyVe, в котором добавлена поддержка новых типов гостевых систем. В настоящее время поддерживается создание хост-систем на базе платформы FreeBSD/AMD64 и запуск гостевых систем c FreeBSD 8+, Linux i386/x64, OpenBSD i386/amd64, NetBSD/amd64, Illumos и Windows Vista/7/8/10/2008r2/2012r2/2016 x64. Отдельно отмечается возможность запуска гостевых систем FreeBSD/i386 на 64-разрядных хост-системах, поддержка процессоров AMD c аппаратными расширениями SVM и AMD-V, поддержка команды DSM TRIM для виртуальных дисков AHCI, поддержка графического режима (эмуляция VGA, framebuffer, мыши, клавиатуры, XHCI USB с применением сервера VNC для доступа к экрану гостевой системы); В Xen добавлена поддержка запуска гостевых систем FreeBSD/amd64 в режиме PVH, который комбинирует элементы режимов паравиртуализации (PV) и полной виртуализации (HVM). Проведена оптимизация производительности драйвера netfront и добавлена поддержка unmapped IO в драйверы blkfront, virtio_blk и virtio_scsi; В jail добавлена поддержка монтирования linprocfs и linsysfs; В jail добавлена возможность по разделению SYSV IPC примитивов, что дает возможность иметь в каждом jail независимую область SYSV IPC; Включён по умолчанию режим sandbox-изоляции OpenSSH; Для хэширования паролей в функции crypt по умолчанию задействован алгоритм SHA512; Реализация IPsec расширена поддержкой аппаратных и программных режимов AES; При помощи Capsicum обеспечен сброс привилегий утилиты ping; Усилена защита от переполнения стека; В механизм управления ресурсами RCTL добавлена возможность ограничения пропускной способности операций с файловой системой. Поддерживается ограничение полосы пропускания чтения/записи (байт в секунду) и интенсивности операций ввода/вывода (число операций чтения/записи в секунду). Также представлен новый механизм придерживания запуска процессов в условиях превышения лимита; Обеспечена возможность использования DRM/KMS-драйверов AMD Radeon при запуске 32-разрядных приложений на 64-разрядных хостах; Для звуковых адаптеров с интерфейсом USB добавлена поддержка более 8 звуковых каналов на PCM-поток; В установщик bsdinstall добавлен модуль для настройки беспроводных адаптеров; В редактор разделов из состава bsdinstall и в утилиту sade добавлена родная поддержка ZFS. Установка GPT+BIOS+GELI через bsdinstall/zfsboot теперь производится с привлечением GELIBOOT, что позволяет создавать ZFS Boot Environment с ZFS-пулами, зашифрованными при помощи GELI; В состав включен демон zfsd, обеспечивающий управление запасными дисками (hotspare) и заменой дисков; В gpart добавлена поддержка схем компоновки разделов disklabel64, apple-boot, apple-hfs и apple-ufs, а также GPT-разделов с атрибутом lenovofix; Удалена поддержка протокола IPX; В newsyslog.conf обеспечено включение настроек, разнесённых по отдельным файлам в /etc/newsyslog.conf.d/ и /usr/local/etc/newsyslog.conf.d/; В утилитах ps и top добавлена возможность фильтрации вывода по идентификатору или имени jail-окружения (флаг -J); Во freebsd-update добавлена защита от загрузки обновления в ситуации незавершения установки прошлого обновления; В подсистеме rc добавлена возможность размещения настроек в файлах ${LOCALBASE}/etc/rc.conf.d/ (LOCALBASE по умолчанию указывает на /usr/local).