Отсоединение USB-устройств после спящего режима оказалось вызвано ошибкой в USB-стеке Linux

Ситуация с отсоединением от шины устройств с интерфейсом USB 2.0 после возврата из спящего режима до сих пор списывалось на проблемы в аппаратной реализации средств управления питанием дешёвых USB-устройств. Проблему пытались решить через занесение устройств в чёрные списки и много критиковали низкое качество дешёвого оборудования. Сара Шарп (Sarah Sharp), разработавшая стек USB 3.0 для ядра Linux, пришла к выводу, что на самом деле указанные проблемы вызваны неверной интерпретацией спецификаций в реализации USB 2.0-стека в ядре Linux (USB-стек не предоставлял устройству должной задержки для восстановления своего состояния). В настоящее время для решения проблемы уже подготовлен предварительный патч, после применения которого эффект отсоединения USB-устройства при использовании автоматического перевода в спящий режим пропадает. Ошибка проявляется только для контроллеров xHCI и не затрагивает EHCI.