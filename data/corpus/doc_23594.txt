Архитектура социальной сети на базе Ruby on Rails

Перевод статьи про архитектуру социальной сети Ravelry, код которой основан на Ruby on Rails. Проект ежедневно обрабатывает около 10 миллионов запросов. Работу проекта обеспечивают 7 серверов под Gentoo Linux, на которых создано 13 виртуальных Xen окружений. 2 сервера задействованы для MySQL (master+slave, сборка от Percona) и поисковой системы Sphinx, 3 сервера используются для выполнения приложений: 6 Apache Passenger и запущенных экземпляров Ruby. Для кэширования используется Tokyo Cabinet/Tyrant. Запросы проходят через цепочку nginx -> haproxy -> apache + mod_passenger.