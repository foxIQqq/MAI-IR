Выпуск мобильной платформы KDE Plasma Mobile 21.12

Опубликован выпуск мобильной платформы KDE Plasma Mobile 21.12, основанной на мобильной редакции рабочего стола Plasma 5, библиотеках KDE Frameworks 5, телефонном стеке ModemManager и коммуникационном фреймворке Telepathy. Для вывода графики в Plasma Mobile используется композитный сервер kwin_wayland, а для обработки звука применяется PulseAudio. Одновременно подготовлен выпуск набора мобильных приложений Plasma Mobile Gear 21.12, формируемого по аналогии с набором KDE Gear. Для создания интерфейса приложений применяется Qt, набор компонентов Mauikit и фреймворк Kirigami из состава KDE Frameworks, позволяющий создавать универсальные интерфейсы, пригодные для смартфонов, планшетов и ПК. В состав входят такие приложения, как KDE Connect для сопряжения телефона с рабочим столом, просмотрщик документов Okular, музыкальный проигрыватель VVave, просмоторщики изображений Koko и Pix, система ведения заметок buho, календарь-планировщик calindori, файловый менеджер Index, менеджер приложений Discover, программа для отправки SMS Spacebar, адресная книга plasma-phonebook, интерфейс для осуществления телефонных вызовов plasma-dialer, браузер plasma-angelfish и мессенджер Spectral. В новой версии: Связанные с телефонией функции, такие как осуществление звонков, передача данных через сотового оператора и отправка SMS, переведены с изначально применяемого стека oFono на ModemManager, который интегрируется с сетевым конфигуратором NetworkManager, в то время как oFono завязан на конфигуратор ConnMan. ConnMan продолжает использоваться в проектах Ubuntu Touch и Sailfish, сопровождающих для него собственные наборы патчей. NetworkManager оказался более предпочтителен для KDE Plasma Mobile, так как уже используется в KDE Plasma (а также в GNOME и Phosh). Кроме того, в отличие от oFono проект ModemManager активно развивается и в него регулярно переносится поддержка новых устройств, в то время как oFono зависит от серии внешних патчей. В ModemManager также имеется более качественная и стабильная поддержка модемов, используемых в устройствах Pinephone и OnePlus 6. Ранее миграции мешала привязка к oFono использовавшегося в KDE Plasma Mobile системного окружения Halium, но после решения прекратить в Plasma Mobile поддержку Halium это перестало быть сдерживающим фактором. В виртуальной клавиатуре Maliit налажен вызов вариантов клавиатуры, специфичных для вводимых данных, например, в числовых полях показывается вариант клавиатуры для ввода цифр. Также улучшено поведение, связанное с условиями показа клавиатуры (в каких условиях показывать, а в каких - нет). Решены проблемы с подключением к телефону внешних экранов, приводившие к выделению в KWin лишней видеопамяти и сбоям на смартфоне Pinephone. К эскизам запущенных приложений прикреплена новая кнопка, при помощи которой можно переместить приложение на внешний экран. В рамках цикла разработки следующего выпуска реализована концепция первичного вывода (Primary Output), позволяющего управлять на какой из экранов будет обеспечиваться вывод по умолчанию. С практической стороны данная возможность позволит создавать полноценные рабочие окружения при подключении внешнего экрана, клавиатуры и мыши, а также даст возможность использовать на внешних экранах классический рабочий стол KDE Plasma. Переработана реализация интерфейса быстрой настройки верхней панели. Появилась возможность подключения расширений и добавления собственных настроек, а также вызова виджета часов при клике на метке часов в панели. Добавлена быстрая настройка для перехода в режим полёта. Индикатор подключения к мобильной сети переработан для использования ModemManager. Раскладка элементов на верхней панели адаптирована для экранов с мёртвой областью для камеры. Реализована возможность перемещения нижней панели задач вбок для экономии вертикального пространства в ландшафтном режиме. Интегрирована поддержка протокола xdg-activation, позволяющего передать фокус между разными поверхностями первого уровня. Например, при помощи xdg-activation один интерфейс для запуска приложений может передать фокус другому интерфейсу или одно приложение может переключить фокус на другое. При помощи xdg-activation реализована более качественная анимация при запуске приложений, выключении экрана и повороте изображения. Во фреймворке Kirigami, позволяющем создавать универсальные интерфейсы для мобильных и настольных систем, реализован компонент NavigationTabBar, позволяющий размещать элементы навигации в нижней панели. Компонент построен на основе нижних навигационных блоков, применяемых в интерфейсе набора номера и часах, и уже адаптирован для таких приложений, как Elisa, Discover, Tokodon и Kasts. В приложении для просмотра прогноза погоды переделана реализация динамических визуализаций и изменено поведение при переключении местоположения. Например, визуализация дождя на телефоне Pinephone теперь может отображаться с частотой 30 кадров в секунду вместо 5. Из мобильного варианта интерфейса полностью исключена боковая панель. В просмотрщике изображений Koko предложен мобильный вариант нижней навигационной панели, упрощающей управление с телефона. Добавлена новая обзорная страница, включающая все ранее показанные изображения и предоставляющая возможность фильтрации по местоположению, дате и сетевым каталогам. Предложен новый диалог "Share", применяемый для отправки изображений. Во встроенном редакторе изображений добавлена функция изменения размера и улучшена операция кадрирования. Кроме того, в Koko улучшена отрисовка файлов SVG и обеспечена цветовая коррекция на системах X11. В web-браузере Angelfish появилась кнопка для очистки истории посещений, улучшена интеграция с виртуальной клавиатурой, добавлено всплывающее окно для игнорирования ошибок установки защищённых соединений. В реализацию блокировщика рекламы добавлена поддержка косметических фильтров (для скрытия элементов на странице). Переделан эмулятор терминала QMLKonsole, в котором появилась поддержка вкладок и кнопка управления показом виртуальной клавиатуры. В часах KClock блок настроек перемещён из панели навигации в заголовочное меню. Навигационная панель переведена на виджет NavigationTabBar. Изменено поведение при выводе уведомлений о срабатывании будильника. Обеспечено автоматическое закрытие фонового процесса KClockd через 30 секунд неактивности, если не запущена программа KClock, не выставлен будильник и не используется таймер. Значительно расширены возможности программы для прослушивания подкастов Kasts. Добавлена поддержка разделов с информацией о разных эпизодах, упоминаемых в RSS и MP3-тегах. Настройки разделены на отдельные категории. Глобальное меню заменено на нижнюю панель и контекстное меню в верхней панели. Обеспечена сортировка подписок с учётом непрослушанных эпизодов. На странице эпизодов предложен единый список, вместо разделения на вкладки. Значительно ускорены операции добавления и обновления подписок, которые в некоторых ситуации стали выполняться до 10 раз быстрее. Добавлена возможность синхронизации информации о подписках и прослушиваемых эпизодах через сервис gpodder.net или приложение nextcloud-gpodder. В Mastodon-клиенте Tokodon улучшена реализация боковой панели в интерфейсе, которая теперь показывается только при наличии необходимого экранного пространства и отображает аватары учётных записей. Добавлена поддержка проверки правописания и реализованы базовые средства управления учётными записями. Продолжена модернизация календаря-планировщике Kalendar. В Spacebar, программе для приёма и отправки SMS, появилась поддержка MMS-сообщений. Приложение переведено с API oFono на ModemManager. Добавлена возможность настройки цвета и размера шрифта для сообщений участников чата. Добавлена функция удаления отдельных сообщений и повторной отправки недоставленных сообщений. Интерфейс для осуществления телефонных вызовов Dialer переведён с API oFono на ModemManager. Приложение разделено на два компонента - графический интерфейс и фоновый сервис. В состав включена программа для обмена сообщениями NeoChat (форк программы Spectral, переписанный с использованием фреймворка Kirigami для создания интерфейса и библиотеки libQuotient для поддержки протокола Matrix).