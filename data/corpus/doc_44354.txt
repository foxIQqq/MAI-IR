Тестирование Firefox 47-beta и Firefox Developer Edition 48 с поддержкой WebExtensions

Firefox 47 перешёл на стадию бета-тестирования, что ознаменовало прекращение формирования базовой функциональности и сосредоточение всего внимания на выявлении ошибок и контроле качества. Одновременно сформирован выпуск Firefox Developer Edition 48, который заменил собой aurora-ветку, в рамках которой проводится оценка готовности тех или иных новшеств для последующего бета-выпуска. Загрузить бета-выпуск можно на данной странице, а Firefox Developer Edition здесь. Релиз Firefox 47 намечен на 7 июня, а Firefox 48 на 2 августа. Улучшения, представленные в бета-версии Firefox 47: Реализована возможность автоматического преобразования устаревших блоков показа видео, завязанных на применении проигрывателя на базе технологии Adobe Flash и ссылающихся на YouTube. Речь ведётся об ещё встречающихся на некоторых сайтах вставках видео в формате "embed", которые могут быть обработаны только при помощи Flash. Данные блоки на лету преобразуются в современный код на основе iframe, обеспечивающий показ видео с использованием HTML5-тега "Video" и формата WebM. Конвертация работает только при отсутствии установленного Flash-плагина. Добавлена поддержка потокового шифра ChaCha20 и алгоритма аутентификации сообщений (MAC) Poly1305, разработанные Дэниелом Бернштейном (Daniel J. Bernstein), Таней Ланге (Tanja Lange) и Питером Швабе (Peter Schwabe). ChaCha20 и Poly1305 можно рассматривать, как более быстрые и безопасные аналоги AES-256-CTR и HMAC, программная реализация которых позволяет добиться фиксированного времени выполнения без задействования специальной аппаратной поддержки. На платформах Windows и OS X реализована возможность загрузки проприетарного закрытого CDM-модуля (Content Decryption Module) Widevine, который будет использоваться для декодирования медиаконтента, защищённого авторскими правами, вместо ранее предлагаемого CDM-модуля Primetime от компании Adobe. Widevine даёт возможность просматривать защищённый контент без установки NPAPI-плагинов и предоставляет прозрачную поддержку работы с сервисами потокового вещания, требующими наличия плагина Silverlight для воспроизведения видео; Для пользователей мощных компьютеров включён по умолчанию видеокодек VP9; Выполнен сброс настройки browser.sessionstore.restore_on_demand в значение по умолчанию (true), чтобы избежать проблем с производительностью в многопроцессном режиме (e10s); Внесена порция изменений, влияющих на совместимость с дополнениями. Например, из состава удалена библиотека FUEL (Firefox User Extension Library), что приведёт к невозможности работы связанных с ней дополнений, которые следует переписать с использованием Add-on SDK. Кроме того, прекращена поддержка URL about:customizing, блокирована возможность создания ссылок на "view-source:", изменён механизм загрузки gDevTools.jsm, удалено свойство вкладок visibleLabel и удалено событие TabLabelModified; Добавлен инструмент для просмотра открытых вкладок, синхронизированных между настольным браузером и мобильной версией Firefox; Из инструментов для разработчиков удалён режим трёхмерной визуализации для анализа страниц (Tilt), при котором узлы DOM наглядно разделяются на слои. Доступные в Tilt возможности вынесены во внешнее дополнение; Расширена поддержка развиваемого для разработки браузерных дополнений API WebExtensions, совместимого с API для Chrome и идущего на смену XUL API. Из новых возможностей API отмечается реализация компонентов commands для привязки к нажатиям клавиш, и downloads для загрузки файлов и управления процессом загрузки. Расширены API webRequest, windows и i18n. Доведён до полноценного вида API tabs. Добавлена новая утилита web-ext для запуска, тестирования и подписывания дополнений из командной строки; Добавлен отладочный режим about:debugging для просмотра и отладки любых обработчиков Service Workers и симуляции отправки сервером push-уведомлений с целью тестирования приложений с поддержкой API Web Push; Новый инструмент для разработчиков, позволяющий запустить зарегистрированный Service Worker; В Storage Inspector добавлена поддержка фильтрации вывода в таблице и возможность оценки содержимого кэша, что полезно для отладки Service Worker; Проведена оптимизация внешнего вида панели инструментов и полностью переработана светлая тема оформления инструментов для разработки; Панель инструментов для мониторинга сети перемещена в верхнюю часть экрана; Представлен интерфейс инспектирования всплывающих окон (popup); Добавлен инструмент для отладки причин возможных утечек памяти, показывающий что мешает сборщику мусора освободить память для выбранного узла; Поддержка многострочного ввода в web-консоли; Возможность оценки информации о производительности через интерфейс about:performance. В about:performance также можно отключить встроенные дополнения, которые не отображаются в штатном менеджере дополнений, такие как Firefox Hello и Pocket. В API WebCrypto добавлена поддержка цифровых подписей RSA-PSS. В PBKDF2 добавлена поддержка хэшей SHA-2; Возможность отключения кэширования открытых по HTTPS страниц при навигации кнопками Вперёд/Назад; Увеличена плавность панорамирования и масштабирования web-контента; Для объектов TextTrack реализована возможность обработки событий cuechange; В режиме Responsive Design Mode добавлена возможность определения собственных значений User Agent; Улучшения в версии для платформы Android: Переработано оформление; В блок расширенных настроек добавлена возможность отключения загрузки web-шрифтов для сокращения трафика; Обеспечен вывод системного уведомления с обзором ключевых улучшений в обновлении браузера; Настройка "открыть несколько ссылок" ("Open multiple links") в секци Customize переименована в "очередь вкладок" ("Tab Queue"); Прекращена поддержка Android web runtime (WebRT); Для длинных URL в адресной строке обеспечен показ только основного доменного имени с целью предотвращения фишинга; Из адресной строки Awesomebar удалён показ favicon для предотвращения спуфинга HTTPS; Улучшения, ожидаемые в Firefox 48: API WebExtensions, представляющий новый метод разработки совместимых с браузером Chrome дополнений, основанный на использовании штатных web-технологий, признан стабильным и готовым для разработки дополнений. Из добавленных в Firefox 48 улучшений отмечаяется улучшение средств для вывода предупреждений, работы с закладками, управления загрузками, обработки уведомлений, управления окнами и вкладками. Добавлены API Options v2, webNavigation и webRequest. Улучшена совместимость с дополнениями, написанными для Chrome (Chrome-дополнения можно вызывать в отладочном режиме без изменения манифеста). Добавлена поддержка WebExtensions в версии Firefox для платформы Android. Значительно расширены возможности по отладке дополнений WebExtensions, например, появилась поддержка отладки фоновых скриптов обработки контента и фоновых страниц. Для ограничения местоположения загружаемых ресурсов в WebExtensions задействован Content Security Policy, который по умолчанию допускает использование только идущих в комплекте с дополнением скриптов или внешних скриптов с ресурса, явно определённого в файле-манифесте. Выполнение встроенного в HTML JavaScript-кода и запуск через eval в дополнениях по умолчанию запрещены. Усилена защита от загрузки вредоносных файлов; На платформе Linux для отрисовки текста по умолчанию задействована библиотека Skia; Обеспечена поддержка настройки меню и панели Firefox без мыши, только через клавиатурные комбинации. Добавлена поддержка табуляции для перехода между элементами и Shift+F10 для вызова контекстного меню; Добавлена возможность использования в инструментах для разработчиков темы оформления в стиле Firebug; В интерфейс about:debugging добавлена возможность перезагрузки дополнения; В отладочной web-консоли добавлена возможность детализации отображаемых сетевых запросов; В режиме инспектирования анимации обеспечена поддержка визуализации анимации, выполняемой через псевдоэлементы "::before" и "::after"; Во встроенном отладчике расширены возможности по пошаговой отладки последней строки функций; Интерфейс консоли ошибок (Error Console) переведён в разряд устаревших, вместо него следует использовать браузерную консоль (Browser Console); Удалён код для интеграции с сервисом автодозвона на платформе Windows (Windows Remote Access Service Autodial); Представлено новое оформление панели с результатами запроса в адресной строке. Панель теперь отображается на всю ширину экрана; Добавлена возможность вертикального размещения текста, используя CSS-свойство "text-combine-upright: all"; Добавлено свойство Document.scrollingElement, позволяющее узнать какие атрибуты элемента отражают состояние прокрутки; В Web Workers обеспечена возможность использования Web Crypto API; Улучшения в версии для платформы Android: Контент, связанный с выводом звука, теперь обрабатывается через Android Audio Service; Для часто используемых сайтов обеспечен вывод предложения по их добавлению на домашний экран; Поддержка установки дополнений, написанных с использованием API WebExtensions; Для Android M добавлена поддержка плавающей панели выделения текста; Улучшены элементы управления воспроизведением видео с сенсорных экранов.