Следующий выпуск DragonFly BSD будет поставляться с начальной реализацией ФС HAMMER2

Мэтью Диллон (Matthew Dillon), лидер проекта DragonFly BSD, объявил о поставке в следующем выпуске DragonFly BSD начальной реализации файловой системы HAMMER2, которая развивается проектом с 2012 года. Следующий релиз DragonFly BSD намечен на сентябрь. Поддержка HAMMER2 будет включена в базовую поставку, но без опции для настройки в инсталляторе, так как будет позиционироваться как экспериментальная ФС. Отмечается, что в первом выпуске HAMMER2 работа будет ограничена только средствами работы на одном разделе (single-image), без использования функций кластеризации (multi-master зеркалирование с распределением данных на несколько хостов) и работы на нескольких разделах, которые пока не готовы. Также не доведена до конца поддержка квот и хранения данных в зашифрованном виде. При этом в первом выпуске HAMMER2 будет поддерживаться установка на загрузочные разделы, дедупликация данных (dedup) на лету, хранение данных в сжатом виде и поддержка монтирования снапшотов, доступных на запись. Возможно, к релизу разработчики успеют довести до должного уровня функцию зеркалирования данных на несколько разделов. В анонсе отмечается, что физическая структура ФС заслуживает особой гордости, благодаря высоким показателям эффективности структур хранения. Например, по сравнению с HAMMER1, гранулированность распределения блоков снижена с 2 Мб до 16 Кб с возможностью дополнительного разбиения блока для обеспечения минимального размера выделяемой области данных в 1 Кб. Содержимое мелких файлов (до 512 байт включительно) и директорий, в которых размещено до 4 элементов (без учёта "." и ".."), интегрируется непосредственно в состав inode. Размер указателя на блоки (blockrefs) увеличен до 128 байт, но данное увеличение оправдано такими дополнительными функциями, как встраивание хэшей содержимого директорий, кодирование параметров имён файлов до 64-символов (для параметров имён длиннее 64 символов выделяется отдельный блок), возможность хранения хэшей проверки дедупликации и криптохэшей, размером до 512 бит.