Обновление оконного менеджера xfwm4 4.14.3

Опубликован выпуск оконного менеджера xfwm4 4.14.3, применяемого в пользовательском окружении Xfce для обеспечения отображения окон на экране, декорирования окон и организации их перемещения, закрытия и изменения их размера. В новом выпуске добавлена поддержка X11-расширения XRes (X-Resource), которое задействовано для запроса у X-сервера информации о PID приложения, запущенного с использованием механизмов sandbox-изоляции. Поддержка XRes решает проблему с принудительным завершением зависших клиентских процессов, PID которых невозможно узнать через свойство _NET_WM_PID, так как оно отражает идентификатор процесса внутри изолированного окружения, который может отличаться от идентификатора в глобальном пространстве имён. В новом выпуске также устранена уязвимость, которая может привести к обращению к уже освобождённой области памяти (use-after-free) и записи данных вне выделенного буфера при обработке строк с настройками. Кроме того, в xfwm4 4.14.3 добавлены дополнительные обработчики ошибок XError, упрощающие диагностику проблем, связанных с запросами XConfigureWindow. У некоторых пользователей после обновления до версии 4.14.3 стали наблюдаться крахи при попытке запуска во FreeBSD, возникающие судя по всему из-за новой привязки к libXres. Также в xfwm4 всплыла проблема с определением видеокарт AMD при включении X11-расширения XPresent для синхронизации вывода с кадровым гасящим импульсом (vblank). XPresent включался при наличии в названии карты маски AMD, в то время как некоторые карты именуются "Radeon" без упоминания слова "AMD" (например, "Radeon RX 570"). Для данных карт включался обработчик vblank на базе "glx", который заметно отстаёт по производительности. Например, при использовании glx воспроизведение 4K видео в mpv нагружает GPU на 70% в режиме высокого качества и 50% в режиме низкого качества, в то время как нагрузка при использовании XPresent снижается до 50% и 30% соответственно, что существенно влияет на энергопотребление и производительность. Проблема пока остаётся неисправленной. Для принудительного включения XPresent можно добавить настройку /general/vblank_mode в xfconf: xfconf-query -c xfwm4 -p /general/vblank_mode -t string -s "xpresent" --create