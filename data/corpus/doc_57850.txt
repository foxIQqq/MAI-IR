Google отложил на 2024 год прекращение поддержки второй версии манифеста Chrome

Компания Google скорректировала планы по прекращению поддержки второй версии манифеста Chrome, определяющего возможности и ресурсы, доступные для дополнений, написанных с использованием API WebExtensions. Изначально, поддержку второй версии манифеста планировалось прекратить в январе 2023 года. Новый план подразумевает сдвиг конечной даты отключения дополнений, использующих вторую версию манифеста, на январь 2024 года. В январе 2023 года, в тестовых выпусках Chrome 112 (Canary, Dev, Beta) будет проведён эксперимент по временному отключению поддержки второй версии манифеста. В июне 2023 года эксперимент будет продолжен и поддержка второй версии манифеста возможно будет отключена в стабильной версии Chrome 115. Помимо этого, в январе 2023 года третья версия манифеста станет обязательной для попадание в число рекомендуемых дополнений в каталоге Chrome Web Store. В июне 2023 года в Chrome Web Store будет запрещена публикация публично доступных дополнений со второй версией манифеста, а ранее добавленные публичные дополнения будут переведены в категорию "Unlisted". В январе 2024 года дополнения со второй версией манифеста будут удалены из Chrome Web Store, а в из браузера будет убрана настройка, позволяющая вернуть поддержку старого манифеста. Изначально третья версия манифеста стала объектом критики из-за нарушения работы многих дополнений для блокирования нежелательного контента и обеспечения безопасности, но постепенно дополнения начинают переводить на новый манифест, например, недавно были подготовлены варианты блокировщиков рекламы uBlock Origin и AdGuard, переведённые на новый манифест. Третья версия манифеста разработана в рамках инициативы по усилению безопасности, конфиденциальности и производительности дополнений. Главной целью внесённых изменений является упрощение создания безопасных и высокопроизводительных дополнений, и усложнение возможности создания небезопасных и медленных дополнений. Основное недовольство третьей версией манифеста связано с переводом в режим только для чтения API webRequest, позволявшего подключать собственные обработчики, имеющие полный доступ к сетевым запросам и способные на лету модифицировать трафик. Указанный API применяется в uBlock Origin, AdGuard и многих других дополнениях для блокирования нежелательного контента и обеспечения безопасности. Вместо API webRequest в третьей версии манифеста предложен ограниченный по своим возможностям API declarativeNetRequest, предоставляющий доступ к встроенному движку для фильтрации, самостоятельно обрабатывающему правила блокировки, не разрешающему использовать собственные алгоритмы фильтрации и не позволяющему задавать сложные правила, перекрывающие друг друга в зависимости от условий. За три года обсуждений предстоящей третьей версии манифеста компания Google учла многие пожелания сообщества и расширила изначально предоставленный API declarativeNetRequest возможностями, востребованными в существующих дополнениях. Например, Google добавил в API declarativeNetRequest поддержку использования нескольких статических наборов правил, фильтрации по регулярным выражениям, модификации HTTP-заголовков, динамического изменения и добавления правил, удаления и замены параметров запросов, фильтрации с привязкой ко вкладкам и создания специфичных для определённых сеансов наборов правил.