Выпуск пакетного менеджера APT 2.2

Подготовлен релиз инструментария для управления пакетами APT 2.2 (Advanced Package Tool), который вобрал изменения, накопленные в экспериментальной ветке 2.1. Кроме Debian и производных от него дистрибутивов, форк APT-RPM также применяется в некоторых дистрибутивах на основе пакетного менеджера rpm, таких как PCLinuxOS и ALT Linux. Новый выпуск в ближайшее время будет интегрирован в ветку Debian Unstable и в пакетную базу Ubuntu (в Ubuntu 20.10 использовалась экспериментальная ветка 2.1). Из изменений можно отметить: Добавлена поддержка поэтапных обновлений, которые уже применяются в Ubuntu для ограничения распространения и управления развёртыванием обновлений. Например, поэтапные обновления позволяют распространить обновления для перехода на новый стабильный релиз вначале среди небольшого процента пользователей и через некоторое время в случае отсутствия регрессий распространить обновления до всех остальных пользователей. Реализованы дополнительные шаблоны для выбора пакетов с учётом зависимостей, такие как "?depends" и "?conflicts". Добавлена поддержка поля "Protected", которое пришло на смену полю "Important" и определяет недопустимые для удаления пакеты, которые необходимы для корректной загрузки системы. В команду "update" добавлена опция "--error-on=any", при установке которой ошибка будет выводиться при любом сбое. Метод применения и извлечения патчей rred теперь доступен в форме отдельной программы для обработки файлов pdiff. Код обработчика удаления старых версий ядра (autoremoval) переписан с shell на C++ и теперь исполняется в процессе работы apt, а не при установке пакетов с ядром. Изменение позволяет гарантировать сохранность ядра, загруженного в текущий момент, а не во время установки пакета с наиболее новым ядром. Для избежания переполнения раздела /boot обеспечено сохранение трёх ядер вместо четырёх. Для индексации элементов кэша задействован алгоритм хэширования XXH3 вместо Adler32 или RC32c. Увеличен размер хэш-таблицы. Утилита apt-key запланирована для удаления во втором квартале 2022 года.