Вторая бета-версия мобильной платформы Android 14

Компания Google представила вторую бета-версию открытой мобильной платформы Android 14. Релиз Android 14 ожидается в третьем квартале 2023 года. Для оценки новых возможностей платформы предложена программа предварительного тестирования. Сборки прошивки подготовлены для смартфонов Pixel 7/7 Pro, Pixel 6/6a/6 Pro, Pixel 5/5a 5G и Pixel 4a (5G), а также некоторых моделей устройств iQOO, Lenovo, Nothing, OnePlus, OPPO, Realme, Tecno, vivo и Xiaomi. Изменения в Android 14 Beta 2 по сравнению с первой бета-версией: В основной состав платформы включено хранилище Health Connect, ранее поставляемое в форме отдельного пакета через Google Play. Health Connect обеспечивает централизованное хранение данных с фитнес-браслетов и прочих устройств, имеющих отношение к здоровью пользователя, и организует совместный доступ разных приложений к данным о здоровье. Доступ к настройкам Health Connect теперь будет предоставляться через штатный конфигуратор платформы, например, через настройки конфиденциальности можно управлять к каким именно данным о здоровье могут получить доступ определённые приложения. Кроме того, в Health Connect добавлена поддержка сохранения сведений о пройденном в процессе тренировки маршруте (пользователь определяет промежуток времени для которого будет сохранён список путевых точек). Маршрут может быть визуализирован на карте и при желании передан для обработки другим приложениям, после явного подтверждения операции пользователем. Расширены средства подтверждения доступа к информации о местоположении. В диалог с запросом подтверждения доступа к местоположению добавлен новый раздел с информацией о том когда приложению осуществляется передача данных о местоположении (доступ запрещён, разрешить только один раз и разрешить при каждом выполнении приложения) и подробностями, где можно получить дополнительные сведения о доступе к передаваемым данным. Реализован периодический (раз в месяц) вывод уведомлений с предупреждением об изменении приложениями, которым предоставлен доступ к местоположению, методов передачи данных третьим лицам (например, выводится, когда приложение начинает использовать данные о местоположении при показе рекламы). Ограничены типы приложений, которым разрешён вывод полноэкранных уведомлений при блокировке экрана. Подобные уведомления рассчитаны на привлечение внимания к информации, требующей немедленной реакции, такой как поступление входящего звонка или срабатывание будильника, поэтому полномочия для вывода таких уведомлений теперь будут ограничены приложениями для осуществления звонков и вывода предупреждающих сигналов. Улучшено управление анимацией, сигнализирующей о переходе между разными экранами (листами) в приложении при скользящем жесте, сдвигающем содержимое. Добавлены новые компоненты для анимации переключения нижних и боковых экранов, а также вызова поиска. Добавлен API для создания собственных переходных эффектов в приложении. Появившаяся в прошлой ветке поддержка записи видео с высоким динамическим диапазоном яркости (HDR) расширена возможностями по получению с камеры дополнительной информации, дающей возможность сохранения изображений в формате "Ultra HDR", в котором для кодирования цветности используется 10 бит на канал. Формат Ultra HDR полностью совместим с JPEG, что позволяет приложениям без внесения изменений работать с HDR-изображениями и если необходимо отображать их с использованием обычного диапазона яркости. Вывод в режиме HDR обеспечивается автоматически силами платформы в случае активации поддержки HDR в манифесте приложения или при вызове Window.setColorMode. Для отдельной отрисовки Ultra HDR при помощи OpenGL или Vulkan может применяться класс Gainmap. Обновлён набор расширений для камеры (Camera Extensions), в котором предоставлена возможность использования более длительно выполняемых алгоритмов, требующих интенсивных вычислений для обработки изображений, например, для повышения качества снимков, сделанных при низкой освещённости. Добавлены функции для прогнозирования задержек на обработку снимка, получения сведений о прогрессе обработки и быстрого получения чернового варианта снимка до завершения подготовки финального изображения. Реализован более оптимизированный и энергоэффективный режим предпросмотра SurfaceView. Во время использования расширений обеспечена поддержка касания для наведения фокуса и масштабирования. Предоставлена поддержка использования встроенных в камеру возможностей по масштабированию и кадрированию передаваемых RAW-изображений. Для проводных наушников, подключаемых через USB, добавлена возможность применения звуковых форматов без потери качества (lossless). В API добавлен класс AudioMixerAttributes, позволяющий напрямую отправлять звук на устройство, без микширования, корректировки громкости и обработки эффектов. В графическом API реализован класс Mesh, позволяющий создавать свои варианты полигональной сетки с вершинными и фрагментными шейдерами, написанными на языке AGSL. Добавлена возможность аппаратного ускорения отрисовки в буфер, реализованная через класс HardwareBufferRenderer. В среду разработки Android Studio встроен интеллектуальный помощник Studio Bot, способный генерировать типовые конструкции при написании кода на основе текстового описания задачи, помогающий в исправлении ошибок и дающий рекомендации о приёмах разработки для Android. Кроме бота в новой версии предложен режим Live Edit, позволяющий сразу отражать вносимые в код и интерфейс изменения в тестируемом приложении, запущенном на устройстве.