Релиз Firefox 66

Представлен релиз web-браузера Firefox 66, а также мобильной версии Firefox 66 для платформы Android. Кроме того, сформировано обновление ветки с длительным сроком поддержки 60.6.0. В ближайшее время на стадию бета-тестирования перейдёт ветка Firefox 67, релиз которой намечен на 15 мая. Основные новшества: Добавлена поддержка механизма "Scroll Anchoring", при котором позиция прокрутки привязывается к конкретному месту на странице и не меняется при отображении новых элементов в вышележащей области. Изменение позволит исключить ситуации, когда прокрутка сразу после открытия страницы приводит к постепенному смещению позиции и необходимости вновь и вновь прокручивать содержимое по мере загрузки изображений и внешних вставок (например, ранее возникали казусы, когда в момент клика на нужную ссылку завершалась загрузка расположенного выше рекламного баннера, контент смещался и клик попадал на баннер); Включена блокировка автоматического воспроизведения мультимедийного контента со звуком (использование свойства autoplay без выставления флага mute или отсутствия звуковой дорожки). Воспроизведение звука теперь будет начинаться только при явном действии пользователя, например, при нажатии на кнопку или клике на видеоролике. Для включения режима блокировки в настройки добавлена специальная опция: При открытии страницы, автоматически воспроизводящей звук, пользователю будет выводится уведомление о блокировке. В уведомлении будет предоставлена опция, позволяющая добавить текущий сайт в белый список, разрешающий автоматическое воспроизведение звука. Статус блокировки также можно изменить через блок настроек, отображаемый в контекстном меню сайта. Предложенный блокировщик позволит противостоять злоупотреблениям на некоторых сайтах, автоматически показывающих видеорекламу со звуком, которая создаёт неудобства и отвлекает пользователя при просмотре страниц. На этой неделе режим будет активирован по умолчанию для 25% пользователей, браузера, а на следующей неделе охват будет увеличен до 50%. Если не будет выявлено существенных проблем, ещё через неделю блокировщик будет активирован для всех пользователей; В меню "V", появляющееся при открытии большого числа вкладок, добавлена кнопка "Search Tabs" для поиска открытых вкладок и упрощения навигации при наличии большого числа открытых страниц. Реализация кнопки базируется на уже давно существующей, но малоизвестной возможности, позволяющей выполнять поиск по заголовкам страниц во вкладках при помощи ключа "%" в адресной строке (например, после набора в адресной строке "% Free" будет показан список вкладок в заголовках которых присутствует слово "Free"). При нажатии кнопки "Search Tabs" осуществляется смена фокуса на адресную строку и ввод символа "%" с приглашением продолжить ввод; Изменено оформление страницы новой вкладки в приватном режиме, в том числе добавлена строка поиска; В сборках для Linux по умолчанию включено декорирование окон на стороне клиента (CSD, Client Side Decoration), при котором заголовок и рамки окна отрисовываются не оконным менеджером, а самим приложением. Применение CSD позволяет приблизить интерфейс Firefox к оформлению штатных приложений GNOME, а именно перенести панели вкладок в заголовок окна и реализовать скрытые рамки. Начиная с Firefox 60 данная возможность была реализована в виде опции. Отключить CSD можно через флажок в левом нижнем углу раздела кастомизации; Изменено оформление и увеличена информативность страниц, выдаваемых при проблемах с сертификатами защищённого соединения. Реализован вывод отдельного предупреждения (MOZILLA_PKIX_ERROR_MITM_DETECTED) при выявлении подмены сертификатов и перехвата трафика HTTPS из-за активности антивирусов, вредоносного ПО или вмешательства провайдера в трафик; С 4 до 8 увеличено число запускаемых браузером процессов-обработчиков, каждый из которых обслуживает несколько вкладок (браузер также запускает отдельные процессы для WebExtension и интерфейса). Увеличение до 8 числа процессов-обработчиков приведёт к повышению производительности и устойчивости к сбоям, но суммарное потребление памяти увеличится приблизительно на 6%. В дальнейшем планируется реализация режима строгой изоляции сайтов, в котором страницы разных сайтов всегда размещаются в памяти разных процессов, в каждом из которых применяется свой sandbox, а разделение будет осуществляться не по вкладкам, а по доменам, что позволит дополнительно изолировать содержимое внешних скриптов и iframe-блоков; На странице открытия новой вкладки проводятся эксперименты c выводом дополнительного информационного контента, рекомендованного сервисом Pocket, а также с изменением раскладки размещения информации на странице. Например, у некоторых пользователей будет изменён размер блоков и число рекомендаций, предложены новые тематические секции (Здоровье, Наука, Технологии и Развлечения). Для отказа от участия в эксперименте следует в верхнем правом углу страницы новой вкладки отключить опцию "Content Discovery"; Проведена работа по повышению производительности и удобства работы с дополнениями. Для хранения настроек дополнений теперь используется БД IndexedDB, вместо разбора отдельных JSON-файлов, что позволяет заметно повысить скорость работы и снизить потребление памяти в дополнениях, активно читающих настройки (например, заметно возросла производительность Adblock Plus). Разработчикам дополнений для использование IndexedDB не требуется вносить изменения в свои продукты, штатный API storage.local() автоматически переведён на новый бэкенд; Изменено оформление интерфейса для привязки горячих клавиш к функциям дополнений (вызывается через контекстное меню в about:addons); В инструментах для web-разработчиков обеспечена возможность использования режима инспектирования при остановке отладчика; Обеспечено корректное отображение HTML и тестовых файлов в кодировке UTF-8, открываемых с локального диска с использованием схемы URL "file:" (теперь не обязательно выставление в фале meta charset="utf-8" или изменение кодировки в меню); Реализован модификатор "i" для сравнения атрибутов CSS с учётом регистра символов. Например, "a[href*="insensitive" i] {...}"; Добавлены отдельные CSS-свойства, упрощающие доступ к типовым частям составных CSS-свойств: padding-block, padding-inline, margin-block, margin-inline, inset, inset-block, inset-inline, border-block-color, border-block-style, border-block-width, border-inline-color, border-inline-style, border-inline-width, border-block, border-inline, border-start-start-radius, border-start-end-radius, border-end-start-radius и border-end-end-radius; Добавлены новые медиа-запросы overflow-inline и overflow-block, позволяющие протестировать как устройство вывода обрабатывает (обрезает или допускает прокрутку) выходящий за пределы блока контент; В CSS-функции calc() добавлена возможность манипуляции величинами в процентах при вычислении ширины ячеек и столбцов таблиц. Например, "width: calc(100%/7)"; Стандартизированы и избавлены от префикса "-moz-" ключевые слова min-content и max-content, которые можно применять для установки предпочтительного и минимального размера в свойствах width, height, flex-basis, min-width, max-width, min-height, max-height, min-block-size, min-inline-size, max-block-size, max-inline-size, block-size и inline-size; Реализован метод HTMLSlotElement.assignedElements() для вывода последовательности элементов, прикреплённых к указанному слоту; Реализован метод TextEncoder.encodeInto() для перекодирования USV-строки и помещения результата в объект unit8Array; Добавлена поддержка свойств: InputEvent.inputType (тип изменения редактируемого контента - добавление, удаление, форматирование), Window.event и Event.returnValue; Значение HTTP-заголовка "Accept" изменено по умолчанию на "*/*" (было - "text/html, application/xhtml+xml, application/xml; q=0.9, */*; q=0.8"); В Linux решена проблема с зависанием браузера при загрузке файлов; В Windows 10 добавлена поддержка механизма Windows Hello для аутентификации на сайтах (при помощи API Web Authentication) без пароля с использованием отпечатка пальца, распознавания лица или USB-токена с поддержкой спецификации FIDO2; На платформе macOS добавлена начальная поддержка сенсорных панелей (Touch Bar); В версии для Android добавлена возможность открытия файлов с внешних носителей, например, с SD-карты. Кроме новшеств и исправления ошибок в Firefox 66 устранена серия уязвимостей, из которых 26 (CVE-2019-9792, CVE-2019-9791, CVE-2019-9790, 13 объединены под CVE-2019-9789 и 10 под CVE-2019-9788) помечены как критические, т.е. могут привести к выполнению кода злоумышленника при открытии специально оформленных страниц.