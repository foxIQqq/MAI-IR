Выпуск nginx 1.11.6

Доступен новый выпуск основной ветки высокопроизводительного HTTP-сервера nginx 1.11.6, в котором реализованы следующие изменения: Формат переменных '$ssl_client_s_dn' и '$ssl_client_i_dn' приведён в соответствие с RFC 2253 (RFC 4514). Значения в старом формате доступны через переменные '$ssl_client_s_dn_legacy' и '$ssl_client_i_dn_legacy'; Временные файлы в каталоге кэша теперь располагаются не в отдельном подкаталоге, а в том же подкаталоге, что и остальные файлы; В почтовом прокси-сервере добавлена поддержка метода аутентификации EXTERNAL; В модуле ngx_http_image_filter_module добавлена поддержка формата WebP; В директиве 'proxy_method' добавлена поддержка переменных; В модуле ngx_http_v2_module появилась директива "http2_max_requests", определяющая максимальное число запросов, которые можно сделать по одному соединению при использовании протокола HTTP/2; Добавлены директивы 'proxy_cache_max_range_offset', 'fastcgi_cache_max_range_offset', 'scgi_cache_max_range_offset' и 'uwsgi_cache_max_range_offset'; Исправлена ошибка при которой в случае использования протокола HTTP/2 плавное завершение старых рабочих процессов могло занимать бесконечное время; Исправлены ошибки в модуле ngx_http_mp4_module; Исправлена ошибка, проявляющаяся появлением в логе сообщений "ignore long locked inactive cache entry" при проксировании WebSocket-соединений и включённом кэшировании; Исправлена ошибка: если согласование защищённого соединения с бэкендом завершалось таймаутом, nginx ничего не писал в лог и возвращал ответ с кодом 502 вместо 504.