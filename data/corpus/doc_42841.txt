Статус развития графического стека и Wayland в Fedora Linux

Кристиан Шаллер (Christian Schaller), возглавляющий группу по развитию десктоп-систем в компании Red Hat, опубликовал отчёт о состоянии разработки в Fedora Linux рабочего стола на базе Wayland. В Fedora Workstation 23 поддержку Wayland планируется довести до стабильного и полнофункционального состояния, пригодного для повседневного пользования. При этом ранее планируемый переход по умолчанию на Wayland в Fedora 23 решено отложить до выпуска Fedora 24, чтобы протестировать полноценный рабочий стол на базе Wayland в качестве опции как минимум в течении одного релиза, перед переключением на Wayland по умолчанию. Отмечается, что большая часть работы уже проделана, но при разработке оказалось справедливо правило, что оставшиеся 10% функциональности несут в себе 90% работы. В частности, несмотря на то, что основные вещи уже работают, ещё требуется устранить множество мелких недоработок. Из основных проблем отмечаются реализация нормального позиционирования меню, решить важные для работы игр вопросы с блокировками, обеспечить поддержку кинетической прокрутки в GTK+, проделать дополнительную работу по устранению всех зависимостей от компонентов X11, добавить поддержку планшетов, управляющих жестов и экранных клавиатур. Из решённых задач выделяется готовность поддержки режима multi-DPI для сеансов Wayland, обеспечивающего автоматическое масштабирование для нужного DPI при перемещении окон между HiDPI-экраном и подключенным к ноутбуку обычным монитором. Примечательно, что данную задачу удалось достаточно просто решить в Wayland, но она потребовала значительных усилий для работы на системах с X-сервером. В области адаптации пользовательских приложений для работы поверх Wayland без привлечения прослойки XWayland отмечается значительный прогресс в Firefox и LibreOffice. GTK3-версия LibreOffice 5 будет поставляться в Fedora Workstation 23 в качестве опции и будет включать экспериментальную поддержку Wayland. В Fedora 24 GTK3-версия LibreOffice, в которой ожидается полноценная поддержка Wayland, будет задействована по умолчанию. Для Firefox также уже доступен базовый GTK3-порт, способный работать с Wayland, но пока имеющий множество требующих исправления недоработок, мешающих нормальной работе с браузером. Из общих вопросов модернизации графического стека упоминается: Работа по предоставлению возможности одновременного использования разных реализаций OpenGL (механизм GL Dispatch, который позволит использовать реализации OpenGL из MESA и проприетарных драйверов, переключаясь между ними при смене GPU на системах с Optimus); Обеспечение поддержки систем с несколькими GPU (полноценная поддержка ноутбуков с Optimus); Избавление 3D-стека от жестких привязок к GLX для обеспечения корректной поддержки EGL (реализация EGL Device и EGLStreams, поверх которых можно будет запустить Wayland-приложения).