Huawei анонсировал операционную систему Harmony

На конференции разработчиков Huawei была официально представлена ОС Hongmeng (Harmony), которая, по утверждению представителей компании, работает быстрей и является более безопасной, чем Android. Новая ОС в основном предназначена для портативных устройств и продуктов интернета вещей (IoT), таких как дисплеи, носимые устройства, умные колонки и инфо-системы автомобилей. HarmonyOS находится в разработке начиная с 2017 года и представляет собой микроядерную ОС, подходящую для любых сценариев применения и любых видов устройств, но рассматриваемую скорее как конкурент Fuchsia/Zircon. Платформа будет опубликована в исходных текстах как открытый проект (Huawei уже развивает открытый LiteOS для IoT-устройств) для чего планируется создать отдельный некоммерческий фонд и сформировать сообщество. Huawei считает, что Android не так хорош для мобильных устройств из-за излишне большого объёма кода, устаревшего планировщика процессов и вопросов фрагментации платформы. В HarmonyOS не предоставляется доступ пользователей на уровне root, а микроядро изолированно от внешних устройств. Ядро системы верифицировано на уровне формальной логики/математики для минимизации риска появления уязвимостей. Утверждается, что применены методы, которые обычно используются при разработке критически важных систем в таких областях, как авиация и космонавтика, и позволяют добиться соответствия уровню защищённости EAL 5+. Микроядро реализует только планировщик и IPC, а всё остальное вынесено в системные сервисы, большая часть которых выполняется в пространстве пользователя. В качестве планировщика задач предлагается минимизирующий задержки детерминистический движок распределения ресурсов (Deterministic Latency Engine), анализирующий нагрузку в режиме реального времени и использующий методы предсказания поведения приложений. По сравнению с другими системами планировщик позволяет добиться сокращения задержек на 25.7% и снизить флуктуации задержек на 55.6%. Для обеспечения связи между микроядром и внешними сервисами ядра, такими как ФС, сетевой стек, драйверы и подсистема запуска приложений, применяется IPC, который по заявлениям компании работает в пять раз быстрее, чем IPC в Zircon, и в три раза быстрее, чем IPC в QNX. Вместо обычно применяемого четырёхуровневого стека протоколов для уменьшения накладных расходов в Harmony задействована упрощённая одноуровневая модель на основе распределённой виртуальной шины, обеспечивающей взаимодействие с оборудованием, таким как экраны, камеры, звуковые платы и т.п. Для сборки приложения применяется собственный компилятор Arc, который поддерживает код на языках C, C++, Java, JavaScript и Kotlin. Система отделена от оборудования и даёт возможность разработчикам создавать приложения, которые можно использовать на различных категориях устройств без создания отдельных пакетов. В дальнейшем планируется предоставить интегрированную среду разработки для создания приложений для различных классов устройств, таких как телевизоры, смартфоны, умные часы, автомобильные информационные системы и т.п. Среда будет автоматически адаптировать приложения для разных экранов, элементов управления и методов взаимодействия с пользователем. Harmony напрямую не совместима с Android, но, по заявлению представителей Huawei, для адаптации существующих Android приложений потребуются минимальные изменения. Компания Huawei также обещает, что в будущем в ОС Harmony будет встроена поддержка приложений для Android и будут предоставлена поддержка приложений на HTML5. Что касается использования платформы Android, то компания заявила, что пока продолжит её использование для смартфонов и планшетов, но в случае потери доступа к лицензии на Android, начнёт применение Harmony незамедлительно (утверждается, что для миграции потребуется 1-2 дня). Кроме того, Huawei развивает продукты AppGallery и Huawei Mobile Services, которые позиционируются как альтернатива Google Play и сервисов/приложений Google.