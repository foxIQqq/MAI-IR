Выпуск Samba 4.6.0

После шести месяцев разработки состоялся релиз Samba 4.6.0, продолживший развитие ветки Samba 4 с полноценной реализацией контроллера домена и сервиса Active Directory, совместимого с реализацией Windows 2000 и способного обслуживать все поддерживаемые Microsoft версии Windows-клиентов, в том числе Windows 10. Samba 4 является многофункциональным серверным продуктом, предоставляющим также реализацию файлового сервера, сервиса печати и сервера идентификации (winbind). Ключевые изменения в Samba 4.6: Добавлена возможность настройки типа шифрования для клиента Kerberos. Через параметр "kerberos encryption types" можно определить какие настройки шифрования указать в генерируемом Samba файле krb5.conf. Выставляемое по умолчанию значение "all" определяет старое поведение и разрешает использовать все доступные алгоритмы в процессе согласования соединения. Значение "strong" разрешает использовать для Active Directory только надёжные методы на основе алгоритма AES, а значение "legacy" допускает применение устаревших алгоритмов, таких как RC4-HMAC-MD5; Появилась поддержка загрузки драйверов принтеров для клиентов на базе Windows 10. Сервером печати Samba в качестве операционной системы по умолчанию выдаётся Windows Server 2003 R2 SP2; В smb.conf расширены возможности параметра "inherit owner", управляющего функцией smbd, которая выставляет владельцем файлов владельца родительской директории, в которой эти файлы размещены. Ранее поддерживаемые значения "yes" и "no" дополнены значением "unix only", при котором функция наследования владельца применяется только к Unix-владельцам файла и не затрагивает владельцев на основе SID в Windows NT ACL; Возможность использования в сервере Netlogon нескольких процессов-обработчиков, обеспечивающих должное масштабирование на многоядерных системах. Сервер Netlogon является частью контроллера домена Active Directory и отвечает за обработку запросов аутентификации NTLM от членов домена, включая файловые серверы, web-серверы с аутентификацией NTLM и шлюзы 802.1x. Новый многопроцессный сервис NETLOGON теперь обслуживает запросы на отдельном TCP-порту, вместо общего порта, совместно используемого RPC-сервисами; Добавлена опция 'rpc server port' позволяющая переопределить сетевой порт для RPC-сервисов, отличных от Netlogon. По умолчанию выбирается первый свободный TCP-порт в диапазоне выше 1024; Увеличена производительность репликации DRSUAPI и LDAP-операций c базой LDB, хранящей дерево каталогов Active Directory. Особенно заметно возросла скорость обработки большого числа объектов и связанных атрибутов. Например, операции поиска в LDB по непроиндексированным данным теперь выполняются на 20% быстрее; Повышена надёжность работы команды "samba-tool dns", в которой усилена проверка корректности DNS-имён и добавлена поддержка удаления записей в ситуациях, в которых ранее удаление было невозможно; Представлена порция улучшений в компоненте CTDB, отвечающем за работу кластерных конфигураций: Добавлена новая команда "ctdb event" для взаимодействия со скриптами обработки событий. Подкоманда "ctdb event status" пришла на смену "ctdb scriptstatus", "ctdb event run" заменила "ctdb eventscript", "ctdb event script enable" - "ctdb enablescript", "ctdb event script disable" - "ctdb disablescript". Для показа всех скриптов добавлена подкоманда "ctdb event script list". Вместо CTDB-бэкенда для выполнения скриптов обработки событий представлен отдельный фоновый процесс ctdbd_eventd; Добавлена утилита mvxattr для рекурсивного переименования расширенных атрибутов для всех файлов и директорий относительно указанного пути; Объявлен устаревшим модуль idmap_hash, который будет удалён в одном из будущих выпусков.