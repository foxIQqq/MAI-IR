Релиз OpenBSD 4.8

Команда разработчиков OpenBSD сообщила о выходе версии 4.8. В отличие от предыдущего релиза, выпуск OpenBSD 4.8 практически не содержит серьёзных изменений, которые могли бы привести к возникновению неудобств при обновлении, но зато имеет немало приятных добавлений. Ниже следует неполный список основных новшеств по сравнению с версией 4.7. Полная версия списка для желающих доступна на сайте. Следует учесть, что OpenBSD-CURRENT (ветка разработки, которая со временем станет OpenBSD 4.9) содержит ряд изменений, который не успели попасть в релиз; изменения в ней будут освещены отдельно в традиционном ежемесячном отчёте. Спящий режим (а главное — возвращение из него) работает на большей части компьютеров с графическими адаптерами на базе Intel и ATI. Машины с графическими чипами NVIDIA, к сожалению, не могут «проснуться». Так же в релизе не решён ряд проблем с CardBus/PCMCIA. Изменения в сервисах маршрутизации: Управляющие сокеты bgpd(8) теперь указываются в конфигурационном файле; параметры командной строки -s и -r убраны. MPLS VPN третьего уровня теперь могут терминироваться на OpenBSD при помощи mpe(4), ldpd(8) и bgpd(8). bgpd теперь поддерживает neighbor-as в фильтрующих директивах AS, а также два новых фильтра: max-as-seq и max-as-len, для ограничения длины отдельной AS или общего набора AS в маршруте. Так же исправлены мультипротокольные дампы MRT и добавлена поддержка 4-байтных номеров AS. Также теперь поддерживается ведение нескольких FIB, которые можно связывать с RIB для дальнейшего распространения. А для пиров, изменяющих RIB, теперь доступно мягкое переконфигурирование (softreconfig). В bgplg(8) и bgplgsh(8) (BGP looking glass) добавлена поддержка ping6 и traceroute6. В ospfd(8) улучшены процесс «обрезки» (pruning) LSA и повторное чтение конфигурационного файла. ospf6d теперь поддерживает LSA с размером больше, чем MTU, лучше работает с другими реализациями OSPFv3, может распространять маршрут по умолчанию и корректно обрабатывает IPv6-префиксы, анонсированные соседями на том же линке, но не сконфигурированные на самом роутере. Множество улучшений в ldpd(8), включая более корректный подсчёт хопов. Общие улучшения в сетевом стеке: Улучшена поддержка MPLS в ifconfig(8) и route(8), а теперь поддерживает расширенные ICMP-заголовки, позволяющие выводить MPLS-метки. Так же поддержка MPLS добавлена в gre(4) и gif(4). Поддержка RFC 4941 добавлена в IPv6-стек и может быть включена посредством ifconfig(8). Так же ifconfig(8) теперь позволяет генерировать MAC-адрес случайным образом. enc(4) и ipsec(4), dhcpd(8) и dhclient(8) теперь поддерживают домены маршрутизации. Для реализации QinQ VLAN (802.1ad) теперь есть специальный псевдоинтерфейс svlan(4) (от Service VLAN). Улучшения в SCSI-стеке: Завершён переезд на новый SCSI-стек. В числе прочего уменьшено потребление памяти драйверами устройств, улучшен механизм распределения ресурсов шины, убрано множество ставших излишними вызовов splbio/splx. Исправлены проблемы с отключением cd(4). Убраны излишние задержки перед началом проигрывания DVD. Множество других исправлений, в том числе убран ряд проблем с USB-устройствами. Заметные улучшения в процессе установки: disklabel(8) теперь позволяет настраивать автоматически сгенерированную разбивку диска (при помощи нового ключа командной строки, -R). В файле /etc/pkg.conf записывается адрес зеркала, использовавшегося при установке новой или обновлении имеющейся системы. Новые сервисы: iked(8) IKEv2-демон, дополняющий isakmpd(8) (поддерживает только IKEv1). ldapd(8) LDAP-сервер, лёгкая альтернатива OpenLDAP. Улучшения в OpenSSH в связи с нехваткой места можно посмотреть отдельно. Новые драйверы: acpisony(4) Драйвер для спецкнопок на ноутбуках Sony. itherm(4) Драйвер для датчиков Intel 3400. owctr(4) Драйвер для счётчиков производства 1-Wire. pgs(4) Драйвер для «кнопки программиста» (Programmer's Switch), имеющейся на некоторых PowerMac. Если sysctl-параметр ddb.console выставлен в 1, то при нажатии этой кнопки будет осуществлён вход в ddb(4). se(4) Драйвер для сетевых Ethernet-карт 10/100/1000 на базе SiS190. uguru(4) Драйвер для датчиков температуры, напряжения и оборотов кулеров производства ABIT. Были убраны за ненадобностью драйверы ss(4) и usscanner(4), так как предоставляемые ими специальные интерфейсы практически никем не поддерживаются. Вместо этого рекомендуется использовать универсальный комплекс SANE, доступный для установки в пакетах. Улучшения в существующих драйверах: agp(4)/inteldrm(4) Добавлена поддержка встроенных в Intel Core i3/i5 графических решений (Ironlake). em(4) Добавлена поддержка чипсетов Intel 82576 (волокно) и 82577/82578 (PCH). envy(4) Добавлена поддержка M-audio Audiophile 192k. Улучшена работа со многими трекпадами. re(4). Добавлена поддержка чипсетов Realtek RTL8168E. uaudio(4) Добавлена поддержка 24-битного звука и воспроизведения в режиме USB 2.0. udl(4) Добавлена поддержка режима 800x480. wsbio(4) Добавлена поддержка чипов Winbond/Nuvoton W83627DHG-P. Была поднята надёжность работы ряда HBA-драйверов, в том числе ciss(4), mpi(4) и mpii(4). Исправлен ряд проблем с блокировками драйвере NTFS. Поддержка NTFS пока что по-прежнему считается экспериментальной, однако ряд разработчиков сейчас, насколько известно, занимается её кардинальным улучшением. Для руководств в форматах man(7) и mdoc(7) в базовой системе и Xenocara теперь используется mandoc(1) вместо GNU nroff. Это заметно повысило скорость сборки этих руководств, уменьшило системные требования и, местами, улучшило качество форматирования. Прочие изменения: Появилась начальная поддержка UTF-8 в libc и консоли. В библиотеку crypto(3) из состава OpenSSL добавлена поддержка AES-NI. В aucat(1) добавлена поддержка MIDI-управления в не-серверном режиме, включая перемещение внутри .wav-файлов. Также появилась возможность записи итогового выводимого звукового потока. Уровень же задержек сведён к минимуму, до одного блока, для нужд соответствующих программ. Платформы amd64, i386, hppa, sparc64, socppc и macppc переведены на сборку с использованием GCC 4.2.1. Улучшена работа с уникальными идентификаторами (UID) дисков, включая поддержку UID в disklabel(8). wsconsctl(8) теперь поддерживает управление несколькими клавиатурами, мышами и дисплеями. fdisk(8) теперь выравнивает раздел с OpenBSD на границу двух блоков для лучшей производительности на устройствах с размером блока 4096 байт. Небольшие улучшения также имели место быть в dhcpd(8), ftp(1), getdirentries(2), libevent, libpthread, lint(1), make(1), man(1), newfs(8), nfsd(8), od(1), sendbug(1), snmpd(8), smtpd(8), В составе базовой системы поставляется следующее ПО сторонних разработчиков: Xenocara на базе X.Org 7.5 с xserver 1.8 (+ патчи), freetype 2.3.12, fontconfig 2.8.0, Mesa 7.8.2, xterm 258 и так далее. Gcc 2.95.3 (+ патчи), 3.3.5 (+ патчи) и 4.2.1 (+патчи). Perl 5.10.1 (+ патчи). Улучшенная и защищённая версия Apache 1.3, с поддержкой SSL/TLS и DSO. OpenSSL 0.9.8k (+ патчи). Groff 1.15. Sendmail 8.14.3, с libmilter. Bind 9.4.2-P2 (+ патчи). Lynx 2.8.6rel.5 с поддержкой HTTPS и IPv6 (+ патчи). Sudo 1.7.2. Ncurses 5.7. Последняя версия KAME IPv6. Heimdal 0.7.2 (+ патчи). Arla 0.35.7. Binutils 2.15 (+ патчи). Gdb 6.3 (+ патчи). Разработчики OpenBSD благодарят всех, кто оказал поддержку в подготовке этого релиза. Тем, кто хочет помочь проекту, могут заказать диски или сделать добровольное пожертвование. Ваши средства помогут разработке OpenBSD и связанных проектов.