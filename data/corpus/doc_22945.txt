Файловая система Tux3 на пути к включению в состав Linux ядра

Daniel Phillips в списке рассылки разработчиков Linux ядра сообщил о возобновлении, после некоторого затишья, активной работы над файловой системой Tux3 и намерении начать процесс включения данной ФС в состав Linux ядра, после доведения функциональности Tux3 до финального состояния. Основной недоработкой Tux3, мешавшей использованию в реальных условиях, было отсутствие поддержки атомарных коммитов. В настоящий момент, после нескольких месяцев работы, данная возможность находится на стадии завершения. В ближайшее время разработчики рассчитывают перейти к этапу окончательной проверки и приведения в порядок кода, после чего будет инициирован запрос на включение ФС в состав ядра. Файловая система Tux3 относится к классу версионных, т.е. позволяющих вернуться к состоянию ФС в определенный момент времени в прошлом, что достигается благодаря тому, что данные при внесении изменений не переписываются, а копируются на новое место. В отличие от файловых систем Btrfs и ZFS, Tux3 базируется на модели использования одного указателя на екстент (single-pointer-per-extent) и вместо классического "copy on write" дизайна, при котором версия состояния затрагивает все дерево ФС, применен альтернативный подход, когда информация о версиях привязана к конечным узлам дерева. Представленные решения позволили добиться сокращения объема мета-данных и значительного упрощения "физического" дизайна за счет переноса функциональности на "логический" уровень, что упрощает проведение таких операций как проверка целостности и восстановление после сбоя. В настоящий момент Tux3 демонстрирует более низкое потребление памяти и CPU по сравнению с Btrfs и ZFS, что открывает двери для использования Tux3 в окружении с ограниченными ресурсами, например, на сотовых телефонах и встраиваемых системах. Базовые характеристики: Ведение версий индивидуальных файлов, директорий и ФС в целом; Возможность репликации на удаленную систему отдельных файлов, директорий или целиком ФС; Поддержка записи данных для каждого версионного среза (снапшота); 2^60 - максимальный размер файла и раздела; 2^48 - максимальное число версий (снапшотов) и инод; Возможность изменение размера ФС на лету, динамическое создание инод; Использование нового метода атомарного обновления данных; Новый высоконадежный индекс директорий (PHTree); Btree лог изменений для оптимизации скорости работы fsck.