Разработчики Chromium добавили Nouveau в чёрный список проблемных драйверов

Из-за проблем с отрисовкой, наблюдаемых при работе WebGL-приложений, разработчики проекта Chromium поместили свободный драйвер Nouveau в чёрный список, отключающий использование любых операций ускорения графических операций на стороне GPU. Для полноценного использования Chromium 71 с видеокартами NVIDIA теперь требуется либо использование проприетарного драйвера, либо запуск браузера с опцией "--ignore-gpu-blacklist" на свой страх и риск. Наиболее остро прекращение поддержки свободного драйвера Nouveau в Chromium отразится на пользователях дистрибутива Ubuntu, в котором данный драйвер применяется по умолчанию, в том числе в LTS-выпуске Ubuntu 18.04. По словам разработчиков Chromium у них нет ресурсов на тестирование всех сочетаний драйвера с GPU и дистрибутивами, а также на проведение работы по выявлению и исправлению ошибок в драйверах. В итоге драйвер добавлен в чёрный список, так как на первое место ставится стабильность и безопасность браузера, а поддержка ускорения на стороне GPU относится к второстепенным задачам. При этом разработчики Chromium готовы откорректировать чёрный список для выборочной блокировки, если разработчики драйвера предоставят более детальные сведения о версиях и устройствах, на которых проявляются проблемы или подтверждена стабильная работа. Разработчики Nouveau подтвердили наличие сбоев при выполнении тестового набора WebGL CTS, но отметили, что сбои в основном всплывают в синтетических тестах и отдельных нетипичных ситуациях. Разработчики Nouveau лично не испытывают проблем при использовании данного драйвера вместе с Chromium и считают неприемлемым помещение драйвера в чёрный список. Более того, кроме синтетических тестов WebGL CTS, им не удалось повторить проявление серьёзных проблем, за исключением давно известных ошибок, наблюдаемых только при применении сильно устаревших версий Mesа. По мнению разработчиков, в большинстве случаев проблем со стабильностью при использовании актуальных версий Mesa не возникает. В любом случае решение о переходе на другой драйвер или отключении ускорения должен принимать пользователь, а не производитель браузера, тем более, что драйвер был оценен Canonical как достаточно стабильный для поставки в LTS-выпуске Ubuntu. В качестве одного из выходов из сложившейся ситуации было предложено перейти к установке в Nouveau случайного значения в поле GL_VENDOR, чтобы обойти блокировку. В ответ, некоторые пользователи предложили провести работу по устранению проблем при прохождении тестов WebGL CTS, детально проанализировать сообщения о наблюдаемых пользователями крахах, провести fuzzing-тестирование для выявления ошибок и привлечь пользователей Chromium для выявления проблем со стабильностью. Разработчики Nouveau указали, что, конечно, подобный план позволит повысить качество драйвера, но его реализация требует огромных ресурсов, которых у проекта в настоящее время нет, поэтому работа пока остаётся сосредоточена на устранении известных воспроизводимых проблем, таких как сбой при прохождении теста max-texture-size, а не общих замечаний о низкой стабильности, не подтверждённых конкретными повторяемыми отчётами с детальной информацией об окружении, в котором проявляется проблема.