Выпуск графического редактора GIMP 2.10.22

Представлен выпуск графического редактора GIMP 2.10.22, в котором продолжено оттачивание функциональности и повышение стабильности ветки 2.10. Для установки доступен пакет в формате flatpak (пакет в формате snap пока не обновлён). Кроме исправления ошибок в GIMP 2.10.22 представлены следующие улучшения: Добавлена поддержка импорта и экспорта изображений формате AVIF (AV1 Image Format), в котором задействованы технологии внутрикадрового сжатия из формата кодирования видео AV1. Контейнер для распространения сжатых данных в AVIF полностью аналогичен HEIF. AVIF поддерживает как изображения в HDR (High Dynamic Range) и цветовом пространстве Wide-gamut, так и в стандартном динамическом диапазоне (SDR). AVIF претендует на роль формата для эффективного хранения изображений в Web и поддерживается в Chrome, Opera и Firefox (при включении image.avif.enabled в about:config). Улучшена поддержка формата изображений HEIC, который использует тот же формат контейнеров HEIF, но применяет методы сжатия HEVC (H.265), поддерживает операции кадрирования без перекодирования и позволяет хранить в одном файле несколько снимков или видео. Добавлена возможность импорта и экспорта контейнеров HEIF (для AVIF и HEIC) с 10 и 12 битами на цветовой канал, а также импорта метаданных и цветовых профилей NCLX. Улучшен плагин для чтения изображений в формате PSP (Paint Shop Pro), в котором появилась поддержка растровых слоёв из файлов в шестой версии формата PSP, а также индексированных изображений, 16-разрядных палитр и изображений в оттенках серого. Режимы наложения в PSP теперь правильно отрисовываются, благодаря улучшенному преобразованию в режимы слоёв GIMP. Повышена надёжность импорта и улучшена совместимость с файлами, некорректно записанными из сторонних приложений, например, с указанием пустых имён слоёв. Расширены возможности экспорта многослойных изображений в формат TIFF. Добавлена поддержка кадрирования слоёв по границам экспортируемого изображения, которая включается при помощи новой опции в диалоге экспорта. При экспорте изображений BMP обеспечено включение цветовых масок с информацией о цветовом пространстве. При импорте файлов в формате DDS улучшена поддержка файлов с некорректными флагами в заголовке, связанными с режимами сжатия (если информацию о методе сжатия удалось определить на основе других флагов). Улучшено определение файлов JPEG и WebP. При экспорте XPM исключено добавление слоя None, в случае неиспользования прозрачности. Улучшена обработка метаданных Exif с информацией об ориентации изображения. В прошлых выпусках при открытии изображения с тегом Orientation выводился запрос о выполнении поворота, в случае отклонения которого тег оставлялся и после сохранения отредактированного изображения. В новом выпуске данный тег очищается независимо от того, был выбран поворот или нет, т.е. в других просмотрщиках изображение будет показывается именно таким, каким отображалось в GIMP перед сохранением. Во все фильтры, реализованные на базе фреймворка GEGL (Generic Graphics Library), добавлена опция "Sample merged", позволяющая изменить поведение при определении цвета точки на холсте инструментом "пипетка". Раньше информация о цвете определялась только из текущего слоя, а при включении новой опции будет выбран видимый цвет с учётом наложения и скрытия слоёв. Режим "Sample merged" также включён по умолчанию в базовом инструменте "пипетка" (Color Picker), так как у захват цвета в привязке к активному слою приводил к введению в заблуждение новичков (вернуть старое поведение можно через специальный флажок). В плагин Spyrogimp, предназначенный для рисования в стиле спирографа, добавлена поддержка изображений в оттенках серого и увеличен размер срезов состояния в буфере отмены изменений. Улучшен алгоритм преобразования изображений в форматы с индексированной палитрой. Так как выбор цвета производится на основе оценки среднего значения, возникали проблемы с сохранением чистого белого и чёрного цветов. Теперь данные цвета обрабатываются отдельно и цвета, близкие к белому и чёрному, привязываются к чистым белому и чёрному, если исходное изображение включало чисто белый или черный цвет. Инструмент выделения переднего плана (Foreground Select) переведён по умолчанию на новый движок Matting Levin, который в большинстве ситуаций работает лучше. Добавлена возможность ведения лога производительности, дополняемого при выполнения каждой операции (при крахе лог не теряется). Режим отключён по умолчанию и может быть активирован через флаг в диалоге управления логом или через переменную окружения $GIMP_PERFORMANCE_LOG_PROGRESSIVE. Оптимизации в GEGL, использующие OpenCL для ускорения обработки данных, из-за потенциальных проблем со стабильностью отнесены к экспериментальным возможностям и их включение перенесено во вкладку Playground. Более того, сама вкладка Playground теперь по умолчанию скрыта и появляется только при явном запуске GIMP с опцией "--show-playground" или при использовании версий для разработчиков. Добавлена возможность распространения плагинов и документации в форме дополнений к пакету в формате Flatpak. В настоящее время дополнения уже подготовлены для плагинов BIMP, FocusBlur, Fourier, G’MIC, GimpLensfun, LiquidRescale и Resynthesizer (например, последний можно установить командой "flatpak install org.gimp.GIMP.Plugin.Resynthesizer", а для поиска доступных плагинов использовать "flatpak search org.gimp.GIMP.Plugin"). В системе непрерывной интеграции налажена сборка готовых исполняемых файлов версий для разработчиков. Сборки пока формируются только для платформы Windows. В том числе для Windows началось формирование ежедневных сборок (win64, win32) будущей ветки GIMP 3, в которой проведена значительная чистка кодовой базы и выполнен переход на GTK3. Из новшеств, в последнее время добавленных в ветку GIMP 3, отмечается улучшение работы в окружениях на базе Wayland, поддержка выделения с учётом содержимого нескольких слоёв (Multi-layer selection), улучшение API, улучшение привязок для языка Vala, оптимизация для работы на небольших экранах, удаление API, связанных с Python 2, повышение удобства редактора устройств ввода.