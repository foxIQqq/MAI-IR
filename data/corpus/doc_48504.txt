Релиз графического редактора GIMP 2.10

Спустя шесть лет с момента выпуска ветки 2.8.0 представлен первый релиз новой стабильной ветки графического редактора GIMP 2.10.0. Новая ветка примечательна переводом внутренних подсистем на фреймворк обработки изображений GEGL (Generic Graphics Library), поддержкой глубины цвета в 16 и 32 бит на канал, переработанным оформлением интерфейса пользователя, поддержкой форматов OpenEXR, RGBE, WebP и HGTO, предпросмотром применения фильтров на холсте, унификацией инструментов трансформации, задействованием OpenCL для выноса обработки графики на плечи GPU, поддержкой кистей от проекта MyPaint, возможностью многопоточного выполнения операций в GEGL, возможностью просмотра и редактирования метаданных Exif, XMP, IPTC и DICOM, базовой поддержкой HiDPI. Основные улучшения: Переработано оформление интерфейса пользователя и предложен новый набор легковесных тем оформления с монохромным набором пиктограмм. Возможность использования ранее предлагаемого набора цветных пиктограмм сохранена, при этом темы оформления теперь могут устанавливаться отдельно от наборов пиктограмм. Возможно автоматическое увеличение размера пиктограмм на экранах с высокой плотностью пикселей (HiDPI); Повсеместный перевод внутренних подсистем GIMP на фреймворк обработки изображений GEGL (Generic Graphics Library), вместо устаревшего API пиксельной обработки. GEGL предоствляет средства для выполнения операций по недеструктивному редактированию изображений с возможностью обработки больших массивов данных, превышающих размер ОЗУ. Использование GEGL позволило повысить эффективность обработки изображений и добиться увеличения глубины цвета на канал, которая ранее была ограничена 8 битами. Благодаря GEGL в GIMP 2.10 появились такие возможности, как поддержка глубины цвета в 16 и 32 бит на канал (как целочисленные, так и с плавающей точкой), поддержка формата OpenEXR, предпросмотр результата применения фильтров на основном холсте с изображением, высококачественное уменьшение масштаба. Возможность работы с большой глубиной цвета на канал реализована для форматов OpenEXR, PNG, TIFF, PSD и FITS; Реализован режим многопоточной обработки в GEGL, который позволяет организовать распараллеливание операций GIMP с задействованием имеющихся в системе ядер CPU. Для отключения многопоточности в настройках (Preferences/System Resources) можно принудительно выставить ограничение в одно ядро CPU. Кроме того, возможно применение OpenCL для выноса на GPU операций рендеринга и обработки изображений. В ядро GIMP и библиотеки GEGL и babl внесены оптимизации для ускорения отрисовки и вывода информации на экран, которые должны компенсировать замедление отрисовки, наблюдаемое в ветке 2.10 по сравнению с 2.8. Обеспечено выделение в отдельные потоки операций отрисовки, что существенно повысило отзывчивость интерфейса; Поддержка использования любых фильтров GEGL и их повторного запуска из меню со списком недавно используемых фильтров ("Filters/Recently"). В форму GEGL-фильтров переведены инструменты постеризации и обесцвечивания (Posterize и Desaturate), на использование GEGL-буферов переведены фильтры Tile и Pagecurl. В состав включён фильтр Highpass для повышения детализации на фотографиях. Добавлены фильтры вейвлетного разложения (Wavelet Decompose) и плагин Extract Component для извлечения цветовых каналов CMYK K и LAB L* из изображений; Реализована возможность разделённого предпросмотра для фильтров на базе библиотеки GEGL, при котором двигая разделительную полосу можно с одной стороны видеть состояние до применения фильтра, а с другой - после; Возможность использования профилей управления цветом ICC v4, позволяющих обеспечить единую цветопередачу изображений вне зависимости от устройств и приложений, используемых в процессе создания, обработки и печати. Поддержка ICC v4 реализована через интеграцию с библиотекой LittleCMS 2, что также дало возможность решить проблемы с совмещением цветовых пространств при вставке одного изображения в другое. При применении ICC-профилей на основе матриц преобразование изображений между разными цветовыми пространствами реализовано при помощи библиотеки babl, обеспечивающей более высокую производительность. Расширены средства для работы в линейных цветовых пространствах. Добавлена возможность переключения между двумя режимами представления слоёв - линейным (по умолчанию) и перцепционным (ранее предлагаемый вариант). Средства управления цветом интегрированы в различные инструменты GIMP, например, в предпросмотр образцов цвета и градиентов, шаблоны, различные виджеты работы с цветом, инструмент определения цвета и т.п. Изображения в градациях серого теперь тоже являются цветоуправляемыми. Добавлена опция, позволяющая выбрать ICC-профиль для встраивания в изображение, а также представлено новое меню для управления цветопередачей и диалог настройки системы управления цветом. Добавлена опция для выбора режима оптимизации - скорость или качество. Реализована опция для сохранения ICC-профиля в файл. Реализован диалог для просмотра и редактирования метаданных в форматах Exif, XMP, IPTC и DICOM, а также возможность импорта/экспорта метаданных из файлов XMP; Новые и усовершенствованные инструменты: Новый унифицированный инструмент трансформации, объединивший инструменты для вращения, масштабирования, наклона и изменения перспективы. Инструмент позволяет управлять трансформацией прямо на холсте, без вызова дополнительного диалога. Во всех инструментах трансформации по умолчанию отключен показ сетки, а в процессе интерактивной трансформации оригинальный слой теперь скрывается, так как может мешать просмотру результата; Новый инструмент для использования кистей от проекта MyPaint. Кисти MyPaint доступны через привычный встраиваемый в интерфейс диалог управления кистями, поддерживающий теги и предпросмотр; Режим симметричного рисования, доступный через встраиваемый диалог "Symmetry Painting" и позволяющий организовать симметричный вывод во всех инструментах рисования (вертикальное и горизонтальное зеркалирование элементов, круговая симметрия (мандала), мозаичный вывод и т.п.); Новый инструмент деформации изображений (Warp Transform), заменивший собой плагин iWarp и позволяющий интерактивно деформировать части основного изображения без открытия окна предпросмотра. В инструменте присутствует опция для отключения предпросмотра с высоким качеством картинки, который не всегда необходим; Обновлён инструмент заливки градиентом, с которым теперь можно работать без дополнительных диалогов, формируя параметры заливки прямо на холсте. В том числе можно создавать, выбирать, сдвигать, удалять и настраивать точки управления цветом заливки, изменять режимы смешивания и окраски сегментов между точками заливки, создавать промежуточные точки заливки. По умолчанию предлагаемые градиенты теперь можно редактировать. При внесении изменения в градиент, размещённый в системном каталоге, автоматически в локальном каталоге пользователя создаётся копия этого градиента, которая сохраняется для всех сеансов пользователя. Добавлена возможность работы в линейном цветовом пространстве RGB, помимо перцептуального RGB и CIE LAB. Инструмент для работы с градиентами переименован из "Blend tool" в "Gradient tool"; В инструмент выравнивания (Align) добавлена поддержка вертикальных и горизонтальных режимов заливки; В инструменте выделения переднего плана появились средства субпиксельного выделения для решения проблем с выделением сложных объектов, таких как волосы на текстурированном фоне. Добавлены два новых типа масок и обновлён интерфейс пользователя; Новый инструмент "Ручки трансформации" (Handle Transform), предлагающий необычный подход к организации масштабирования, вращения и изменения перспективы через манипуляцию ручками, размещаемыми на холсте; Экспериментальный инструмент деформации по нескольким точкам (N-Point Deformation) - позволяет согнуть объект, сохраняя его естественный вид; Экспериментальный инструмент для бесшовного клонирования (Seamless Clone) - упрощает слияние кусков одного изображения с другим, благодаря сопряжению яркости и цветности вставляемого и исходного изображений; В инструменты Fuzzy Select и Bucket Fill добавлена функция выделения или заполнения со срабатыванием заливки для соседних по диагонали пикселей; Добавлен новый режим проброса (Pass Through) групп слоёв, позволяющий смешивать слои внутри группы непосредственно с нижележащими слоями без создания групповой проекции; Обновлён диалог с параметрами слоя (Layer Attributes), который теперь позиционируется как единый интерфейс для управления всеми атрибутами слоя, включая имя слоя, режим смешивания, смещение, прозрачность, видимость, статус привязки, закрепление и выставленные цветные метки; Для упрощения управления большими проектами с множеством слоёв и групп представлена возможность выставления цветных меток; Доведены до полной готовности средства для применения масок к группам слоёв; Улучшены средства вращения холста - ползунки, полосы прокрутки и диалог навигации теперь адаптируются к изменениям при вращении; Улучшена реализация движка кистей - для растровых кистей теперь кэшируется изначальная жесткость и с целью оптимизации производительности не меняется динамически. Появилась возможность привязки кисти к уровню масштабирования и углу поворота холста; В инструмент выделения добавлена команда "Remove Hole" для включения серии небольших областей, оставшихся непомеченными при автоматическом выделении; В инструменте изменения границ добавлена опция для выбора цвета заливки для пустых областей, появившихся после увеличения размера; Расширено использование цветовых пространств CIE LAB и CIE LCH: Для связанных с цветом диалогов реализован блок выбора цвета на основе LCH, который со временем заменит устаревший блок на базе HSV. В меню Colors добавлен новый фильтр Hue-Chroma, который работает по аналогии с фильтром Hue-Saturation, но только в цветовом пространстве CIE LCH. В инструментах Fuzzy Select и Bucket Fill появилась возможность выбора цветов через CIE-составляющие L, C и H. Инструмент определения цвета (Color Picker) и диалог Sample Points теперь отображают значения цвета пикселей в том числе в представлениях CIE LAB и CIE LCH; Процесс установки масок оптимизирован с учётом потребностей людей, которые используют очень большое число масок в своих проектах. GIMP теперь запоминает последние применённые параметры маски и позволяет быстро создавать, применять и удалять маски при помощи клавиатуры или новой кнопки в диалоге манипуляций со слоями; В диалоге "Select/Border" добавлена возможность выбора стиля границы выделения: жесткий, плавный и переходящий; Улучшение режимов смешивания слоёв. Режим Overlay теперь отличается от режима Soft Light и основан на использовании метода, применяемого в спецификациях PDF и Web API (Compositing and Blending Level 1). При открытии старых файлов XCF для сохранения раскладки будет автоматически применяться режим Soft Light, но для новых слоёв используется режим Overlay. Улучшение средств для "цифровой живописи": рисование на наклонённом или повёрнутом холсте, привязка размера кисти к уровню масштабирования, добавление в инструменты ползунков для регулирования твёрдости и силы нажима; Большая часть кода взаимодействия с холстом перенесена из инструментов, таких как выделение области, в универсальные блоки, которые можно вызывать из разных инструментов. Подобная реструктуризация открывает большие возможности по модернизации методов работы в пользовательском интерфейсе, например, можно будет создавать инструменты, которые смогут использовать возможности других инструментов. Кроме того, фильтрами на базе GEGL теперь можно управлять прямо с холста без дополнительных диалогов; Добавлен фильтр Clip Warning для визуализации на фотографии областей со слишком малой или слишком большой экспозицией, на которых наблюдается пропадание деталей в тёмных или светлых местах; В меню Colors добавлен фильтр "Shadows-Highlights", позволяющий раздельно откорректировать тени и блики. Реализация фильтра создана по мотивам аналогичной функции из программы обработки фотографий Darktable; В фильтрах цветокоррекции по кривым и уровням добавлена возможность переключения между двумя режимами представления слоёв - линейным и перцепционным. В том числе, корректировку по уровням в перцепционном режиме можно применять к линейным изображениям или корректировку по кривым в линейном режиме можно применять к перцепционным изображениям. Аналогичные переключатели добавлены в панель корректировки по гистограммам; Расширен интерфейс настройки, добавлены новые разделы: Playground для управления включением экспериментальных возможностей, и Behaviour для изменения поведения по умолчанию. В раздел Toolbox перемещены средства для показа/скрытия инструментов на панели. Добавлена возможность настройки параметров диалогов по умолчанию ("Preferences/ Interface / Dialog Defaults"). В интерфейс конфигуратора добавлена поддержка вертикальной прокрутки, позволяющая уместить большее число настроек без их дробления на отдельные секции; По аналогии с командой Paste in Place в Inkscape реализована возможность для вставки контента из общего буфера обмена или именованных буферов обмена в то же самое место, т.е. в позицию из которой контент был изначально скопирован, а не по центру видимой области; Диалог подтверждения выхода больше не выводится, если все открытые изображения сохранены или не изменялись; Возобновлена поддержка плагина для отправки изображений через почтовый клиент. Для вызова почтового клиента применяется утилита xdg-email, в качестве опции также поддерживается прямая отправка вложения при помощи sendmail. Добавлена возможность выбора языка для отображения руководства пользователя (Interface > Help System), независимо от применяемой локали (например, когда пользователь хочет видеть интерфейс на английском, а руководство на русском языке); Представлена новая закрепляемая панель Dashboard, содержащая индикаторы для отображения потребления ресурсов, которые можно использовать для оценки состояния после применения тех или иных операций и настроек; Появилась возможность использования программ Darktable и RawTherapee в качестве плагинов для обработки изображений в raw-формате; Переработан код для создания скриншотов, который теперь состоит из фронтэнда и серии бэкендов, учитывающих специфику Windows, macOS, Wayland и X.org. В Linux обеспечена возможность создания скриншотов при помощи Freedesktop API, что позволяет создавать скриншоты в том числе из приложений, изолированных в sandbox-е. В Windows плагин для создания скриншотов адаптирован для многомониторных конфигураций и для обработки экранов программ, в которых используется аппаратное ускорение вывода; Добавлена возможность импорта файлов в формате HGT, в котором НАСА и другие космические агентства распространяют цифровые модели рельефа (Digital Elevation Model). Поддерживаются модели SRTM-1 и SRTM-3, которые импортируются как RGB-изображения в оттенках серого цвета. При желании при помощи фильтра Gradient Map можно раскрасить рельеф по своему усмотрению. Улучшен плагин импорта и экспорта файлов в формате PSD; Код для работы с форматом JPEG 2000 переведён на использование OpenJPEG вместо ранее применяемой устаревшей библиотеки Jasper, что позволило обеспечить возможность импорта изображений JPEG 2000 с любой глубиной цвета и в формате codestream. Изображения с цветовыми пространствами YCbCr и xvYCC будут сконвертированы в sRGB; Расширена поддержка работы в окружениях на базе Wayland. В дополнение к ранее добавленной возможности создания скриншотов в GNOME поверх Wayland, аналогичная возможность обеспечена и для KDE на базе Wayland. В KDE/Wayland также теперь работоспособен виджет для определения цвета точки (Color Picker). В GNOME/Wayland возможности данного виджета пока ограничены окнами GIMP;