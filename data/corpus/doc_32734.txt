Началось распространение FreeBSD 9.0 по зеркалам. Обновление freebsd-update

Началось распространение по зеркалам итоговых установочных образов для FreeBSD 9.0-RELEASE. Новые сборки пока доступны для платформы i386, но в скором времени появятся и для платформ amd64, powerpc, powerpc64, ia64 и sparc64. Официальный анонс релиза ожидается в течение нескольких дней, до этого времени не рекомендуется загружать новую версию, чтобы не создавать лишнюю нагрузку на инфраструктуру проекта во время распространения релиза по зеркалам. С обзором новшеств FreeBSD 9.0 можно познакомиться в тексте анонса первой бета-версии. Одновременно организация FreeBSD Foundation сообщила об успешном достижении намеченного плана по сбору пожертвований в 2011 году. Вместо запланированных 400 тысяч долларов удалось собрать $426,292, но это ещё не итоговая сумма - чеки со сделанными в прошлом году переводами продолжают поступать и финальные данные планируется опубликовать в середине января. Также сообщается о намерении профинансировать в 2012 году два новых проекта: auditdistd и FreeBSD IPv6 Performance Analysis. Подробности о данных проектах будут опубликованы в ближайшее время. До официального релиза стоит отметить публикацию уведомления о необходимости внесения изменений в утилиту freebsd-update, поставляемую в составе прошлых выпусков FreeBSD. При использовании старой утилиты freebsd-update для наложения бинарных обновлений при переходе с веток FreeBSD 7.x и 8.x будет выведена ошибка "...failed an integrity check", связанная с отсутствием поддержки в утилите freebsd-update обработки символов '@' и '%' в именах файлов. Для устранения проблемы можно установить патч, обновить FreeBSD 7.x и 8.x до последнего корректирующего обновления (например, RELENG_8_2, 8.2-RELEASE-p6) или изменить утилиту вручную: sed -i '' -e 's/=_/=%@_/' /usr/sbin/freebsd-update Ниже представлена краткая инструкция по обновлению до версии FreeBSD 9.0-RELEASE с использованием бинарных обновлений. Загружаем обновления: freebsd-update upgrade -r 9.0 Из-за изменения способа оформления релиза FreeBSD возможно появление двух подводных камней: 1. Ядро FreeBSD, которое раньше могло находиться как в /boot/kernel, так и в /boot/GENERIC, теперь должно быть размещено только в /boot/kernel. Если ядро было в /boot/GENERIC то в процессе обновления оно будет удалено. 2. В процессе обновления будет удалено содержимое /usr/src. Устанавливаем обновления ядра: freebsd-update install Перезагружаем систему (перед вторым этапом установки необходимо загрузиться с новым ядром): shutdown -r now Выполняем установку компонентов не связанных с ядром, попутно отвечая на вопросы, касающиеся решения конфликтов при обновлении файлов конфигурации: freebsd-update install После этого шага freebsd-update может предложить пересобрать приложения, установленные из пакетов или портов. После пересборки, если freebsd-update выдал соответствующее предупреждение, нужно запустить freebsd-update ещё раз для очистки старых библиотек. freebsd-update install Перезагружаем систему: shutdown -r now