Разработчики GNOME представили iio-sensor-proxy 1.0 для упрощения доступа к сенсорам ноутбуков

Бастьен Ноcера (Bastien Nocera), разработчик Totem, Rhythmbox и gvfs, входящий в управляющий комитет GNOME Foundation, анонсировал первый выпуск фреймворка iio-sensor-proxy, предназначенного для упрощения работы с различными аппаратными сенсорами, которыми комплектуются современные ноутбуки и планшеты. В основе iio-sensor-proxy лежит демон, который отслеживает состояние шины IIO (Industrial I/O) и транслирует обращение к сенсорам через шину DBus. Доступный для приложений высокоуровневый D-Bus API построен по мотивам программных интерфейсов для работы с сенсорами, предоставляемыми платформами Android и iOS. В настоящее время уже поддерживается работа с акселерометром и датчиком освещённости, ожидается поддержка магнитометра, компаса и датчика приближения. Также планируется реализовать возможность обращения к акселерометру в raw-режиме и провести адаптацию SDL, Firefox и WebKit для использования нового фреймворка. В настоящее время поддержка iio-sensor-proxy уже добавлена в GNOME и будет доступна в ближайшем тестовом выпуске 3.17.2 в форме опции автоматического управления яркостью экрана и возможности адаптации интерфейса к горизонтальной или вертикальной ориентации устройства. Из требуемых для работы iio-sensor-proxy зависимостей отмечаются libgudev и systemd. Фреймворк протестирован на устройствах Lenovo IdeaPad Yoga 13, Microsoft Surface Pro 2, Lenovo Yoga Pro 2, Onda v975w, Dell Venue 8 Pro и Lenovo ThinkPad Twist. Примечательно, что вначале iio-sensor-proxy был создан как заглушка, предоставляющая доступ к сенсорам подсистемы IIO через эмуляцию уже поддерживаемого в GNOME акселерометра планшета WeTab. Но такой подход не оправдал себя, несмотря на обеспечение совместимости с ранее выпущенными версиями GNOME, поэтому iio-sensor-proxy был трансформирован в полноценный фреймворк, предоставляющий DBus API.