Проект Samba 4.0 перешёл на стадию бета-тестирования

После семи лет разработки, за которые было выпущено 5 технологических предварительных выпуска и 21 альфа-версия, анонсирован переход проекта Samba 4 на стадию бета-тестирования. Версия Samba 4.0 предоставляет полноценную реализацию контроллера домена и сервиса Active Directory, совместимых с реализациями в Windows 2000 и более новых версий. Разработчики предупреждают, что несмотря на завершённость стадии наращивая функциональности в проекте еще наблюдаются нерешённые проблемы со стабильностью, которые планируется устранить в процессе бета-тестирования. Поэтому Samba 4 пока не рекомендуется для промышленного внедрения. В дальнейшем новые бета-версии планируется выпускать раз в 2-3 недели. Кандидат в релизы предложено выпустить в конце июля, а финальный релиз можно ждать в конце сентября или в октябре. Параллельно с Samba 4 развивается ветка Samba 3, нацеленная на обеспечение работы в роли клиента, члена домена, файлового сервера (SMB2), сервиса печати и сервера идентификации (winbind). В последние несколько лет проведена большая работа по выделению кода, общего для Samba 3 и Samba 4, в отдельные библиотеки, которые совместно используются обоими проектами. Samba 4 позиционируется как многофункциональный серверный продукт, в который входят все последние достижения сообщества разработчиков Samba, в том числе реализация файлового сервера, развиваемая в ветке Samba 3. Ключевые возможности Samba 4.0-beta: Поддержка серверного окружения для обеспечения работы службы входа пользователей с использованием Active Directory, совместимого с серверами начиная с Windows 2000 и клиентами XP, Windows7 и Mac OS X. Samba 4 поддерживает полный набор операций для обеспечения входа клиентов в домен и подключения доменов. Поддерживается определение групповых политик (Group Policy); Обеспечение работы в роли контроллера домена (DC - Domain Controller), включая встроенные реализации LDAP-сервера и центра распространения ключей Kerberos (KDC - Kerberos Key Distribution Center), а также сервисов входа в стиле Samba3, работающих поверх протокола CIFS. Реализация поддерживает генерацию корректного сертификата Kerberos PAC (Privilege Attribute Certificate) и его включение в выдаваемые билеты Kerberos; Samba 4.0 поставляется с двумя отдельными реализациями файловых серверов. В настоящее время для всех операций по работе с файлами по умолчанию задействована реализация 'smbd', идентичная поддерживаемой в Samba 3.x. Для обеспечения работы файлового сервера в чистом виде, в состав входят и другие компоненты Samba 3.x, такие как nmbd, winbindd и smbpasswd. Реализация предоставляет полную поддержку семантики NTFS; Дополнительно в поставку входит реализация нового экспериментального файлового сервера 'NTVFS', который развивался в рамках цикла разработки Samba 4.0, и оптимизирован для соответствия требованиям контроллера домена Active Directory. NTVFS не только позиционируется для установки при развёртывании контроллера домена Active Directory, но и рассматривается как рабочий пример архитектуры NT-FSA, реализация которой в отдалённой перспективе заменит smbd; Служба DNS, являющаяся частью Active Directory, основана на использовании механизма BIND DLZ, реализованного в версиях DNS-сервера BIND 9.8 и 9.9. Взаимодействие компонентов построено на генерации файлов конфигурации для BIND в процессе работы Samba. Дополнительно развивается альтернативный встроенный DNS-сервер, поддерживающий минимально необходимый набор функций. Данный сервер пока находится в процессе доработки, но в будущем позволит обеспечить работу из коробки, без необходимости установки BIND. Для предоставления сервиса точного времени для Windows-клиентов, обеспечивается интеграция с проектом NTP; Предоставляется новый интерфейс для создания скриптов-дополнений на языке Python. Для подобных скриптов через специальный API предоставляется полный доступ ко внутренностям Samba 4. Например, многие из вспомогательных утилит и часть кода для обеспечения работы контроллера домена написаны на языке Python с использованием данного интерфейса; Для реализации возможного набора функций используется гибкая модель разделения на взаимодействующие между собой процессы. Взаимодействие всех внутренних компонентов производится в асинхронном неблокирующем режиме с использованием новой инфраструктуры удалённого вызова процедур RPC (PIDL). Поддерживаются гибкие средства для обеспечения горизонтального масштабирования c возможностью развёртывания Samba кластеров; Новая гибкая архитектура для ведения баз данных (LDB); Реализация базовой подсистемы обеспечения безопасности (GENSEC).