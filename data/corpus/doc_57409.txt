Новая версия почтового сервера Exim 4.96

Состоялся релиз почтового сервера Exim 4.96, в который внесены накопившиеся исправления и добавлены новые возможности. В соответствии с майским автоматизированным опросом около 800 тысяч почтовых серверов, доля Exim составляет 59.59% (год назад 59.15%), Postfix используется на 33.64% (33.76%) почтовых серверов, Sendmail - 3.55% (3.55%), MailEnable - 1.93% (2.02%), MDaemon - 0.45% (0.56%), Microsoft Exchange - 0.23% (0.30%). Основные изменения: В ACL реализовано новое условие "seen", которое может применяться для проверки ранее происходивших событий, связанных с пользователями и хостами. Новое условие упрощает работу с серыми списками, например, при создании простейшего серого списка для разрешения повторной попытки соединения можно использовать ACL "seen = -5m / key=${sender_host_address}_$local_part@$domain". Добавлен "mask_n", вариант оператора "mask", манипулирующий нормализованными адресами IPv6 (с использованием двоеточий и без упаковки). В утилиты exim_dumpdb и exim_fixdb добавлена опция '-z' для возвращения времени без учёта часового пояса (UTC); В фоновом процессе реализовано событие, выводимое при сбое соединения TLS. В режим отладки ACL ("control = debug") добавлены опции "stop", "pretrigger" и "trigger" для управления выводом в отладочный лог. Добавлена проверка экранирования спецсимволов в lookup-запросах, если в строке запроса используются данные, полученные извне ("tainted"). В случае если символы не экранированы информация о проблеме пока только отражается в логе, но в будущих выпусках будет приводить к ошибке. Удалена опция "allow_insecure_tainted_data", позволявшая отключить вывод ошибки при небезопасном экранированием спецсимволов в данных. Также прекращена поддержка log_selector "taint", позволявший отключать вывод в лог предупреждений о проблемах с экранированием.