Релиз Firefox 70

Состоялся релиз web-браузера Firefox 70, а также мобильной версии Firefox 68.2 для платформы Android. Кроме того, сформировано обновление ветки с длительным сроком поддержки 68.2.0 (сопровождение прошлой ESR-ветки 60.x прекращено). В ближайшее время на стадию бета-тестирования перейдёт ветка Firefox 71, в соответствии с новым циклом разработки релиз которой намечен на 3 декабря. Основные новшества: В расширенный режим защиты от отслеживания перемещений включена блокировка виджетов социальных сетей, отслеживающих перемещение пользователей на сторонних сайтах (например, кнопки Like от Facebook и вставки сообщений из Twitter). Для форм аутентификации через учётную запись в социальных сетях предусмотрена возможность временного отключения блокировки; Добавлен сводный отчёт о выполненных блокировках, в котором можно отследить число блокировок по дням недели и типам; В состав включено системное дополнение Lockwise (ранее дополнение поставлялось как Lockbox), которое предлагает новый интерфейс "about:logins" для управления сохранёнными паролями. Дополнение выводит на панель кнопку, через которую можно быстро просматривать учётные записи, сохранённые для текущего сайта, а также выполнять операции поиска и редактирования паролей. Имеется возможность доступа к сохранённым паролям через отдельное мобильное приложение Lockwise, поддерживающее автозаполнение паролей в формах аутентификации любых мобильных приложений; Интегрировано системное дополнение Firefox Monitor, которое обеспечивает вывод предупреждения в случае компрометации учётной записи (проверка по email) или попытке входа на ранее взломанный сайт. Проверка осуществляется через интеграцию с базой данных проекта haveibeenpwned.com; Активирован по умолчанию генератор паролей, при заполнении форм регистрации, выводящий подсказку со сгенерированным автоматически надёжным паролем. Всплывающая подсказка автоматически выводится для полей <input type="password"> с атрибутом "autocomplete = new-password". Без данного атрибута пароль может быть сгенерирован через контекстное меню; Вместо кнопки "(i)" в адресной строке размещён индикатор уровня приватности, который позволяет судить об активации режимов блокировки отслеживания перемещений. Индикатор становится серым, когда в настройках включён режим блокирования отслеживания перемещений и на странице не зафиксировано элементов подлежащих блокировке. Индикатор становится синим, когда на странице блокированы те или иные элементы, нарушающие приватность или используемые для отслеживания перемещений. Индикатор перечёркивается, когда пользователь отключил защиту от отслеживания для текущего сайта. Страницы, открытые по HTTP или FTP, стали помечаться значком небезопасного подключения, который также выводится для HTTPS в случае проблем с сертификатами. Цвет символа замка для HTTPS заменён с зелёного на серый (вернуть зелёный цвет можно будет через настройку security.secure_connection_icon_color_gray). Уход от индикаторов обеспечения безопасности в пользу предупреждений о проблемах с безопасностью обусловлен повсеместным распространением HTTPS, который уже воспринимается как данность, а не дополнительная защита. В адресной строке прекращено отображение имени компании при использовании на сайте верифицированного EV-сертификата. Информация удалена так как могла вводить пользователя в заблуждение и использоваться для фишинга (например, была зарегистрирована компания "Identity Verified", имя которой в адресной строке воспринималось как индикатор проверки). Сведения об EV-сертификате можно просмотреть через меню, выпадающее при клике на пиктограмме с изображением замка. Вернуть отображение названия компании из EV-сертификата в адресной строке можно через настройку "security.identityblock.show_extended_validation" в about:config. В JavaScript-движок добавлен новый "baseline" интерпретатор байткода, который занимает промежуточную нишу между обычным интерпретатором и предварительным "baseline" JIT-компилятором. Новый интерпретатор значительно быстрее старого интерпретатора и использует общие с "baseline" JIT-компилятором процедуры обработки байткода, кэш и данные профилирования. Дополнительный интерпретатор позволяет ускорить выполнение часто используемых JavaScript-функций, после их отката из оптимизированного JIT (Ion JIT) на стадию компиляции для неоптимизированного "baseline" JIT, например, после того, как функция вызывается с аргументами других типов. В сложных web-приложениях компиляция для "baseline" JIT и внесение оптимизаций для Ion JIT занимает много времени и дополнительный быстрый интерпретатор позволяет добиться общего увеличения производительности и незначительного сокращения потребления памяти. В проведённых тестах включение дополнительного интерпретатора, использующего общую статистику и inline-кэш с JIT, привело к снижению времени загрузки страниц на 2-8%, а производительность инструментов для web-разработчиков возросла на 2-10%; В сборках для Linux включено по умолчанию применение системы композитинга WebRender для GPU AMD, Intel и NVIDIA (только для драйвера Nouveau), при использовании в системе пакета Mesa 18.2 или более новой версии. В сборках для Windows, помимо ранее поддерживаемых GPU AMD и NVIDIA, WebRender теперь активирован и для GPU Intel. Cистема композитинга WebRender написана на языке Rust и выносит на сторону GPU операции отрисовки содержимого страницы. При использовании WebRender вместо встроенной в движок Gecko системы композитинга, обрабатывающей данные при помощи CPU, для выполнения операций сводной отрисовки элементов страницы используются шейдеры, выполняемые в GPU, что позволяет добиться существенного увеличения скорости отрисовки и снизить нагрузку на CPU. Для принудительного включения WebRender в about:config можно изменить настройки "gfx.webrender.all" и "gfx.webrender.enabled"; Добавлена поддержка режима строгой изоляции страниц, развиваемого под кодовым именем Fission. В данном режиме страницы разных сайтов всегда размещаются в памяти разных процессов, в каждом из которых применяется своя изолированная песочница (sandbox). Разделение по процессам осуществляется не по вкладкам, а по доменам, что позволяет дополнительно изолировать содержимое внешних скриптов и iframe-блоков. Управление режимом строгой изоляции осуществляется в about:config при помощи опции "fission.autostart" (включение в релизах пока заблокировано); Обновлён логотип, а название изменено с Firefox Quantum на Firefox Browser; Запрещён вывод запросов на подтверждение полномочий, инициированных из iframe-блоков, загруженных с другого домена (cross-origin). Изменение позволит блокировать некоторые злоупотребления и перейти к модели, при которой полномочия запрашиваются только из первичного для документа домена, который показывается в адресной строке; Прекращена отрисовка содержимого файлов, загружаемых через ftp (например, при открытии через ftp перестанут отображаться изображения, README и html-файлы). При открытии ресурсов по FTP теперь будет сразу вызываться диалог загрузки файла на диск, независимо от типа содержимого; В адресной строке реализован индикатор предоставления доступа к местоположению, который позволит наглядно оценить активность Geolocation API и при необходимости даст возможность отозвать у сайта право по его использованию. До сих пор индикатор отображался только до предоставления полномочий и в случае отклонения запроса, но исчезал при открытии доступа к Geolocation API. Теперь индикатор будет информировать пользователя о наличии подобного доступа; Реализован расширенный интерфейс для просмотра TLS-сертификатов, доступный через страницу "about:certificate" (по умолчанию пока используется старый интерфейс, новый включается через security.aboutcertificate.enabled в about:config). Если раньше для просмотра сертификатов открывалось отдельное окно, то теперь информация отображается во вкладке в форме, напоминающей дополнение Certainly Something. Реализация интерфейса просмотра сертификатов полностью переписана с использованием JavaScript и стандартных web-технологий; В меню управления учётной записью добавлена секция для доступа к расширенным сервисам Firefox, таким как Monitor и Send; В основное меню и на панель добавлен новый значок "подарок", через который можно получить информацию о новых выпусках и их ключевых особенностях; Встроенные страницы Firefox (about:*) адаптированы для отображения с учётом настроек тёмной темы оформления; Улучшена читаемость подчёркнутого или перечёркнутого текста, в том числе ссылок - линии теперь обрываются (обтекают) не пересекая глифы; В темах оформления прекращена поддержка свойств accentcolor, textcolor и headerURL, которые являлись псевдонимами свойств frame, tab_background_text и theme_frame (размещённые в addons.mozilla.org темы обновлены автоматически); Добавлены CSS-свойства text-decoration-thickness, text-underline-offset и text-decoration-skip-ink, позволяющие настроить толщину, отступ и разрывы для линий, используемых для подчёркивания и перечёркивания текста; В CSS-свойстве "display" добавлена возможность указания сразу двух атрибутов, например, "display: block flex" или "display: inline flex"; Значения прозрачности в CSS-свойствах opacity и stop-opacity теперь могут задаваться в процентах; В CSS-свойство font-size добавлена поддержка значения xxx-large; В JavaScript реализована возможность наглядного разделения больших чисел при помощи символов подчёркивания, например, "myNumber = 1_000_000_000_000"; Добавлен новый ментод Intl.RelativeTimeFormat.formatToParts(), который является вариантом метода Intl.RelativeTimeFormat.format(), возвращающим массив объектов, каждый элемент в котором представляет свою часть отформатированного значения, вместо возврата отформатированной строки целиком; Размер HTTP-заголовка "Referer" ограничен 4 КБ, при превышении данного значения содержимое урезается до имени домена; В инструменты для разработчиков в панель Accessibility добавлены средства для аудита удобства навигации между элементами с использованием клавиатуры, а также симулятор того как страницу видят дальтоники; В инструменте выбора цвета для заданного цвета теперь отображается индикатор контраста, относительно фонового цвета, для оценки восприятия людьми с ослабленным зрением; В режиме инспектирования CSS определения CSS, не влияющие не выбранный элемент, теперь подсвечиваются серым цветом с выводом подсказки, на которой указана причина игнорирования и возможные пути исправления; В отладчик добавлена возможность установки точек останова, срабатывающих при изменении элементов DOM (DOM Mutation Breakpoints) и позволяющих отслеживать моменты, когда скрипт добавляет, удаляет или обновляет содержимое страницы; Для разработчиков дополнений реализована возможность инспектирования данных в хранилище browser.storage.local; В режим инспектирования сетевой активности добавлена возможность поиска, позволяющая быстро находить элементы запросов и ответов. Поиск охватывает в том числе HTTP-заголовки, Cookie и тело запросов/ответов; Проведена оптимизация кода композитинга страниц на платформе macOS, которая позволила снизить нагрузку на CPU, ускорить загрузку страниц (ускорение до 22%) и сократить использование ресурсов при воспроизведении видео (до 37%). В сборках для maсOS также добавлена поддержка импорта паролей, сохранённых в Chrome; Для Android подготовлено корректирующее обновление Firefox 68.1. Напомним, что формирование новых значительных релизов Firefox для Android прекращено. Для замены Firefox для Android под кодовым именем Fenix (распространяется как Firefox Preview) развивается новый браузер для мобильных устройств, использующий движок GeckoView и набор библиотек Mozilla Android Components. Несколько дней назад опубликован новый экспериментальный выпуск Firefox Preview 2.2, в котором устранено несколько существенных проблем в интерфейсе и методах взаимодействия с пользователем. Из изменений по сравнению с выпуском 2.0 отмечается добавление опции для очистки всех данных при выходе и возможность открытия ссылок по умолчанию в режиме приватного просмотра. Кроме новшеств и исправления ошибок в Firefox 70 устранено 24 уязвимости, из которых 12 (собраны под одним CVE-2019-11764) помечены как критические и потенциально могут привести к выполнению кода злоумышленника при открытии специально оформленных страниц.