Оценка производительности ZFS на уровне ядра в Linux

Ресурс Phoronix провел тестирования недавно представленной нативной поддержки ZFS для Linux, работающей в виде модуля ядра. В тестировании также приняли участие файловые системы Ext4, XFS, Btrfs и реализация ZFS в виде FUSE-модуля, работающего в пространстве пользователя. В большинстве тестов производительность ZFS в виде модуля ядра оказалась в несколько раз быстрее FUSE-модуля ZFS. При сравнении с Btrfs нативная реализация ZFS (далее просто ZFS) оказалась быстрее в 3 тестах (SQLite, FS-Mark, Threaded I/O Tester) из 9. В тесте Apache Benchmark ZFS примерно на 10% отстала от Ext4, XFS и Btrfs. В тесте SQLite ФС ZFS в три раза обогнала Btrfs, но на 12% отстала от Ext4 и на 40% от XFS; При оценке скорости сборки (Compile Bench) ZFS опередила XFS на 10%, но отстала от Btrfs в два раза, а от Ext4 - в 2.5 раза; В тесте IOzone на скорость записи ZFS отстала от Ext4 и XFS на 18%, от Btrfs на 30%. В тесте IOzone на скорость чтения ZFS на 8% опередила Ext4 и XFS, но на 7% отстала от Btrfs. Примечательно, что FUSE-реализация ZFS в данном тесте на доли процента обогнала нативную реализацию ZFS; В тесте Dbench ZFS в два раза отстала от XFS, на 34% отстала от Ext4 и на 15% от Btrfs; В тесте FS-Mark ZFS на 20% обогнала Btrfs и на 2% XFS, но на 12% отстала от Ext4; В тесте Threaded I/O Tester ZFS оказалась лидером, обогнав ext4 и XFS на 40%, а Btrfs на 3%. Интересно, что данный тест также был запущен в OpenSоlaris, в котором результаты работы ZFS отстали от Linux в 11 раз; В тесте PostMark ZFS значительно отстала от других систем, например, от Ext4 в 16 раз, от XFS в 15 раз, а от Btrfs в 12 раз. Производительность ZFS в OpenSolaris оказалась выше реализации ZFS для Linux в два раза. Дополнение: опубликовано сравнение производительности Ubuntu 10.10, Fedora 14, PC-BSD 8.1, OpenSolaris b134 и OpenIndiana b147. В большинстве тестов лидирует Linux, с небольшим отрывом следует PC-BSD, затем, с иногда c почти двухкратным отставанием, следует OpenSolaris.