Выпуск FreeBSD 12.3

Представлен релиз FreeBSD 12.3, который опубликован для архитектур amd64, i386, powerpc, powerpc64, powerpcspe, sparc64 и armv6, armv7 и aarch64. Дополнительно подготовлены образы для систем виртуализации (QCOW2, VHD, VMDK, raw) и облачных окружений Amazon EC2. Релиз FreeBSD 13.1 ожидается весной 2022 года. Ключевые новшества: Добавлен скрипт /etc/rc.final, который запускается на последней стадии работы после завершения всех пользовательских процессов. В пакетом фильтре ipfw предоставлена команда dnctl для управления настройками системы ограничения трафика dummynet. Добавлен sysctl kern.crypto для управления криптоподсистемой ядра, а также отладочный sysctl debug.uma_reclaim. Добавлен sysctl net.inet.tcp.tolerate_missing_ts, допускающий TCP-пакеты без временных меток (опция timestamp, RFC 1323/RFC 7323). В ядре GENERIC для архитектуры amd64 включена опция COMPAT_LINUXKPI и активирован драйвер mlx5en (NVIDIA Mellanox ConnectX-4/5/6). В загрузчике добавлена возможность загрузки операционной системы с ram-диска, а также реализована поддержка ZFS-опций com.delphix:bookmark_written и com.datto:bookmark_v2. В библиотеку fetch добавлена поддержка проксирования FTP поверх HTTPS. В пакетном менеджере pkg для команд "bootstrap" и "add" реализован флаг "-r" для указания репозитория. Обеспечено использование переменных окружения из файла pkg.conf. В утилите growfs появилась возможность работы с файловыми системами примонтированными в режиме чтения и записи. В утилите etcupdate реализован режим отката изменений для восстановления одного или нескольких файлов. Добавлен флаг "-D" для указания целевого каталога. Обеспечено извлечение данных с использованием временного каталога и добавлена обработка SIGINT. В утилиты freebsd-update и freebsd-version добавлен флаг "-j" для поддержки jail-окружений. Утилиту cpuset теперь можно использовать в jail-окружениях для изменения параметров дочерних jail. В утилиту cmp добавлены опции: "-b" (--print-bytes) для вывода отличающихся байтов, "-i" (--ignore-initial) для игнорирования определённого числа начальных байтов, "-n" (--bytes) для ограничения числа сравниваемых байтов. В утилите daemon появился флаг "-H" для обработки SIGHUP и переоткрытия файла, в которых осуществляется вывод (добавлено для поддержки newsyslog). В утилите fstyp при указании флага "-l" обеспечено определение и отображение файловых систем exFAT. В утилите mergemaster реализована обработка символических ссылок в процессе обновления. В утилиту newsyslog добавлен флаг "E" для отключения ротации пустых логов. В утилите tcpdump появилась возможность декодирования пакетов на интерфейсах pfsync. В утилите top добавлена команда-фильтр "/" для показа только процессов или аргументов, соответствующих заданной строке. В unzip добавлена поддержка архивов, защищённых паролем. Улучшена поддержка оборудования. Добавлены идентификаторы PCI-устройств для AHCI-контроллеров ASMedia ASM116x и I2C-контроллеров Intel Gemini Lake. Реализована поддержка сетевых адаптеров Mikrotik 10/25G и беспроводных карт Intel Killer Wireless-AC 1550i, Mercusys MW150US, TP-Link Archer T2U v3, D-Link DWA-121, D-Link DWA-130 rev F1, ASUS USB-N14. Добавлен новый драйвер igc для ethernet-контроллеров Intel I225 2.5G/1G/100MB/10MB. Netgraph-узел ng_bridge адаптирован для SMP-систем. В узле ng_nat добавлена поддержка CGN (Carrier Grade NAT, RFC 6598). Предоставлена возможность подстановки узла ng_source в любую часть Netgraph-сети. В драйвере rctl, применяемом для лимитирования ресурсов, добавлена возможность установки ограничения потребления ресурсов в значение 0. В интерфейс vlan добавлена поддержка системы приоритизации трафика и управления пропускной способности ALTQ. В драйверах amdtemp и amdsmn реализована поддержка CPU Zen 3 "Vermeer" и APU Ryzen 4000 (Zen 2, "Renoir"). Обновлены версии входящих в базовую систему сторонних приложений: awk 20210221, bc 5.0.0, less 581.2, Libarchive 3.5.1, OpenPAM Tabebuia, OpenSSL 1.1.1l, SQLite3 3.35.5, TCSH 6.22.04, Subversion 1.14.1, nvi 2.2.0-3bbdfe4. Утилита unzip синхронизирована с кодовой базой NetBSD.