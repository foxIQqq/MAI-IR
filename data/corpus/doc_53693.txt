Microsoft добавил в WSL2 (Windows Subsystem for Linux) возможность монтирования дисков

Компания Microsoft сообщила о расширении функциональности подсистемы WSL2 (Windows Subsystem for Linux), обеспечивающей запуск исполняемых файлов Linux в Windows. Начиная со сборки Windows Insiders 20211 в WSL2 добавлена поддержка монтирования файловых систем с физических дисков. Для монтирования предложена команда "wsl --mount", при помощи которой в том числе можно примонтировать в WSL раздел c ФС, не имеющей встроенной поддержки Windows, например, можно получить доступ к разделу с ФС ext4. Указанную возможность можно использовать для организации работы с одним и тем же Linux-разделом при наличии на компьютере нескольких операционных систем (Windows и Linux). Примонтированные разделы становятся видны не только в Linux-окружении WSL, но и в основной системе через виртуальный диск "\wsl$" в файловом менеджере File Explorer. Напомним, что редакция WSL2 отличается поставкой полноценного ядра Linux вместо ранее применяемого эмулятора, выполнявшего трансляцию системных вызовов Linux в системные вызовы Windows. Ядро Linux в WSL2 не входит в установочный образ Windows, а загружается динамически и поддерживаться в актуальном виде силами Windows по аналогии с тем, как устанавливаются и обновляются графические драйверы. Для установки и обновления ядра применяется штатный механизм Windows Update. Предлагаемое для WSL2 ядро основано на выпуске ядра Linux 4.19, который выполняется в окружении Windows при помощи виртуальной машины, уже задействованной в Azure. Применяемые в ядре специфичные для WSL2 патчи включают оптимизации для сокращения времени запуска ядра, уменьшения потребления памяти, возвращения Windows освобождённой Linux-процессами памяти, оставления в ядре минимально необходимого набора драйверов и подсистем. Окружение WSL2 выполняется в отдельном дисковом образе (VHD) c файловой системой ext4 и виртуальным сетевым адаптером. Как и в WSL1 компоненты пространства пользователя устанавливаются отдельно и базируются на сборках различных дистрибутивов. Например, для установки в WSL в каталоге Microsoft Store предлагаются сборки Ubuntu, Debian GNU/Linux, Kali Linux, Fedora, Alpine, SUSE и openSUSE.