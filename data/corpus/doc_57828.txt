Выпуск децентрализованной видеовещательной платформы PeerTube 4.3

Состоялся выпуск децентрализованной платформы для организации видеохостинга и видеовещания PeerTube 4.3. PeerTube предлагает независимую от отдельных поставщиков альтернативу YouTube, Dailymotion и Vimeo, использующую сеть распространения контента на базе P2P-коммуникаций и связывания между собой браузеров посетителей. Наработки проекта распространяются под лицензией AGPLv3. Основные новшества: Реализована возможность автоматического импорта видео из других видеоплатформ. Например, пользователь может изначально размещать видео в YouTube и настроить автоматический перенос в свой канал на базе PeerTube. Возможна группировка видео из разных платформ в одном канале PeerTube, а также ограниченный перенос видео из указанных списков воспроизведения. Включение автоматического импорта осуществляется в меню "My library" через кнопку "My synchronizations" во вкладке "Channels". Проведена работа по модернизации интерфейса пользователя. Пересмотрено оформление страницы создания учётной записи, на которой увеличено число этапов при прохождении регистрации: вывод общей информации, принятие условий использования, заполнение формы с данными о пользователе, запрос на создание первого канала и информация об успешной регистрации учётной записи. Изменено местоположение верхних элементов на странице входа, для того чтобы сделать более заметными информационные сообщения. Строка поиска сдвинута в центр верхней части экрана. Увеличен размер шрифта и откорректирован цвет. Расширены возможности по встраиванию видео на другие сайты. Для встроенных live-вещаний в интегрируемом на страницы плеере в моменты до начала и после окончания вещания реализован показ пояснительных заставок вместо пустоты, создающей ощущение сбоя. Также реализован автоматический запуск воспроизведения после начала запланированной live-трансляции. Добавлены новые опции для настройки своего узла PeerTube. Администратору предоставлены средства для запуска работ в пакетном режиме на объединённых узлах (Federation), например, для удаления определённых подписчиков сразу со всех подконтрольных узлов. Добавлены опции для отключения перекодирования для изменения разрешения загружаемых видео или live-вещаний, в том числе можно отключить перекодирование видео с разрешением выше максимально разрешённого в настройках. В web-интерфейс добавлена возможность выборочного удаления файлов с видео, что может оказаться полезным для высвобождения свободного места (например, можно разом удалить видео с разрешением выше заданного). Проведены оптимизации, нацеленные на повышение производительности и увеличение масштабируемости. Платформа PeerTube основана на применении BitTorrent-клиента WebTorrent, запускаемого в браузере и использующего технологию WebRTC для организации прямого P2P-канала связи между браузерами, и протокола ActivityPub, позволяющего объединить разрозненные серверы с видео в общую федеративную сеть, в которой посетители участвуют в доставке контента и имеют возможность подписки на каналы и получения уведомлений о новых видео. Предоставляемый проектом web-интерфейс построен с использованием фреймворка Angular. Федеративная сеть PeerTube образуется как содружество связанных между собой небольших серверов хостинга видео, на каждом из которых имеется свой администратор и могут быть приняты свои правила. Каждый сервер с видео выполняет роль BitTorrent-трекера, на котором размещены учётные записи пользователей данного сервера и их видео. Идентификатор пользователя формируются в форме "@имя_пользователя@домен_сервера". Передача данных при просмотре осуществляется непосредственно из браузеров других посетителей, просматривающих контент. Если видео никто не просматривает, отдача организуется сервером, на который изначально загружено видео (используется протокол WebSeed). Помимо распределения трафика между пользователями, просматривающими видео, PeerTube также позволяет узлам, запущенным авторами для первичного размещения видео, кэшировать видео других авторов, формируя распределённую сеть не только из клиентов, но и из серверов, а также обеспечивая отказоустойчивость. Имеется поддержка потокового вещания (live streaming) с доставкой контента в режиме P2P (для управления стримингом могут использоваться типовые программы, такие как OBS). Для начала вещания через PeerTube пользователю достаточно загрузить на один из серверов видеоролик, описание и набор тегов. После этого ролик станет доступен во всей федеративной сети, а не только с сервера первичной загрузки. Для работы с PeerTube и участия в распространении контента достаточно обычного браузера и не требуется установка дополнительного ПО. Пользователи могут отслеживать активности в выбранных видеоканалах, подписавшись на интересующие каналы в федеративных социальных сетях (например, в Mastodon и Pleroma) или через RSS. Для распространения видео с использованием P2P-коммуникаций пользователь также может добавить на свой сайт специальный виджет со встроенным web-плеером. В настоящее время для размещения контента функционирует около 1100 серверов, поддерживаемых разными добровольцами и организациями. Если пользователя не устраивают правила размещения видео на определённом сервере PeerTube, он может подключиться к другому серверу или запустить свой собственный сервер. Для быстрого развёртывания сервера предоставляется преднастроенный образ в формате Docker (chocobozzz/peertube).