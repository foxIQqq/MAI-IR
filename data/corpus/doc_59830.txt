Выпуск Wifibox 0.12, окружения для использования WiFi-драйверов Linux во FreeBSD

Доступен выпуск проекта Wifibox 0.12, нацеленного на решение проблемы с использованием во FreeBSD беспроводных адаптеров, для которых отсутствуют необходимые драйверы. Работа проблемных для FreeBSD адаптеров в Wifibox обеспечивается через запуск гостевой системы с Linux, в которой загружаются родные для Linux драйверы беспроводных устройств. Окружение потенциально может применяться для любых WiFi-карт, поддерживаемых в Linux, но протестировано в основном на чипах Intel, Qualcomm Atheros и AMD RZ608 (MediaTek MT7921K). Установка гостевой системы с драйверами автоматизирована, а все необходимые компоненты оформлены в виде готового пакета wifibox, который запускается при загрузке при помощи поставляемого в комплекте rc-сервиса. Гостевая система запускается при помощи гипервизора Bhyve, в котором организуется проброс доступа к беспроводной карте. Для работы требуется система с поддержкой аппаратной виртуализации (AMD-Vi или Intel VT-d). Начинка гостевой системы основана на дистрибутиве Alpine Linux, построенного на базе системной библиотеки Musl и набора утилит BusyBox. Для подключения к беспроводной сети используется пакет wpa_supplicant, файлы конфигурации для которого синхронизируются с настройками из основного окружения FreeBSD. Создаваемый для wpa_supplicant управляющий Unix-сокет пробрасывается в хост-окружение, что позволяет использовать штатные утилиты FreeBSD для подключения и работы с беспроводной сетью, среди прочего можно использовать утилиты wpa_cli и wpa_gui (net/wpa_supplicant_gui). В новом выпуске реализован режим "suspend_vmm", при включении которого осуществляется выгрузка модуля ядра vmm при переходе системы в спящий режим и его загрузка после после пробуждения системы. Предложенный режим позволят избавиться от проблем на системах, на которых из-за оборудования или гипервизора bhyve наблюдаются сбои при переходе в спящих режим с активным модулем vmm. Кроме того, в новом выпуске дополнена документация и добавлены команды start и stop для запуска и остановки обработчиков netif, консоли и vmm.