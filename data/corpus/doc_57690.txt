Выпуск графического редактора GIMP 2.99.12 с начальной поддержкой CMYK

Доступен для тестирования выпуск графического редактора GIMP 2.99.12, продолжающий развитие функциональности будущей стабильной ветки GIMP 3.0, в которой выполнен переход на GTK3, добавлена штатная поддержка Wayland и HiDPI, проведена значительная чистка кодовой базы, предложен новый API для разработки плагинов, реализовано кэширование отрисовки, добавлена поддержка выделения нескольких слоёв (Multi-layer selection) и обеспечено редактирование в исходном цветовом пространстве. Для установки доступен пакет в формате flatpak (org.gimp.GIMP в репозитории flathub-beta), а также сборки для Windows и macOS . Среди изменений: Предложена и задействована по умолчанию новая тема оформления, доступная в светлом и тёмном вариантах, объединённых в одной теме. Новая тема реализована в серых тонах и построена с использованием CSS-подобной системы определения стилей, применяемой в GTK 3. Тёмный вариант темы включается при выборе настройки "Использовать вариацию тёмной темы, если доступно" ("Use dark theme variant if available"). Реализована начальная поддержка цветовой модели CMYK, а также пересмотрены многие аспекты, связанные с преобразованием и отображением цветов. Обеспечено сохранение данных, используемых при имитации цветовых пространств, непосредственно в файлы в формате XCF, в которых хранятся данные изображения. Данные имитации, которые используются при работе с профилем цветопробы, в схемах цветопередачи и при компенсации точки чёрного, ранее терялись после перезапуска сеанса с программой. Сохранение данных имитации позволяет упростить рабочие процессы, например, связанные с подготовками материалов для вывода на печать, в которых работа осуществляется в цветовом пространстве RGB, а результат формируется в пространстве CMYK, и постоянно необходимо оценивать как будет выглядеть финальное изображение c учётом изменения цветового охвата. Ранее доступные операции с цветопробами (профиль для цветопробы, цветопередача цветопробы и компенсация точки чёрного) перемещены из меню "Просмотр/Управление цветом" (View/Color Management) в "Изображение/Управление цветом" (Image/Color Management). В строку состояния добавлен наглядный переключатель для быстрого переключения между обычным режимом и цветопробой, используемой для оценки образца воспроизведения цвета. При клике на переключателе правой кнопкой мыши отображается панель для изменения настроек программной цветопробы. При включении профиля имитации CMYK многие инструменты, включая пипетку, выборочные точки и выбор цвета, переведены на отображение цветов в цветовом пространстве CMYK. Расширена поддержка CMYK в коде, связанном с экспортом и импортом изображений в форматах JPEG, TIFF и PSD. Например, для JPEG и TIFF реализована возможность экспорта с использованием профиля цветопробы, а для JPEG и PSD код импорта переведён на использование GEGL/babl и обеспечено сохранение присутствующего в изображении профиля CMYK в форме профиля цветопробы. API для разработки плагинов расширен функциями получения и установки профиля цветопробы. В виджетах GimpColorNotebook, GimpColorSelection и GimpColorSelector, предоставляемых библиотекой libgimpwidgets, реализована работа с учётом имитации цветовых пространств. Реализована поддержка изменения размера кистей прямо на холсте, не отвлекаясь на корректировку настроек в панели. Размер кисти теперь можно изменять через движение мышью при нажатой правой кнопке мыши и удерживании клавиши Alt. Предоставлена возможность настройки модификаторов клавиш, действующих при нажатии кнопок мыши на холсте, таких как Ctrl для масштабирования, Shift для поворота холста и Alt для выбора слоёв или изменения размера кистей. Добавлена возможность использования альтернативного поведения при масштабировании, которое включается через меню "Параметры > Взаимодействие с холстом" ("Preferences > Canvas Interaction"). Если старый алгоритм обеспечивал непрерывное увеличение или уменьшение масштаба в зависимости от времени движения мыши (при удержании клавиши Ctrl и средней кнопки мыши), то новый алгоритм учитывает не продолжительность движения, а расстояние на которое переместилась мышь (чем больше движение, тем больше изменяется масштаб). В настройки дополнительно добавлен параметр, регулирующий зависимость изменения масштаба от скорости перемещения мыши. Настройки указателей инструментов реорганизованы и перемещены из вкладки "Окна изображений" ("Image Windows") во вкладку "Параметры > Устройства ввода" ("Preferences > Input Devices"). Улучшена обработка опции "Показывать контур кисти" при отключённой опции "Показывать указатель для инструментов рисования". Улучшена реализация режима "Указатель в форме точки" (Point-like Сursor), предназначенного для сенсорных экранов, который теперь корректно работает на тёмном и светлом фоне. В инструменте "Плоская заливка" переработан и реорганизован режим "Определение контурного рисунка" ("Fill by line art detection"). Добавлена новая опция "Обводить границы заливки" ("Stroke borders"). В диалог приветствия запуска программы (Welcome Dialog) добавлена вкладка для просмотра примечаний к новому выпуску и списка наиболее заметных улучшений. Для некоторых элементов списка показывается значок воспроизведения, позволяющий запустить наглядную демонстрацию отдельных новшеств. Расширены возможности экранного жеста "щипок". Кроме масштабирования щипком теперь также можно вращать холст, одновременно с масштабированием. Щипком или колесом мыши также можно менять масштаб эскизов изображений в стыкуемых панелях (слои, каналы, контуры). Добавлена поддержка загрузки изображений в формате WBMP, а также импорта и экспорта в формате ANI, применяемом для анимированных курсоров мыши. Улучшена поддержка форматов изображений PSD, SVG, GIF, PNG, DDS, FLI. В PSD добавлена поддержка дополнительных масок слоёв и изображений с наложением полутонов (duotone). Для анимированных GIF реализована опция "Количество повторов" ("Number of repeats"). Для PNG добавлена опция для оптимизации размера палитры, позволяющая максимально ужать палитру. Для формата DDS обеспечена работа с 16-разрядными масками и добавлена поддержка изображений с одним 16-разрядным каналом. Переделан диалог для экспорта изображений в RAW-форматах. Предоставлена возможность экспорта в формате RAW изображений с любым значением глубины цвета. Выполнена работа по устранению проблем, возникающих при использовании протокола Wayland. Работа в окружениях на базе Wayland стала заметно стабильней, хотя остаются нерешёнными некоторые известные проблемы, напрямую не связанные с GIMP и вызванные ошибками в композитных серверах или недоработками в протоколе. Например, наблюдаются сбои при запуске в окружении Sway и остаются нерешёнными проблемы, связанные с отсутствием средств управления цветом в Wayland. Значительно улучшена поддержка сценариев Script-fu. В сервере для выполнения скриптов (script-fu-server) добавлена возможность подключения собственных плагинов, выполняемых в отдельных процессах. Предложен новый отдельно запускаемый интерпретатор Script-fu (gimp-script-fu-interpreter-3.0). Проведена реструктуризация API для Script-fu, который приближен к основному API libgimp. Реализована полноценная поддержка сборки с использованием инструментария Meson вместо autotools. Использование Meson рекомендовано для всех поддерживаемых платформ.