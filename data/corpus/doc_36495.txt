В Linux удалось достичь скорости 51.8 Гбит/с в рамках одного TCP-соединения

Разработчики расширения MultiPath TCP для ядра Linux побили рекорд скорости на самую большую пропускную способность, которую удалось продемонстрировать в рамках одного TCP-соединения. В рамках проведённого эксперимента удалось достичь пропускной способности 51.8 Гбит/с при передаче данных через одно TCP-соединение. При такой скорости для передачи содержимого DVD достаточно 1 секунды, а диска Blu-Ray (25GB) - 5 секунд. Технология Multipath TCP (RFC 6824) позволит организовать работу TCP-соединения с доставкой пакетов одновременно по нескольким маршрутам через разные сетевые интерфейсы, привязанные к разным IP-адресам. Со стороны приложений подобное агрегированное соединение выглядит как обычное TCP-соединение. Multipath TCP может использоваться как для увеличения надёжности, так и для расширения пропускной способности. В качестве одного из практических применений Multipath TCP для обычных пользователей упоминается возможность организации передачи данных на смартфоне, с использованием одновременно линков WiFi и 3G. Для серверных систем Multipath TCP может обеспечить сокращение расходов за счёт использования нескольких дешевых линков вместо одного более дорогого. Для достижения скорости 51.8 Гбит/с в эксперименте были использованы два сервера HP DL380p G7 с шестью 10 гигабитными Ethernet интерфейсами в каждом (три двухпортовых адаптера Intel 82599EB). Конфигурация ядра Linux была подвергнута тюнингу, учитывающему особенности используемой серверной платформы. Был настроен режим Receive-Flow-Steering, для каждой сетевой карты MTU был установлен в 9000 (включена поддержка jumbo-кадров), tx-queue в 500, настроена слитная обработка серии прерываний, обработка прерываний для каждой карты привязана к отдельному CPU, существенно расширены размеры буферов для стека TCP/IP (максимальный размер буфера выставлен в 200 Мб), выбран алгоритм контроля перегрузки cubic. После установки соединения с использованием утилиты netperf на первом этапе был задействован только один интерфейс и система показала максимально возможный предел для классического TCP-стека. После этого не разрывая соединения для оставшихся интерфейсов была включена поддержка Multipath TCP и система автоматически расширила канал связи с использованием появившейся мощности, доведя в итоге пропускную способность до 51.8 Гбит/с.