Выпуск распределенной системы управления исходными текстами Git 2.13.0

Доступен выпуск распределенной системы управления исходными текстами Git 2.13.0. Git является одной из самых популярных, надёжных и высокопроизводительных систем управления версиями, предоставляющей гибкие средства нелинейной разработки, базирующиеся на ответвлении и слиянии веток. Для обеспечения целостности истории и устойчивости к изменениям задним числом используются неявное хеширование всей предыдущей истории в каждом коммите, также возможно удостоверение цифровыми подписями разработчиков отдельных тегов и коммитов. Из проектов, разрабатываемых с использованием Git, можно отметить ядро Linux, Android, LibreOffice, Systemd, X.Org, Wayland, Mesa, GStreamer, Wine, Debian, DragonFly BSD, Perl, Eclipse, GNOME, KDE, Qt, Ruby on Rails, PostgreSQL, VideoLAN, PHP, Python, Xen, Minix. По сравнению с прошлым выпуском в новую версию принято 729 изменения, подготовленных при участии 65 разработчиков, из которых 15 впервые приняли своё участие в разработке. Основные изменения: Устранена уязвимость (CVE-2017-8386), которая позволяет запустить внешние команды при подсоединении к репозиторию через SSH в режиме "git-shell" (оболочка, ограничивающая ssh-клиентов только операциями с git). В частности, при выполнении "git upload-pack --help" запускается интерактивный интерфейс для постраничного просмотра подсказки, из которого можно вызвать произвольные программы на стороне удалённой системы. Конфигурации, использующие git-shell вместе с gitolite проблеме не подвержены; Добавлен код для выявления в Git-репозиториях известных коллизий в хэшах SHA-1, который поможет защититься от возможных атак через подмену репозитория. В дальнейшем планируется избавиться от жёсткой привязки Git от SHA-1 и добавить опциональную поддержку SHA3-256, которая сможет применяться параллельно с SHA-1. Таким образом, переведённый на SHA3-256 локальный репозиторий сможет взаимодействовать с Git-серверами (как минимум на уровне push/fetch), поддерживающими только SHA-1, а пользователи смогут одновременно использовать идентификаторы объектов SHA-1 и SHA3-256; Расширены возможности по использованию шаблонов файловых путей в командах git. В частности, добавлен сокращённый оператор для исключения путей "^", который может использоваться вместо выражения ":(exclude)" и вместо ранее применяемого сокращения "!", которое требовало экранирования блока кавычками. Например, если раньше для выполнения выборки файлов с расширениями, отличными от ".c", требовалось выполнить: git grep this.is.a -- src ':(exclude)*.c' или git grep this.is.a -- src ':!*.c' то сейчас можно упростить конструкцию до git grep this.is.a -- src :^*.c Кроме того, в новой версии представлен новый оператор ":(attr)", который позволяет выбрать файлы, соответствующие заданному списку атрибутов. Например, для вывода файлов, хранимых в LFS (хранилище больших бинарных данных) можно выполнить: git ls-files ':(attr:filter=lfs)' При желании можно определить и привязать свои атрибуты и комбинировать attr с другими операторами: echo 'libfoo/ vendored' >>.gitattributes echo 'imported-tool/ vendored' >>.gitattributes git grep -i license -- ':(attr:vendored)' git grep foobar -- ':(exclude,attr:vendored)' В файлах конфигурации появилась возможность применения условных операторов через которые можно организовать применение разных опций для разных групп репозиториев путём включения дополнительных блоков конфигурации при наличии определённых файловых путей. Например, можно указать в настройках один email для внутренних рабочих проектов и другой для использования при работе со сторонним открытым кодом, что позволит избежать казусов в случае если новый репозиторий не был настроен должным образом. ~/.gitconfig: [includeIf "gitdir:~/work/"] path = .gitconfig-work [includeIf "gitdir:~/play/"] path = .gitconfig-play ~/.gitconfig-work: [user] name = Serious Q. Programmer email = serious.programmer@business.com ~/.gitconfig-play: [user] name = Random J. Hacker email = hack75@0dayf0r4ou.com В команде "git log" по умолчанию активирован режим "--decorate=auto", при котором коммиты, указывающие непосредственно на ветку или тег, выделяются и выводятся c именем ветки; Код организации вывода в "git branch" переведён на использование системы ref-filter, которая также используется в "git for-each-ref" и "git tag", что позволяет использовать в "git branch" аналогичные опции форматирования вывода ("--format="); В "git branch", "git tag" и "git for-each-ref" добавлена опция "--no-contains", которая дополняет опцию "--contains" и позволяет запросить теги или ветки, в которых отсутствует определённая ошибка или исправление; В "git stash save" добавлена поддержка шаблонов файловых путей; Спецназвания веток @{upstream}, @{u} и @{push} теперь не чувствительны к регистру символов (часто, после ввода "{" разработчики допускали опечатку и вводили первый символ с большой буквы); В дополнение к реализованной в прошлых выпусках возможности рекурсивного обхода субмодулей в командах checkout, grep и ls-files, в Git 2.13 реализован вывод дополнительной информации о субмодулях при выполнении команды "git status --short".