Выпуск OmniOS CE r151036, дистрибутива Illumos

Доступен релиз дистрибутива OmniOS Community Edition r151036, основанного на наработках проекта Illumos и предоставляющего полноценную поддержку гипервизоров bhyve и KVM, виртуального сетевого стека Crossbow, файловой системы ZFS и средств запуска легковесных Linux-контейнеров. Дистрибутив может применяться как для построения высокомасштабируемых web-систем, так и для создания систем хранения. В новом выпуске: Предоставлена возможность использования альтернативной системы ведения логов на базе rsyslog. Появилась поддержка настройки атрибута roleauth, позволяющего использовать для аутентификации с заданной ролью отдельный пароль, отличный от пароля пользователя. Улучшен процесс автонастройки PCI-устройств. Применяемый по умолчанию модуль платформы (PSM) переключён на использование apix (для отмены можно указать apix_enable=0 в /etc/system). В SMB-сервере реализована поддержка протокола SMB 3.1.1. Для устройств NVMe реализована поддержка DKIOCFREE. Реализована возможность полного отключения фреймворка HMA ( Hypervisor Multiplex Framework) через указание hma_disable=1 в /etc/system, что может потребоваться для запуска Virtualbox на системах с CPU AMD. Реализация Java по умолчанию переключена на OpenJDK 11 (изменить версию по умолчанию можно командой "pkg set-mediator -V 1.8 openjdk"). Добавлена поддержка SMBIOS 3.4. Утилита /usr/bin/awk переключена с реализации oawk на nawk. В zpool предоставлена поддержка отключения отдельных возможностей во время создания пула при помощи команды "-o feature@<feature>=disabled". В команду crontab добавлена опция "-u" для выбора пользователя, а в grep реализованы команды "-L", "-o" и "--label". Улучшена реализация утилиты sed. Добавлена новая команда demangle. В rsync перенесена поддержка алгоритмов сжатия ZStandard и lz4, а также хэшей xxhash. Предоставлена возможность полного отключения IPv6 для изолированных зон LX, предназначенных для запуска Linux. Разработка Linux-образов (lx-images) вынесена в отдельный репозиторий. В гипервизор Bhyve перенесены изменения из FreeBSD и illumos. Добавлена поддержка DISCARD/TRIM. В ZFS добавлена поддержка аппаратного ускорения вычислений для RAIDZ, при наличии необходимых инструкций в CPU. Улучшен поиск устройств при загрузке и добавлена возможность загрузки с корневого пула, для которого имеется устройство slog. Проведён рефакторинг кода библиотек для ZFS, из которых выделена новая библиотека libzfsutil, что позволило избавить утилиту zdb от необходимости запуска с правами root при выполнении некоторых операций. Расширены возможности пакетного менеджера pkg, который теперь может корректной работать с образами IPS для глобальной зоны. Представлен новый репозиторий OmniOS Extra с дополнительными пакетами. Улучшена поддержка оборудования. Добавлена поддержка встроенных в CPU датчиков температуры и напряжения. Добавлена поддержка устройств CCID (Chip/Smart Card Interface). Улучшены драйверы i40e и mlxcx (Mellanox ConnectX-4/5/6 Ethernet controller). В драйвере bge реализована поддержка BCM57765. Решены проблемы при запуске в AWS. По умолчанию задействован набор компиляторов GCC 10. Обновлены perl 5.32, Python 3.7.9, bash 5.0.18, openssh 8.4.1, bind 9.11.23 и другие внешние компоненты.