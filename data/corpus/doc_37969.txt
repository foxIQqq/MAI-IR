Вышла система мониторинга Nagios Core 4.0.0 и анализатор сетевого трафика Nagios Network Analyzer

Спустя пять лет с момента выпуска серии 3.0 компания Nagios Enterprises LLC представила новый значительный релиз открытой системы мониторинга Nagios Core 4.0.0, являющейся основой для серии коммерческих продуктов. Nagios Core включает базовый движок мониторинга и web-интерфейс для отслеживания состояния инфраструктуры. Коммерческие надстройки предоставляют такие возможности, как интерфейс для конфигурации, поддержку SNMP Traps, мобильное приложение, средства мониторинга бизнес-процессов, графики изменения производительности, поддержка хранения данных в СУБД, аудит логов, дополнительные отчёты и т.п. Тем не менее, многие из расширенных возможностей можно получить бесплатно благодаря огромной коллекции плагинов и таким дополнениям/надстройкам, как Opsview, Monarch, Nconf, NCPL, Centreon, NagVis и т.д. Основные новшества Nagios Core 4.0.0: Проведена работа по увеличению производительности. Представлена концепция базовых обработчиков (Core Workers) - легковесных процессов, функции которых ограничены только выполнением проверок. Так как подобные обработчики содержат только самый минимальный набор функций, они запускаются заметно быстрее, чем ранее используемые проверочные процессы. Для взаимодействия с основным процессом Nagios используется обмен данными через память (IPC через Unix-domain сокеты), без сохранения информации на диск. Штатные рабочие процессы ответвляются при запуске Nagios Core и находятся в памяти до завершения работы, что избавляет от необходимости совершения форков при выполнении проверок. Допускается создание специализированных обработчиков, которые могут использовать методы распределения нагрузки при выполнении определённых типов проверки; Заметно ускорен процесс проверки конфигурации. Каждый элемент теперь проверяется только один раз. Ранее на проверку конфигурации требовалось выполнить O(n^2) операций, теперь число проверок сокращено до O(n); Очереди событий переведены на использование структуры данных, сводящей число операций добавления событий к O(log n), вместо O(n) в прошлой версии, что привело к заметному понижению нагрузки на CPU при добавлении в очередь новых событий; Код разбора макросов теперь выполняет сортировку макросов на стадии запуска и в дальнейшем использует бинарный поиск для доступа к макросам. Для наиболее часто используемых макросов $USERx$, $ARGx$ и $HOSTADDRESS$ задействована отдельная очень быстрая выборка; В обработчик запросов (Query Handler) добавлен простой интерфейс для организации взаимодействия внешних компонентов с Nagios Core. Через данный интерфейс, в частности, организована работа ранее упомянутых Core Workers. Из доступных обработчиков запросов выделены: core - предоставлят средства управления и информацию; wproc - регистрация, инфорамация и средства управления для рабочих процессов; nerd - сервис подписки Nagios Event Radio Dispatcher (NERD); help - предоставляет помощь для обработчика запросов; echo - реализация простейшего обработчика запроса, возвращающего обратно отправленные к нему данные. Представлена библиотека libnagios, в которой сформирована подборка функций, полезных для разработчиков обработчиков запросов и базовых обработчиков. Указание IP-адреса для в конфигурации хоста теперь не является обязательным, если IP не указан, то используется имя хоста с разрешением IP через DNS; В блоки host и service добавлен новый атрибут hourly_value, позволяющий определить важность хоста при рассылке уведомлений; В блоке service добавлен атрибут parents для организации привязки к другим сервисам, которые нужно проверить в первую очередь, так как от их работы зависит работоспособность текущего сервиса, по аналогии с parents в блоке host. Например, если осуществляется проверка свободного места на диске с доступом по ssh, то при неработоспособности ssh нет смысла выполнять проверки, использующие ssh; Кроме того, компания Nagios Enterprises LLC выпустила новое ПО для анализа и мониторинга сетевого трафика Nagios Network Analyzer. Система поддерживает сбор трафика, используя протоколы NetFlow/sFlow от множества различных источников - программные/аппаратные маршрутизаторы и коммутаторы с поддержкой NetFlow/sFlow. Продукт является коммерческим. В настоящий момент компания Nagios объявила о временной промо акции на покупку системы Network Analyzer со скидкой по цене 995$, при этом регулярная цена системы после завершения промо акции будет составлять 2495$. Анализатор позволяет выявлять характер использования полосы пропускания сети различными приложениями, а так же аномальные сетевые активности, возникающие в результате действия вредоносного ПО или сбоя оборудования. Так же Network Analyzer может осуществлять оперативное уведомление станции мониторинга, используя SNMP/SNMP trap. Сетевой анализатор может быть интегрирован штатным образом с системой мониторинга Nagios XI, либо используя механизмы API с системой стороннего производителя.