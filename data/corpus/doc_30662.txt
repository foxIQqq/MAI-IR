Google начинает продвижение формата WebP в своих сервисах. Mozilla отказывается от поддержки WebP

Компания Google объявила о выпуске обновленной версии формата кодирования изображений WebP, оптимизированного для использования в Web и не требующего при использовании лицензионных отчислений. Формат WebP основан на наработках, используемых для сжатия ключевых кадров в кодеке VP8, и позволяет обеспечить значительную степень сжатия изображений без заметной на глаз потери качества. Код обновленной версии WebP уже интегрирован в браузер Chrome 12, находящийся на стадии бета-тестирования. В новой версии значительно улучшены используемые в WebP алгоритмы сжатия, при сохранении совместимости с прошлыми выпусками формата. В код декодера добавлена поддержка нового метода масштабирования (fancy upsampler), позволяющего значительно увеличить качество линейных объектов при увеличении изображения. Также добавлена возможность инкрементального декодирования данных по мере загрузки изображения, которая позволяет отобразить картинки сразу после начала загрузки, постепенно увеличивая качество. Код кодировщика был переработан в направлении увеличения качества и борьбы с появлением артефактов, чего удалось добиться за счет оптимизации процесса разбиения изображения на сегменты с близкими параметрами сжатия. Для каждого типа сегментов теперь применяются различные настройки сжатия и фильтрации, например, легкие для восстановления сегменты сжимаются с большей потерей, а сложные области, содержащие множество разрозненных деталей, сжимаются более аккуратно c сохранением дополнительной информации. Следующим шагом, запланированным на следующий выпуск, станет добавление поддержки альфа-канала (прозрачность), реализация некоторых оптимизаций скорости кодирования и декодирования, а также публикация финального варианта спецификаций. В завершении анонса, компания Google сообщила о начале интеграции поддержки WebP в своих сервисах. Например, поддержка WebP уже интегрирована в такие продукты, как Gmail и Picasa, которые теперь позволяют манипулировать изображениями в данном формате. В дополнение, система генерации эскизов (Google Instant Previews) с целью экономии дискового пространства теперь по умолчанию сохраняет изображения в формате WebP. В ближайшее время поддержка WebP будет добавлена в систему AppEngine. Что касается сторонних продуктов, то поддержка WebP добавлена в web-браузеры Chrome и Opera, пакеты Pixelmator и ImageMagick, создан декодер на языке Java, подготовлен специальный плагин для Photoshop и модуль для http-сервера Apache. Пакет с реализацией кодировщика и декодировщика включен в состав дистрибутивов Debian, OpenSUSE и Gentoo. К сожалению, не обошлось и без проблем. Разработчики Mozilla отказались включать поддержку WebP в состав Firefox, мотивировав свое решение иллюзорностью преимуществ WebP перед JPEG, которых недостаточно для широкого внедрения еще одного формата. Более того, разработчики Mozilla не согласны c использованной Google методикой тестирования кодека, при которой изначально представленное в формате JPEG изображение было преобразовано в формат WebP и затем проанализировано при помощи критериев оценки качества PSNR (Peak Signal-to-Noise Ratio). После высказанных замечаний, подход к тестированию был изменен, и в Google стали использовать эталонные PNG-изображения с последующей оценкой качества методом SSIM (Structural Similarity). Новое тестирование показало, что изображения в формате WebP имеют на 25%-34% меньший размер, по сравнению с JPEG аналогичного качества (в первых тестах говорилось о 39%). На этот раз, критики указали на не совсем прозрачный метод определения "аналогичного качества". Из недостатков WebP также было упомянуто отсутствие поддержки субдискретизаций насыщенности 4:2:2 и 4:4:4 (в WebP поддерживается только 4:2:0), отсутствие возможности встраивания EXIF-данных, отсутствие поддержки цветовых профилей ICC и прозрачности. По мнению некоторых разработчиков Mozilla о возможности интеграции WebP в Firefox можно будет говорить только после устранения наблюдаемых в WebP недоработок и публикации окончательной версии формата.