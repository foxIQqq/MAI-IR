Выпуск системного менеджера systemd 207

Леннарт Поттеринг (Lennart Poettering) представил релиз системного менеджера systemd 207, в котором отмечены в основном исправления ошибок и незначительные улучшения. Кроме того, проведена чистка лицензионной чистоты кода, которая позволила предоставить больше кода под лицензией LGPL 2.1. Среди изменений: В реализацию опции "Restart=" добавлена поддержка проверки работоспособности сервиса через контроль поступления уведомлений от watchdog и автоматического перезапуска сервиса в случае прекращения поступления сигналов. Параметры работы watchdog задаются через опцию "WatchdogSec="; Генератор getty, отвечающий за запуск getty на всех сконфигурированных консолях, теперь запускает getty не только на первичной консоли ядра, но и на остальных консолях, перечисленных в опции "console=", что позволяет не заботиться о порядке перечисления консолей в опции "console=". В /etc/crypttab обеспечена возможность задания неограниченного числа попыток ввода пароля через указание опции "tries=0"; Обеспечено автоматическое удаление сконфигурированных PID-файлов, если PID-файл остался неудалённым после завершения процесса; В systemd-run добавлена поддержка указания относительных путей к исполняемым файлам (ранее требовалось использовать только абсолютный путь); При указании и директивах "InaccessibleDirectories=" и "ReadOnlyDirectories=" пути, начинающегося с символа "-", в случае отсутствия указанного пути не будет выведена ошибка; В командах подобных "journalctl -o" добавлена поддержка нового режима вывода "short-precise", отличающегося от "short" указанием времени с более высокой точностью (usec); В /etc/crypttab добавлена поддержка опции "discard", которая является синонимом "allow-discards"; Добавлена утилита для сохранения и восстановления установок яркости экрана между перезагрузками. Утилита сохраняет настройки яркости перед завершением работы и восстанавливает на ранней стадии загрузки; Реализована логика для автоматического определения и подключения разделов home и swap на дисках с GPT, без явного перечисления данных разделов в /etc/fstab; Systemd теперь не передаёт сервисам какие-либо переменные окружения, выставленные ядром и или initrd без их явного указания в опции "systemd.setenv="; Утилита systemd-sysctl теперь напрямую не читает содержимое /etc/sysctl.conf, но в случае такой необходимости можно поставить символическую ссылку /etc/sysctl.d/99-sysctl.conf; Команды "systemctl set-log-level" и "systemctl dump" перемещены в systemd-analyze; В systemd-run добавлена опия "--remain-after-exit", отменяющая автоматическую чистку контекста юнита после завершения процесса; В tmpfiles добавлена опция "--exclude-prefix=" для исключения определённых путей при выполнении операции; В journald добавлен автоматический сброс буфера всех сообщений на диск в случае поступления записей с приоритетом CRIT, ALERT или EMERG.