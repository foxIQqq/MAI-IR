В Chrome намерены удалить поддержку технологии Server Push

Разработчики Chrome намерены прекратить поддержку механизма Server Push в протоколах HTTP/2 и gQUIC, а также не реализовывать её для протокола HTTP/3, находящегося на стадии утверждения стандарта. В протоколе HTTP/1.1 технология Server Push не предусмотрена изначально. Причиной удаления является желание избавиться от большого усложнения в коде, на фоне невостребованности и лишь теоретических предпосылок в эффективности оптимизаций на основе Server Push. Технология Server Push определена в стандарте HTTP/2 и нацелена на оптимизацию загрузки данных. Помимо браузеров на базе движка Chromium поддержка Server Push в настоящее время реализована в Firefox и Safari, а на стороне сервера в nginx и в Apache httpd. При помощи Server Push сервер может отправить ресурсы клиенту, не дожидаясь их явного запроса. Предполагается, что таким образом сервер может ускорить загрузку страницы, так как необходимые для отрисовки страницы файлы CSS, скрипты и изображения к моменту запроса клиентом окажутся уже переданными на его сторону. Клиент подключается и запрашивает определённую страницу, после этого сервер на основании своих настроек или содержимого переданного клиентом заголовка Link сам инициирует передачу определённых ресурсов через уже установленное соединение HTTP/2, не дожидаясь запроса этих ресурсов от клиента. Переданный через push-обращение контент сохраняется на стороне клиента в специальном кэше, ассоциированном с текущим HTTP/2-соединением. Когда в процессе обработки страницы клиент дойдёт до запроса связанных с ней ресурсов (css, js, картинки и т.п.), перед фактической отправкой каждого запроса выполняется проверка в кэше. Если ресурс уже передан сервером и находится в кэше, то клиент загружает этот ресурс из локального кэша не формируя внешний запрос к серверу. Поддержание подобного кэша сильно усложняет реализацию Server Push на стороне клиента, но не приводит к заметному ускорению загрузки по сравнению с упреждающим запросом ресурсов через тег "preload", а по данным некоторых исследований даже увеличивает задержки. По статистике Google технология Server Push не получила должного распространения. Например, за последние 28 дней в 99.95% соединений HTTP/2 не применялся Server Push. Аналогичные показатели наблюдались при проведении исследования в июне 2019 года, т.е. рост внедрений Server Push не наблюдается. Более того, в нынешнем году лишь 40% полученных Server Push отправлений были использованы браузером, а два года назад этот показатель составлял 63.51% (необработанные отправления были некорректными, не соответствовали обрабатываемой странице или уже были в кэше). Вместо Server Push для оптимизации загрузки страниц предлагается использовать тег <link rel="preload">, на основании которого браузер может запросить ресурс не дожидаясь его использования на странице. C одной стороны, preload по сравнению с Server Push приводит к лишнему обмену пакетами (RTT), но с другой стороны позволяет избежать отправки ресурсов, которые уже имеются в браузерном кэше. В целом отличия в задержках при использовании Server Push и preload отмечены как несущественные. Кроме оптимизации загрузки ресурсов механизм Server Push также может использоваться для потоковой передачи данных от сервера клиенту, но для этих целей лучше подходит протокол WebTransport (на базе QUIC), стандартизация которого находится на стадии черновика.