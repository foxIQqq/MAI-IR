Первый тестовый выпуск Asahi Linux, дистрибутива для устройств Apple с чипом M1

Проект Asahi, нацеленный на портирование Linux для работы на компьютерах Mac, оснащённых ARM-чипом Apple M1 (Apple Silicon), представил первый альфа-выпуск эталонного дистрибутива, позволяющий любому желающему ознакомиться с текущим уровнем развития проекта. Дистрибутив поддерживает установку на устройствах с M1, M1 Pro и M1 Max. Отмечается, что сборки пока не готовы для повсеместного использования обычными пользователями, но уже пригодны для начального ознакомления разработчиками и продвинутыми пользователями. Asahi Linux базируется на пакетной базе Arch Linux, включает традиционный набор программ и поставляется с рабочим столом KDE Plasma. Дистрибутив построен с использованием штатных репозиториев Arch Linux, а все специфичные изменения, такие как ядро, инсталлятор, загрузчик, вспомогательные скрипты и настройки окружения, вынесены в отдельный репозиторий. При этом проект нацелен на обеспечение работы Linux на системах Apple M1 в общем виде и готов способствовать появлению подобной поддержки в любых дистрибутивах. Для установки дистрибутива подготовлен запускаемый из macOS shell-скрипт ("curl https://alx.sh | sh"), который в зависимости от выбранной начинки загружает от 700 МБ до 4 ГБ данных и формирует окружение с Linux, которое можно использовать параллельно с уже имеющейся системой macOS. Для установки требуется как минимум 53 ГБ свободного дискового пространства (15 ГБ для Linux-дистрибутива и 38 ГБ резерв для корректной установки обновлений macOS). Установка Asahi Linux не нарушает работу существующего окружения macOS за исключением уменьшения размера дискового раздела, используемого в macOS. Заявлено об обеспечении корректной работы в дистрибутиве Wi-Fi, USB2 (порты Thunderbolt), USB3 (порты Mac Mini Type A), экрана, накопителей NVMe, Ethernet, ридера SD-карт, датчика закрытия крышки ноутбука (lid switch), встроенного экрана, клавиатуры, тачпада, управления подсветкой клавиатуры, переключения частоты CPU, получения информации о заряде аккумулятора. На системах M1 также работает разъём подключения наушников, а на устройствах Mac Mini доступен вывод через HDMI. Из компонентов, реализация поддержки которых находится на финальной стадии и в ближайшее время будет доступна, называются USB3, встроенные громкоговорители и контроллер экрана (подсветка, V-Sync, управление энергопотреблением). Среди пока не поддерживаемых компонентов: ускорение обработки графики средствами GPU, аппаратное ускорение видеокодеков, DisplayPort, камера, сенсорная панель (Touch Bar), Thunderbolt, HDMI в MacBook, Bluetooth, ускоритель для систем машинного обучения, глубокие режимы экономии энергии CPU. В дистрибутиве доступны все штатные пакеты из репозиториев Arch Linux, но с некоторыми приложениями наблюдаются отдельные нерешённые проблемы, возникающие главным образом из-за сборки ядра с размером страниц памяти 16 КБ. Например, наблюдаются проблемы с Chromium, Emacs, lvm2, f2fs и пакетами, в которых используется библиотека jemalloc (например, Rust) или платформа electron (vscode, spotify и т.п.). Наблюдались проблемы с приложениями, использующими библиотеки libunwind и webkitgtk, но для них уже сформированы исправления. Дистрибутив можно использовать не опасаясь возникновения юридических проблем - компания Apple в штатном режиме разрешает загружать на своих компьютерах незаверенные цифровой подписью ядра без необходимости применения jailbreak. Проект полностью легальный, так как в порте не используется код из macOS и Darwin, а особенности взаимодействия с аппаратным обеспечением определены на основе обратного инжиниринга, проведение которого с целью обеспечения совместимости разрешено законом во многих странах. Дополнение: Объявлено о начале тестирования сборки OpenBSD для Apple M1, для использования которой требуется установка подготовленных проектом Asahi Linux UEFI-окружение и U-Boot (вначале нужно поставить Asahi в режиме минимальной установки, а затем подключить USB Flash с образом OpenBSD и активировать его во время перезагрузки в U-Boot для запуска инсталлятора OpenBSD). Возможности окружения OpenBSD в области поддержки оборудования примерно на том же уровне, что и Asahi Linux.