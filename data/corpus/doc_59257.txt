В Asahi Linux, дистрибутиве для ARM-чипов Apple, появилась поддержка OpenGL 3.1

Разработчики проекта Asahi, нацеленного на портирование Linux для работы на компьютерах Mac, оснащённых ARM-чипами, разработанными компанией Apple, подготовили июньское обновление дистрибутива (560 МБ и 3.5 ГБ) и опубликовали отчёт о реализации в дистрибутиве поддержки OpenGL 3.1. Asahi Linux базируется на пакетной базе Arch Linux, включает традиционный набор программ и поставляется с рабочим столом KDE Plasma. Дистрибутив построен с использованием штатных репозиториев Arch Linux, а все специфичные изменения, такие как ядро, инсталлятор, загрузчик, вспомогательные скрипты и настройки окружения, вынесены в отдельный репозиторий. Для поддержки GPU AGX чипов Apple M1 и M2 развивается два драйвера, работающих в сопряжении друг с другом: DRM-драйвер (Direct Rendering Manager) drm-asahi для ядра Linux, написанный на языке Rust, и драйвер asahi для Mesa, написанный на языке Си. Работающий на уровне ядра драйвер изначально развивается с учётом будущей поддержки API Vulkan, а программный интерфейс для взаимодействия с пространством пользователя спроектирован с оглядкой на UAPI, предоставляемый новым драйвером Intel Xe. Так как в чипах Apple M1/M2 применяется собственный GPU, выполняющий закрытую прошивку и использующий достаточно сложные совместно используемые структуры данных, при разработке независимых драйверов применяется обратный инжиниринг драйверов из macOS. Mesa-драйвер обеспечивает поддержку OpenGL в пространстве пользователя и теперь успешно проходит тесты совместимости с OpenGL ES 3.0 и OpenGL 3.1 (в декабре поддерживались OpenGL ES 2.0 и OpenGL 2.1), что расширило спектр игр и программ для работы с графикой, которые можно запускать в окружении Asahi Linux. В ближайшее время также планируется завершить работу по обеспечению поддержки OpenGL ES 3.1 и вычислительных шейдеров. Конечной целью проекта, которая позволит реализовать возможность запуска современных игр, является создание драйвера для графического API Vulkan, в котором планируют задействовать часть уже протестированного типового кода, используемого в драйверах для OpenGL.