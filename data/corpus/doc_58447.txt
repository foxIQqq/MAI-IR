Проект Valetudo развивает модификации прошивок для локального управления роботами-пылесосами

Опубликован выпуск проекта Valetudo 2023.01.0, предлагающего открытое решение для избавления роботов-пылесосов от привязки к облачным сервисам. Многие модели роботов-пылесосов поддерживают управление через мобильное приложений или сайт, но ценой подобной возможности является привязка к внешнему облачному сервису производителя. Valetudo развивает набор изменений для штатных прошивок, позволяющих заменить привязку к облаку на полностью подконтрольный пользователю интерфейс, не обращающийся к внешним хостам. Код интерфейса написан на JavaScript (серверная часть использует Node.js) и распространяется под лицензией Apache 2.0. Проектом поддерживается более 20 моделей роботов-пылесосов, производимых такими компаниями, как Xiaomi, Dreame, Roborock, MOVA, Viomi, Cecotec и Proscenic. Установка Valetudo требует получения root-доступа к программному окружению робота и внесения изменений в прошивку (получение root и модификация производится через подключение робота по USB, UART или через Wi-Fi). После модификации прошивки для управления роботом достаточно подключиться к предоставляемой роботом точке доступа беспроводной сети и открыть в web-браузере страницу с IP-адресом устройства (например, http://192.168.5.1). Для упрощения подключения к роботу также можно использовать специально развиваемое мобильное приложение. Поддерживается интеграция Valetudo с системами умного дома на базе платформ домашней автоматизации OpenHab и Home Assistant. При помощи Valetudo пользователь может получить полный контроль над своим устройством, защититься от передачи данных (например, карты помещения) в сторонние сервисы, избавиться от привязки к стороннему поставщику и не зависеть от наличия интернет-соединения, возможных проблем в облачной инфраструктуре и закрытии компании-производителя. При этом так как родная прошивки не заменяется, а модифицируется, в устройстве сохраняются все штатные функции по управлению очисткой, навигации по помещении и выбору стратегий обхода. Пользователь может определять расписание работы и изменять различные параметры устройства, такие как громкость уведомлений, скорость забора воздуха и расход воды. Имеется поддержка выставления виртуальных стен для ограничения движения в заданных местах, назначения зон не требующих очистки, и наглядного отслеживания процесса чистки и обхода помещений. Из расширенных возможностей отмечается поддержка экспорта построенных роботом карт помещений, которые например, можно преобразовать в уровень для Minecraft или игр на базе движка Source. Отдельно развивается дополнение, позволяющее использовать робота для построения карты беспроводной сети, оценивающей качество приёма в различных частях квартиры. Среди изменений в новом выпуске (2023.01.0): Реализована поддержка роботов-пылесосов, выпускаемых под брендом Viomi: Proscenic M6 Pro, Cecotec Conga 3290 и Cecotec Conga 3790. В будущем ожидается поддержка моделей Viomi SE, Cecotec Conga 3xxx, Wyze Robot Vacuum, Commodore CVR 200 и Kärcher RCV 3. Улучшена поддержка устройств Roborocks. Добавлена поддержка устройства Roborocks Q7 Max. В ближайшее время ожидается публикация обновлений прошивок для моделей S5 Max и S7. Переработан интерфейс для отображения карты помещения в live-режиме (Live Map), который стал более удобен и понятен для новичков. Добавлены новые пиктограммы и обновлены пиктограммы в меню. Добавлен новый диалог первого запуска с информацией, полезной для новых пользователей. Добавлено новое подменю с настройками. Добавлена кнопка для сброса настроек в исходное состояние. Дополнение Tray Companion, позволяющее отображать в системном лотке индикатор обнаружения устройств на базе Valetudo (определяются через широковещательные запросы Bonjour/mDNS) адаптировано для работы в Linux (ранее поддерживался только Windows).