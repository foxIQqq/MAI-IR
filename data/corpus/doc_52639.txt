Доступен дистрибутив для создания сетевых хранилищ OpenMediaVault 5

После почти двух лет с момента формирования прошлой значительной ветки состоялся релиз дистрибутива OpenMediaVault 5, нацеленного на быстрое развёртывание сетевого хранилища (NAS, Network-Attached Storage). Проект OpenMediaVault основан в 2009 году после раскола в стане разработчиков дистрибутива FreeNAS, в результате которого наряду с основанным на FreeBSD классическим FreeNAS было создано ответвление, разработчики которого поставили перед собой цель перевести дистрибутив на ядро Linux и пакетную базу Debian. Для загрузки подготовлены установочные образы OpenMediaVault для архитектуры x86_64 (586 Мб). Основные новшества: Пакетная база обновлена до Debian 10 (Buster). Осуществлён переход на использование системы централизованного управления конфигурацией SaltStack для развёртывания и синхронизации настроек. Например, для развёртывания конфигурации новой системы в соответствие с параметрами из конфигурационной БД теперь достаточно выполнить "omv-salt stage run all". Вместо утилиты omv-mkconf предложена новая команда omv-salt, которую можно использовать для создания файлов конфигурации. Вместо утилиты omv-initsystem добавлена команда "omv-confdbadm populate", которая определяет текущие настройки и синхронизирует их с конфигурационной БД. В механизм резервного копирования Time Machine добавлена поддержка разделов SMB/CIFS. Для обработки кнопки выключения задействован systemd-logind. Для инициирования перезагрузки, завершения работы и перехода в спящий режим задействован systemd. Вместо ntpd для синхронизации точного времени использован chrony. Для настройки сети задействован systemd. Выполнение операции TRIM (передача устройствам хранения сведений о неиспользуемых блоках) на лету заменено на запуск подобной работы по расписанию. Добавлен бэкенд для использования хранилищ на базе RAID-контроллеров Areca. Из-за проблем со стабильностью для новых установок по умолчанию отключена поддержка совместных каталогов ("/sharedfolder/"). Для включения следует установить переменную "OMV_SHAREDFOLDERS_DIR_ENABLED=YES" и запустить команды "omv-salt stage run prepare" и "omv-salt deploy run systemd". Обеспечено запоминание размера и позиции окон. На основном экране реализовано отображение подсказки о появлении обновления. Добавлен вывод предупреждения о перезагрузке. Напомним, что OpenMediaVault рассматривает в качестве приоритетных направлений разработки расширение поддержки встраиваемых устройств и создание гибкой системы установки дополнений, в то время как ключевым направлением развития FreeNAS является задействование возможностей файловой системы ZFS. По сравнению с FreeNAS, достаточно сильно переработан механизм установки дополнений, вместо смены "прошивки" целиком для обновления OpenMediaVault используются штатные средства обновления отдельных пакетов и полноценный инсталлятор, позволяющий выбирать необходимые компоненты в процессе установки. Управляющий web-интерфейс OpenMediaVault написан на PHP с использованием JavaScript-фреймворка ExtJS и отличается загрузкой данных по мере необходимости при помощи технологии Ajax без перезагрузки страниц (web-интерфейс FreeNAS написан на языке Python с использованием фреймворка Django). В интерфейсе присутствуют функции организации совместного доступа к данным и разделения привилегий (в том числе поддержка ACL). Для мониторинга можно использовать SNMP (v1/2c/3), кроме того присутствует встроенная система отправки уведомлений о проблемах на email (включая отслеживание состояния дисков через S.M.A.R.T. и контроль работы системы обеспечения бесперебойного питания). Из связанных с организацией работы хранилища базовых сервисов можно отметить: SSH/SFTP, FTP, SMB/CIFS, клиент DAAP, RSync, клиент BitTorrent, NFS и TFTP. В качестве файловой системы можно использовать EXT3, EXT4, XFS и JFS. Так как дистрибутив OpenMediaVault изначально нацелен на расширение функциональности через подключение дополнений, отдельно развиваются плагины с реализацией поддержки AFP (Apple Filing Protocol), сервера BitTorrent, сервера iTunes/DAAP, LDAP, iSCSI target, UPS, LVM и антивируса (ClamAV). Поддерживается создание программных RAID (JBOD/0/1/5/6) с использованием mdadm.