Улучшения ZFS, ожидаемые в Solaris 11 Express 2010.11

В первом тестовом выпуске новой ветки Solaris - Solaris 11 Express 2010.11, выход которого запланировать на следующий месяц, ожидается интеграция в файловую систему ZFS ряда новшеств: Поддержка шифрования данных в ZFS-разделах. Данная возможность уже на протяжении семи лет возглавляет список самых желаемых функций ZFS. Шифрование можно будет использовать как для файловых систем, так и для дисковых разделов в пуле и ZVOL-дампов. Поддержка шифрования разработана в рамках открытого проекта ZFS-Crypto и недавно добавлена в сборку OpenSolaris snv_148, что дает возможность скорого переноса данной функции во FreeBSD и Illumos, остальные возможности перечисленные в данном обзоре, будут доступны для разработчиков открытого ПО только после выхода релиза Solaris 11 во второй половине следующего года. Гибридный аллокатор для RAID-Z/mirror. Ранее для зеркал и RAID-Z использовались отдельные виртуальные устройства (vdev), которые хранили только отзеркалированные и RAID-Z данные. Отныне чувствительные к задержкам мета-данные будут использовать идентичные зеркалам структуры и для дочерних RAID-Z vdev, что гарантирует доступность этих метаданных в рамках одной операции ввода/вывода. Поддержка распаковки, проверки контрольных сумм и RAID-Z в команде "zdb -R" позволит упростить отладку ZFS на предмет ошибок на диске и даст возможность более детального изучения формата хранения ZFS-данных на диске; Оптимизация производительности ZFS. Из пока нереализованных значительных возможностей ZFS, давно находящихся в планах, отмечается механизм переписывания указателей на блоки, позволяющий шифровать, сжимать и избавляться от дубликатов для уже записанных в пулах данных, а также уменьшать размер пула и проводить дефрагментацию без необходимости временного перемещения данных из пула.