Выпущен первый кандидат в релизы ядра Linux 3.8 (3.8-rc1)

Линус Торвальдс анонсировал первый кандидат в релизы ядра Linux 3.8 (rc1), который ознаменовал закрытие окна по приёму новшеств (merge window) в ветку 3.8. Линус отметил, что по числу принятых изменений это было одно из самых больших окон приёма новшеств, рекордное для ветки 3.х. По соотношению изменений не отмечается ничего необычного: 63% всех патчей касаются драйверов устройств (staging, networking, scsi, gpu, sound, drbd и т.д.), 18% относятся к поддержке архитектур (основная масса изменений касается платформ на основе ARM), а остальные изменения размазаны по различны подсистемам, таким как сетевая подсистема, файловые системы, include-файлам и т.п. Среди принятых новшеств: Прекращена поддержка процессоров 386-DX/SX. Целью подобного шага является желание упростить поддержку некоторых структур ядра, изменение которых затрудняет наличие дополнительного кода, необходимого для поддержки процессоров 386-DX/SX. Например, для работы на системах i386 в функции sync_core(), используемой для организация синхронизации в режиме SMP, необходимо обеспечить поддержку процессоров без CPUID; В состав ядра принята разработанная компанией Samsung файловая система F2FS (Flash-Friendly File System), ориентированная для использования на Flash-памяти; Добавлена большая порция улучшений и исправлений для файловой системы Btrfs; В файловой системе XFS появился новый механизм верификации для выявления повреждённых данных при сбоях чтения с носителя; В файловой системе Ext4 добавлена поддержка inline-хранения данных, что позволяет значительно увеличить эффективность хранения очень мелких файлов за счёт размещения данных прямо внутри inode, что значительно сэкономит дисковое пространство; Проведена работа по ускорению криптографических операций (например, ускорены шифры camellia,cast5, serpent, twofish, cast6) с использованием набора команд AVX на новых процессорах Intel. Оптимизирована реализация crc32c; Приняты патчи с реализацией поддержки механизма "huge zero_page", который в некоторых ситуациях позволит существенно (до 2.5 раз) сократить потребление физической памяти при включении в ядре поддержки Transparent Huge-Pages (THP). Huge zero_page расширяет возможности THP в направлении экономии пустых страниц памяти, для которых не выделяются реальные области физической памяти; Поддержка DMA-BUF для V4L2, что позволит организовать совместное использование буферов между V4L2-драйверами и иными драйверами. Например, графический драйвер сможет забирать данные из буфера V4L2 напрямую, не совершая операций копирования; Реализация технологии A-Sync DMA Engines для драйвера Radeon, что даст возможность GPU копировать или перемещать данные даже когда шейдерная часть занята рендерингом сцен; Добавление нового 2D-драйвера для платформ Tegra 2 и Tegra 3, созданного при поддержке компании NVIDIA; В подсистему контроля простоя CPU (cpuidle) добавлена возможность привязки к каждому из процессоров разных драйверов для управления параметрами CPU в зависимости от загруженности процессора. Подобное необходимо для обеспечения поддержки асимметричных архитектур, таких как big.LITTLE; Для гостевых систем под управлением Microsoft Hyper-V добавлен balloon-драйвер, позволяющий исключить дублирование идентичных областей памяти в разных виртуальных окружениях; При выполнении mmap() или через SYSV IPC приложение может самостоятельно определить необходимый размер страниц памяти (Huge-Pages); Для архитектуры x86 добавлена поддержка горячего подключения/отключения базового CPU ("CPU0"), используемого при загрузке (ранее процессор, используемый для загрузки, не мог быть в последующем отключён); Поддержка SoC Broadcom BCM281XX, Allwinner A1X, Samsung EXYNOS5440, а также плат USI Topkick, ZyXEL NSA-310 и MPL CEC4. Поддержка контроллеров карт памяти Wondermedia SD/MMC и Realtek PCI-E SD/MMC; Поддержка процессоров POWER8 с улучшенной поддержкой многопоточности (SMT, Simultaneous Multi-Threading), выпуск которых должен начаться в 2013 году; Поддержка звуковых устройств: кодека VIA HD, устройств FastTrack C400 USB, PSC724 Ultiimate Edge, Stanton SCS.1d/1m FireWire, Freescale/iVeia P1022 и Maxim MAX98090; В драйвер hid-multitouch добавлена поддержка мультитач протокола, используемого в Windows 8.