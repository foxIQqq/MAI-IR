Для Android реализована возможность применения штатных видеодрайверов Linux

В ходе совместной работы инженеры из Collabora и Google подготовили прослойку "drm_hwcomposer", обеспечивающую работу графической подсистемы платформы Android поверх штатного графического стека ядра Linux и API DRM (Direct Rendering Manager). Код прослойки drm_hwcomposer принят в основной репозиторий проекта Chrome OS. Напомним, что в Android применяются специфичные видеодрайверы, работающие в пространстве пользователя и предоставляющие интерфейс для доступа к графическому оборудованию через API Hardware Composer (HWC). Прослойка "drm_hwcomposer" работает поверх mesa и libdrm, обеспечивая трансляцию API DRM в API HWC, что позволяет реализовать поддержку HWC на базе обычных DRM-драйверов. При этом SurfaceFlinger, композитный менеджер Android, продолжает использовать API HWC и не требует модификации. Прослойка может работать только с ядрами Linux 4.10 и новее, так как завязана на использовании появившегося в ядре 4.10 механизма "explicit fencing" (in-fence/out-fence), позволяющего управлять синхронизацией буферов между устройствами из пространства пользователя. Поддержка "explicit fencing" в ядре также дала возможность обеспечить поддержку в прослойке нового API HWC2, представленного в Android 7.0. Демонстрируя возможности прослойки, разработчики запустили Android на плате Dragonboard 410c поверх Freedreno, свободного видеодрайвера для графической подсистемы чипов Qualcomm. Freedreno поддерживает в том числе GPU Adreno (A5XX), применяемые в SoC Snapdragon 820 и 821, которые используются во многих современных смартфонах, с видеоподсистемами которых до сих пор можно было взаимодействовать только через проприетарные драйверы. Прослойка может подтолкнуть вперёд развитие проекта Replicant, в рамках которого развивается полностью открытый вариант платформы Android, избавленный от проприетарных компонентов и закрытых драйверов, разработка которого во многом буксует из-за отсутствия открытых Android-драйверов для GPU популярных мобильных SoC.