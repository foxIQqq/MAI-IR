Новый выпуск дистрибутива Raspberry Pi OS, обновлённый до Debian 11

Разработчики проекта Raspberry Pi опубликовали осеннее обновление дистрибутива Raspberry Pi OS (Raspbian), основанного на пакетной базе Debian. Для загрузки подготовлены три сборки - сокращённая (463 МБ) для серверных систем, с рабочим столом (1.1 ГБ) и полная с дополнительным набором приложений (3 ГБ). Дистрибутив поставляется с пользовательским окружением PIXEL (ответвление от LXDE). Для установки из репозиториев доступно около 35 тысяч пакетов. В новом выпуске: Осуществлён переход на пакетную базу Debian 11 "Bullseye" (ранее использовался Debian 10). Все компоненты рабочего стола PIXEL и предлагаемые приложения переведены на использование библиотеки GTK3 вместо GTK2. В качестве причины миграции называется желание избавиться от пересечения в дистрибутиве разных версий GTK - в Debian 11 активно используется GTK3, но рабочий стол PIXEL был основан на GTK2. До сих пор миграция рабочего стола на GTK3 сдерживалась тем, что многие вещи, особенно связанные с настройкой внешнего вида виджетов, было значительно проще реализовать на GTK2, а в GTK3 были удалены некоторые полезные возможности, используемые в PIXEL. Переход потребовал внедрения замен для старых возможностей GTK2 и немного отразился на внешнем виде виджетов, но разработчики позаботились о том, что бы интерфейс сохранил привычный вид. По умолчанию задействован композитный оконный менеджер Mutter. Ранее скруглённые углы всплывающих подсказок обрабатывались силами GTK2, но в GTK3 подобные операции были делегированы композитному менеджеру. По сравнению с ранее используемым оконным менеджером Openbox в Mutter обеспечивается предварительное формирование образа содержимого экрана в памяти (композитинг), перед фактическим выводом на экран, что позволяет реализовать дополнительные визуальные эффекты, такие как закругление углов окон, тени на границе окна и анимация открытия/закрытия окон. Миграция на Mutter и GTK3 также позволяет избавиться от привязки к протоколу X11 и в будущем обеспечить поддержку работы поверх Wayland. Обратной стороной перехода на Mutter стало увеличение потребления памяти. Отмечается, что платы Raspberry Pi с 2 ГБ ОЗУ для работы достаточно, но меньшего объёма памяти уже не хватает для графического окружения. Для плат с 1 ГБ ОЗУ предусмотрен запасной режим, возвращающий Openbox, в котором ограниченны возможности оформления интерфейса (например, показываются прямоугольные всплывающие подсказки вместо скруглённых и нет визуальных эффектов). Реализована система вывода уведомлений, которая может быть использована в панели задач, в плагинах к панели и в различных приложениях. Уведомления выводятся в верхнем правом углу экрана в хронологическом порядке и автоматически закрываются через 15 секунд после появления (или могут быть сразу закрыты вручную). В настоящее время уведомления выводятся только при готовности к извлечению USB-устройств, при опасно низком заряде аккумулятора, при наличии обновлений и при выявлении ошибок на уровне прошивок. В настройки добавлены опции для изменения таймаута или отключения показа уведомлений. Для панели реализован плагин с графическим интерфейсом для проверки наличия и установки обновлений, упрощающий поддержание системы и приложений в актуальном состоянии, и позволяющий обойтись без ручного запуска пакетного менеджера apt в терминале. Проверка наличия обновлений осуществляется при каждой загрузке или каждые 24 часа. При обнаружении новых версий пакетов в панели показывается специальный значок и выводится уведомление. При клике на значке выводится меню, через которое можно вызвать интерфейс для просмотра списка обновлений, ожидающих установки, и инициировать выборочную или полную установку обновлений. В файловом менеджере сокращено число режимов просмотра - вместо четырёх режимов (миниатюры, пиктограммы, мелкие пиктограммы и список) предложено два - миниатюры и список, так как режимы миниатюр и пиктограмм по сути отличались лишь размером пиктограмм и показом эскизов содержимого, что вводило пользователей в заблуждение. Отключение показа эскизов содержимого управляется специальной опцией в меню View, а размер можно менять кнопками масштабирования. Задействован по умолчанию KMS-драйвер modesetting, не привязанный к конкретным типам видеочипов и по своей сути напоминающий драйвер VESA, но работающий поверх интерфейса KMS, т.е. его можно использовать на любом оборудованием, для которого имеется работающий на уровне ядра драйвер DRM/KMS. Ранее для графической подсистемы Raspberry Pi предлагался специфичный драйвер, включающий закрытые компоненты прошивки. Использование штатного интерфейса KMS и задействование драйвера, предлагаемого в ядре Linux, позволяет избавиться от привязок к специфичному для Raspberry Pi проприетарному драйверу и даёт возможность работы с графической подсистемой приложений, рассчитанных на стандартный для Linux API. Проприетарный драйвер для работы с камерой заменён на открытую библиотеку libcamera, предлагающую универсальный API. В приложении Bookshelf предложен бесплатный доступ к PDF-выпускам журнала Custom PC. Обновлены версии программ, в том числе задействован браузер Chromium 92 с оптимизациями для аппаратного ускорения воспроизведения видео. Улучшен выбор часового пояса и параметров локализации в мастере начальной настройки.