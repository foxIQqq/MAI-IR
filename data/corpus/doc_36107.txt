Релиз NSH 1.0, командной оболочки для настройки сетевых компонентов OpenBSD

Анонсирован первый стабильный релиз проекта NSH, в рамках которого развивается унифицированная командная оболочка для создания простых в управлении сетевых устройств на базе OpenBSD, таких как сетевые шлюзы, маршрутизаторы и межсетевые экраны. NSH объединяет одним CLI-интерфейсом набор типовых утилит OpenBSD, таких как ifconfig, pf, ipsecctl и route, а также сводит в одно место конфигурацию таких сетевых сервисов, как ospfd, bgpd, ripd, dhcpd, snmpd, sshd, ntpd, npppd, inetd, smtpd и ldapd, предоставляя собственную реализацию /etc/netstart и компонентов /etc/rc. Код NSH поставляется под лицензией BSD. Метод настройки при использовании NSH напоминает интерфейс Cisco IOS. Например, для просмотра параметров сетевого интерфейса в оболочке следует выполнить команду "show interface". Перед выполнением изменений, требуется перейти в привилегированный режим при помощи команды "enable". При настройке параметров сетевого интерфейса можно ввести команду "interface fxp0", после чего на втором уровне конфигурации установить IP "ip 100.64.0.2/30" или настроить VLAN "vlan 4 parent fxp3". Для включения сервиса DHCP следует дать команду "dhcp enable". После внесения изменений следует записать конфигурацию командой "write". Итоговые настройки будут сохранены в файл /etc/nshrc, который будет использован для восстановления текущего состояния после перезагрузки. Для примера можно привести готовые конфигурации домашнего шлюза, BGP и OSPF маршрутизатора, корпоративного шлюза (NAT, DHCP, SNMP). По сравнению с тестовыми выпусками в NSH 1.0 добавлена поддержка IPv6, обеспечена полная поддержка таблиц маршрутизации, включая конфигурацию демонов маршрутизации (ospfd, bgpd, ripd). Каждый демон может быть настроен для работы со своей таблицей маршрутизации, не пересекающейся с другими демонами. Для хранения временных данных задействована БД SQLite. В команде ctl добавлена поддержка настройки tftpd, tftp-proxy, ospf6d, npppd. Обеспечена корректная поддержка CARP и pfsync.