Google опубликовал план прекращения поддержки второй версии манифеста Chrome

Компания Google представила график прекращения поддержки второй версии манифеста Chrome в пользу третьей версии, которая является объектом критики из-за нарушения работы многих дополнений для блокирования нежелательного контента и обеспечения безопасности. В том числе ко второй версии манифеста привязан популярный блокировщик рекламы uBlock Origin, который не может быть переведён на третью версию манифеста из-за прекращения поддержки блокирующего режима работы API webRequest. Начиная с 17 января 2022 года в каталог Chrome Web Store перестанут приниматься дополнения, использующие вторую версию манифеста, но разработчики ранее добавленных дополнений, как и раньше, смогут публиковать обновления. В январе 2023 года в Chrome будет прекращена поддержка второй версии манифеста и все привязанные к нему дополнения перестанут работать. Одновременно будет запрещена публикация обновлений для подобных дополнений в Chrome Web Store. Напомним, что в третьей версии манифеста, определяющем предоставляемые дополнениям возможности и ресурсы, в рамках инициативы по усилению безопасности и конфиденциальности вместо API webRequest предложен ограниченный по своим возможностям API declarativeNetRequest. В то время как API webRequest позволяет подключать собственные обработчики, имеющие полный доступ к сетевым запросам и способные на лету модифицировать трафик, API declarativeNetRequest лишь предоставляет доступ к встроенному в браузер готовому движку для фильтрации, самостоятельно обрабатывающему правила блокировки, не разрешающему использовать собственные алгоритмы фильтрации и не позволяющему задавать сложные правила, перекрывающие друг друга в зависимости от условий. По заявлению компании Google она продолжает работу над реализацией в declarativeNetRequest возможностей, востребованных в дополнениях, использующих webRequest, и намерена привести новый API к виду, полностью отвечающему потребностям разработчиков существующих дополнений. Например, Google уже учёл пожелания сообщества и добавил в API declarativeNetRequest поддержку использования нескольких статических наборов правил, фильтрации по регулярным выражениям, модификации HTTP-заголовков, динамического изменения и добавления правил, удаления и замены параметров запросов, фильтрации с привязкой ко вкладкам и создания специфичных для определённых сеансов наборов правил. В ближайшие месяцы дополнительно планируется реализовать поддержку динамически настраиваемых скриптов обработки контента и возможность хранения данных в оперативной памяти.