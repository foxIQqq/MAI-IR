Сравнение производительности файловых систем XFS, Reiser4 и ext4

Представлены результаты тестирования производительности XFS, reiser4, ext4. Для оценки производительности использовался пакет IOZONE 3.283, тесты проводились в openSUSE 11.4 с ядром Linux 2.6.38.2 SMP PREEMPT x86_64 c патчами Reiser4 и BFQ. При форматировании раздела XFS были использованы опции "-l size=128m -d agcount=16", для Reiser4 и EXT4 были использованы параметры по умолчанию. При монтировании, Reiser4 монтировался по умолчанию, EXT4 - "noatime,barrier=1,data=writeback", XFS - "noatime,nodiratime,logbufs=8,logbsize=256k". В тесте чтения Reiser4 уступает остальным в два и более раза. XFS и Ext4 показали одинаковые результаты, с отклонениями в пределах погрешности измерений. При этом, нагрузка на процессор при использовании XFS и EXT4 оказалась значительно выше ФС Reiser4, которая отличилась линейностью загрузки процессора в зависимости от читаемого размера файла. До половины теста записи лидировал, хоть и незначительно, XFS, но после записи файлов блоками по 8 мегабайт в лидерство вырвался EXT4, и в результате обогнал XFS на полугигабайтных файлах, примерно на 10 Мб/сек. Reiser4 уступи примерно на 20 Мб/сек. В использовании процессора при записи, XFS лидировал потребляя в среднем на 5% меньше других. EXT4 спокойно и ровно дошел до 30% на полугигабайтных файлах. Зато у Reiser4 образовалась интереснейшая «горбушка», на графике, в диапазоне файлов от 2Mб до 16Мб, но средняя загрузка схожа с ext4. Так же, интересный момент у XFS, тут выделяются три линии, это записи блоками по 8, 16 и 32 килобайта.