Опубликован план продвижения в ядро Linux драйвера Xe для GPU Intel

Дэниел Веттер (Daniel Vetter), инженер из компании Intel и один из сопровождающих подсистему DRM, опубликовал в списке рассылки разработчиков ядра Linux план продвижения патчей с реализацией драйвера Xe, предназначенного для использования с GPU на базе архитектуры Intel Xe, которая используется в видеокартах семейства Arc и интегрированной графике, начиная с процессоров Tiger Lake. Драйвер Xe позиционируется как основа для обеспечения поддержки новых чипов, не привязанная к коду для поддержки старых платформ. В течение 2023 года патчи планируется довести до пригодности тестирования энтузиастами, а также по возможности провести рецензирование разработчиками, не связанными с компанией Intel. При оптимистичном сценарии драйвер будет принят в основной состав ядра в конце года. В настоящее время включению в основной состав ядра мешает то, что код изначально был разработан за закрытыми дверями в отдельной ветке ядра и теперь необходимо провести дополнительную работу по его интеграции с актуальной кодовой базой. Учитывая недавний негативный опыт затягивания интеграции в ядро значительных изменений для драйвера AMD, приведший к необходимости переписывания части кода, для упрощения продвижения подготовленной кодовой базы драйвера Xe в основное ядро предлагается предварительно достичь консенсуса в вопросах реализации планировщика и взаимодействия с другими драйверами. Драйвер Xe построен с использованием новой архитектуры, в которой более активно используются уже существующие компоненты подсистемы DRM (Direct Rendering Manager), а также типовые компоненты драйвера i915, не привязанные к конкретным GPU, например, код для взаимодействия с экранами, модель памяти и реализация execbuf. В драйверах Xe и i915 планируется обеспечить совместное использование общего кода, чтобы избежать дублирования типовых компонентов. В Mesa работа OpenGL и Vulkan поверх драйвера Xe реализована на уровне изменений, внесённых в существующие Mesa-драйверы Iris и ANV.