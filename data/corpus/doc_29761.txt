Pqc и pgwatch - новые инструменты для кэширования запросов и мониторинга PostgreSQL

Представлены два новых полезных приложения для PostgreSQL: Pqc (PostgreSQL Query Cache) - система кэширования запросов к PostgreSQL, позволяющая увеличить производительность СУБД при большом объеме типовых запросов в десятки и даже сотни раз. Pqc работает в виде прокси, принимающего запросы от клиентов и транслирующего их к PostgreSQL, результат определенных SELECT-запросов при этом сохраняется в памяти и в случае поступления повторного запроса, если не истек таймаут, данные выдаются из локального кэша. Поддерживается задание правил, какие запросы можно кэшировать, а какие нет. Также возможна настройка политики кэширования на основании длительности выполнения запроса или использовании в теле запроса специальных флаговых значений (команды передаются внутри комментария, например, "/* cache: refrash */ SELECT..." или "/* cache: on */ SELECT..."). Код Pqc написан на языке Си и распространяется в рамках лицензии BSD. Для хранения прокэшированных значений используется memcached. Pgwatch - программа для организации мониторинга за работой PostgreSQL 9. Поддерживает отображение динамики изменения параметров через наглядные и интерактивные Flash-графики. Программа отличается простой настройкой и автоматизацией накопления статистики. Код написан на PHP и распространяется под свободной лицензией Artistic (обычно используется в Perl-проектах). Среди отслеживаемых параметров: интенсивность дискового ввода/вывода, эффективность внутренних кэшей, нагрузка на систему, число соединений к БД, число транзакций, информация от оптимизатора, доля прямых переборов и сканирований по индексу (Sequential/Index scans) и т.д.