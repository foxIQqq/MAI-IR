Релиз распределенного реплицируемого блочного устройства DRBD 9.1.0

Опубликован релиз распределенного реплицируемого блочного устройства DRBD 9.1.0, позволяющего реализовать подобие массива RAID-1, сформированного из объединённых по сети нескольких дисков разных машин (зеркалирование по сети). Система оформлена в виде модуля для ядра Linux и распространяется под лицензией GPLv2. Ветка drbd 9.1.0 может использоваться для прозрачной замены drbd 9.0.x и полностью совместима на уровне протокола, файлов конфигурации и утилит. Изменения сводятся к переработке механизма установки блокировок и нацелены на уменьшение конкуренции при установке блокировок в коде, отвечающем за ввод-вывод в DRBD. Изменение позволило поднять производительность в конфигурациях с большим числом CPU и c накопителями NVMe, за счёт устранения узкого места, негативно влияющего на производительность при поступлении большого числа параллельных запросов ввода/вывода с разных ядер CPU. В остальном ветка drbd 9.1.0 аналогична выпуску 9.0.28. Напомним, что DRBD может использоваться для объединения накопителей узлов кластера в единое отказоустойчивое хранилище. Для приложений и системы такое хранилище выглядит как одинаковое для всех систем блочное устройство. При использовании DRBD все операции с локальным диском отправляются на другие узлы и синхронизируются с дисками других машин. В случае выхода из строя одного узла, хранилище автоматически продолжит работу за счёт оставшихся узлов. При возобновлении доступности сбойного узла, его состояние будет автоматически доведено до актуального вида. В состав кластера, формирующего хранилище, может входить несколько десятков узлов, размещённых как в локальной сети, так и территориально разнесённых в разные центры обработки данных. Синхронизация в подобных разветвлённых хранилищах выполняется с использованием технологий mesh-сети (данные растекаются по цепочке от узла к узлу). Репликация узлов может производиться как в синхронном режиме, так и в асинхронном. Например, локально размещённые узлы могут применять синхронную репликацию, а для выноса на удалённое размещённые площадки может применяться асинхронная репликация с дополнительным сжатием и шифрованием трафика.