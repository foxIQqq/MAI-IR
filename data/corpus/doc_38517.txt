Релиз операционной системы Dragonfly BSD 3.6

Увидел свет релиз DragonFlyBSD 3.6, операционной системы с гибридным ядром, созданной в 2003 году с целью альтернативного развития ветки FreeBSD 4.x. Из особенностей DragonFly BSD можно выделить распределённую версионную файловую систему HAMMER, поддержку загрузки "виртуальных" ядер системы как пользовательских процессов, возможность кэширования данных и мета-данных ФС на SSD-накопителях, учитывающие контекст вариантные символические ссылки, возможность заморозки процессов с сохранением их состояния на диске, гибридное ядро, использующее легковесные потоки (LWKT). Среди ключевых улучшений выпуска DragonFly BSD 3.6 отмечается переход на систему портов DPorts и инструментарий pkgng, поддержка KMS для видеокарт Intel и AMD, оптимизация производительности для многоядерных систем. Для загрузки доступны 32- и 64-разрядные установочные образы размером 197 Мб для CD и USB Flash. Выпуск расширенных образов размером 1 Гб с десктоп-окружением для установки на DVD и USB Flash задерживается. Все доступные образы могут работать в Live-режиме, что позволяет оценить работу DragonFly BSD без установки на диск. Основные улучшения, добавленные в DragonFlyBSD 3.4: Переход по умолчанию на систему сборки пакетов DPorts (DragonFly Ports), в рамках которой поддерживается вариант портов FreeBSD, адаптированных для сборки в DragonFly BSD. Для установки доступно более 20 тысяч портов, что примерно в два раза больше, чем предлагалось при использовании pkgsrc. Управление бинарными пакетами осуществляется при помощи новой утилиты pkg (утилиты pkg_* не требуются), развиваемой в рамках проекта pkgng. Утилита предоставляет интерфейс в стиле пакетного менеджера APT и обеспечивает поддержку таких функций, как обновление пакетов, работа с репозиториями бинарных пакетов, учёт зависимостей и полноценные средства для работы с метаданными. Поддержка pkgsrc сохранена в качестве опции, переход на DPorts существующих пользователей не навязывается, но бинарные сборки пакетов для pkgsrc отныне не формируются; Изменение ABI, которое требует пересборки всех установленных пакетов при обновлении системы до версии Dragonfly BSD 3.6. Кроме того, в процессе установки системы потребуется дополнительная перезагрузка перед выполнением "make upgrade" (подробности в /usr/src/UPDATING); Увеличение масштабируемости и производительности на SMP-системах. Проверка параллельной сборкой 20 тысяч пакетов в dports подтвердила практически полную ликвидацию в ядре проблем из-за конкуренции при выставлении блокировок на системах с различным числом процессорных ядер; Экспериментальная реализации модуля KMS для переключения видеорежимов на уровня ядра для видеокарт Intel и AMD. Поддержка KMS необходима для использования свежих версий видеодрайверов Intel и Radeon, в которых была удалена поддержка переключения видеорежимов на пользовательском уровне (UMS) и оставлена только поддержка KMS (Kernel Mode Setting) для переключения видеорежимов на уровне ядра. Базовый код системы drm2 портирован из FreeBSD и расширен переносом дополнительных улучшений из OpenBSD и Linux. Обеспечена поддержка менеджеров управления видеопамятью GEM и TTM. KMS пока работает только на 64-разрядных системах (x86_64), для 32-разрядных систем пока предлагается старый графический стек на базе xorg-server 1.7; Обновлена поддержка локалей, в состав включены актуальные локали и libiconv; Улучшена работа нового USB-стека usb4bsd, обеспечивающего поддержку хост-контроллеров xhci (USB 3.0). В новом выпуске добавлена порция новых USB-драйверов и устранены выявленные проблемы. Новый стек создан на основе портирования кода поддержки USB из FreeBSD 8; В состав включена переработанная редакция ФС HAMMER2, но она пока не готова для использования. Разработка HAMMER2 будет продолжена в ветке DragonFly 3.7. В HAMMER2 появятся такие функции, как отдельное монтирование снапшотов, доступные на запись снапшоты, квоты на уровне директорий, инкрементальное зеркалирование, поддержка различных алгоритмов сжатия данных, multi-master зеркалирование с распределением данных на несколько хостов; Существенно увеличена производительность выполнения вызова connect(4) для TCP-сокетов, как в блокирующем, так и не в блокирующем режимах; Обновление сторонних приложений, поставляемых в базовой системе: mdocml 1.12.2, libexpat (libbsdxml) 2.1.0, grep 2.14, diffutils 3.3, libmpfr 3.1.2, gcc47 4.7.3, zlib 1.2.8, awk 20121220, tcsh 6.18.01, libedit 2012-12-13, less 458, nvi 2.1.1, GDB 7.6.1, ldns 1.6.16, tnftp 20121224.