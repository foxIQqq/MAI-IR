Выпуск nginx 1.11.4

Доступен новый выпуск основной ветки высокопроизводительного HTTP-сервера nginx 1.11.4, в котором реализованы следующие изменения: Добавлена переменная $upstream_bytes_received позволяющая получить число байт, полученных от сервера группы. Значения нескольких соединений разделяются запятыми и двоеточиями подобно адресам в переменной $upstream_addr; Добавлены новые переменные в модуле stream и ngx_stream_upstream_module: $bytes_received - число байт, полученных от клиента; $session_time - длительность сессии в секундах с точностью до миллисекунд; $protocol - протокол, используемый для работы с клиентом: TCP или UDP; $status - статус сессии; $upstream_addr - хранит IP-адрес и порт или путь к UNIX-сокету сервера группы. Если при проксировании были сделаны обращения к нескольким серверам, то их адреса разделяются запятой, например "192.168.1.1:12345, 192.168.1.2:12345, unix:/tmp/sock"; $upstream_bytes_sent - число байт, переданных на сервер группы. Значения нескольких соединений разделяются запятыми подобно адресам в переменной $upstream_addr; $upstream_bytes_received - число байт, полученных от сервера группы. Значения нескольких соединений разделяются запятыми подобно адресам в переменной $upstream_addr; $upstream_connect_time - время установки соединения с сервером группы, время хранится в секундах с точностью до миллисекунд. Времена нескольких соединений разделяются запятыми подобно адресам в переменной $upstream_addr; $upstream_first_byte_time - время получения первого байта данных, время хранится в секундах с точностью до миллисекунд. Времена нескольких соединений разделяются запятыми подобно адресам в переменной $upstream_addr; $upstream_session_time - длительность сессии в секундах с точностью до миллисекунд. Времена нескольких соединений разделяются запятыми подобно адресам в переменной $upstream_addr. Добавлен новый модуль ngx_stream_log_module, позволяющий записывать логи сессий в указанном формате; Добавлен параметр proxy_protocol в директиве listen и переменные $proxy_protocol_addr и $proxy_protocol_port в модуле stream; Добавлен новый модуль ngx_stream_realip_module, позволяющий менять адрес и порт клиента на переданные в заголовке протокола PROXY; Исправлена ошибка, когда nginx не собирался с модулем stream и модулем ngx_http_ssl_module; Исправлена опция сокета, когда опция IP_BIND_ADDRESS_NO_PORT не использовалась; Исправлен параметр ranges в директиве geo; Исправлена ошибка, которая могла возвращать некорректный ответ при использовании директив "aio threads" и "sendfile".