AlmaLinux и Rocky Linux перестроят свои процессы с учётом ограничения доступа к коду пакетов RHEL

Проекты AlmaLinux и Rocky Linux, публикующие бинарно совместимые сборки Red Hat Enterprise Linux, опубликовали заявления c планом дальнейших действий после ограничения компанией Red Hat публичного доступа к исходным текстам пакетов RHEL. Публично код пакетов RHEL теперь можно будет получить только через непрерывно обновляемый репозиторий CentOS Stream, который служит основой для формирования будущих релизов RHEL. Среди основных проблем перехода AlmaLinux и Rocky Linux на CentOS Stream отмечается рассинхронизация публикации пакетов для RHEL и CentOS Stream. В частности, не все исходные тексты пакетов, присутствующих в RHEL, переносятся в CentOS Stream в то же время, в том же порядке и в той же форме (в публикуемых в CentOS Stream пакетах могут отсутствовать некоторые патчи). Например, обновления, связанные с устранением уязвимостей в пакетах с ядром Linux, могут публиковаться в CentOS Stream с некоторой задержкой. Также нет никаких гарантий, что пакеты появятся в репозитории CentOS Stream в момент выпуска релиза RHEL или после него. Более того, номера версий пакетов в CentOS Stream и RHEL не всегда совпадают. Проблема также возникает со сроками поддержки - CentOS Stream обновляется в течение 5 лет после релиза, а полное время жизни дистрибутив RHEL составляет 10 лет, т.е. CentOS Stream не может быть источником обновлений в последние 5 лет жизненного цикла дистрибутива. Для клиентов компания Red Hat оставила возможность загрузки кода srpm-пакетов RHEL через закрытый раздел сайта, на котором действует дополнительное пользовательское соглашение (EULA), запрещающее редистрибуцию RHEL. Использование в AlmaLinux и Rocky Linux srpm-пакетов, загруженных через клиентский портал Red Hat, сопряжено с юридическими рисками. AlmaLinux и Rocky Linux намерены продолжить формирование сборок, воспроизводящих пакеты Red Hat Enterprise Linux, полностью бинарно совместимых, идентичных по поведению (на уровне ошибок) и пригодных для использования в качестве замены RHEL. Дистрибутивам придётся переработать внутренние процессы формирования релизов, но для пользователей и партнёров ничего не изменится, проекты как и раньше продолжат оперативно формировать сборки. Для исключения перерыва в поставке обновлений оба проекта вначале задействуют временный вариант обхода ограничений, после чего планируют определить долгосрочную стратегию и реализовать более продуманное долгосрочное решение, варианты которого пока обсуждаются. В качестве временного решения проект AlmaLinux намерен переключиться на отслеживание изменений из репозитория CentOS Stream, а также использовать репозитории Oracle Linux для продолжения формирования обновлений пакетов с устранением уязвимостей. Формируемые обновления будут дополнительно проверяться и подгоняться для достижения полной совместимости с обновлениями от RHEL, не нарушая при этом заданные компанией Red Hat условия лицензирования. Временное решение Rocky Linux заключается в создании дополнительного репозитория "git.rockylinux.org/staging/rhel-src/rpms", отслеживании рассинхронизированных обновлений, получении связанных с отсутствующими обновлениями srpm-пакетов обходным путём и их ручной загрузке в репозиторий staging. Первое время пакеты планируют получать через подписку на RHEL. Попутно планируют провести юридический анализ предложенной модели и возможности размещения srpm-пакетов в своём репозитории без изменения бренда.