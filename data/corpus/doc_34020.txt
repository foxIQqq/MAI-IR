Новые версии http-сервера nginx 1.2.1 и 1.3.1

Представлен новый стабильный релиз http-сервера nginx 1.2.1 и экспериментальный выпуск 1.3.1. Изменения в версии 1.2.1: Безопасность: теперь nginx/Windows игнорирует точку в конце компонента URI и не разрешает URI, содержащие последовательность ":$"; Директива debug_connection теперь поддерживает IPv6-адреса и параметр "unix:". Директива set_real_ip_from и параметр proxy директивы geo теперь поддерживают IPv6-адреса. Новые директивы real_ip_recursive, geoip_proxy и geoip_proxy_recursive. Для директивы geo добавлена поддержка параметра proxy_recursive. Устранение возможных крахов рабочего процесса при использовании директивы resolver или при возврате бэкендом некорректного ответа в сочетании с использованием директив fastcgi_pass, scgi_pass или при использовании директивы rewrite с указанием переменных в строке замены; Решена проблема с созданием излишней нагрузки на процессор, если было достигнуто ограничение на количество открытых файлов. При использовании директивы proxy_next_upstream с параметром http_404 nginx мог бесконечно перебирать бэкенды, если в блоке upstream был хотя бы один сервер с флагом backup. При использовании директивы ip_hash установка параметра down директивы server могла приводить к ненужному перераспределению клиентов между бэкендами. Устранена ошибка, приводившая к утечке сокетов. В выпуске 1.3.1 в директиве resolver теперь можно указывать порт и задавать IPv6-адреса DNS-серверов; в блоке upstream добавлена поддержка директивы least_conn; при использовании директивы ip_hash теперь можно задавать вес серверов.