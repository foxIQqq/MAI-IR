Проект OpenBSD анонсировал собственный гипервизор

Объявлено о работе над новым гипервизором, специально развиваемым для использования в операционной системе OpenBSD. Первый выпуск гипервизора OpenBSD планируется представить в конце октября, но, в конечном счёте, сроки будут зависеть от успешности написания бэкендов для virtio. Работа профинансирована организацией OpenBSD Foundation. Гипервизор будет поддерживать запуск виртуальных окружений с любыми операционными системами для которых имеются драйверы virtio, т.е. все системы, которые поддерживаются в KVM. В дальнейшем на базе кода эмуляции оборудования от проекта QEMU планируется реализовать прослойку для выполнения немодифицированных операционных систем в режиме полной виртуализации, в том числе устаревших ОС и систем, требующих для загрузки BIOS/UEFI. Для работы гипервизора потребуется система с любым процессором AMD или Intel, поддерживающим расширения аппаратной виртуализации AMD-V/SVM (Secure Virtual Machine) или VT-x/VMX (Virtual Machine eXtensions). В том числе будут поддерживаться процессоры без поддержки расширений RVI (Rapid Virtualization Indexing) или EPT (Extended Page Table), вместо которых будет применяться специальная программная техника изоляции страниц памяти виртуальных окружений. Гипервизор (vmm), virtio-бэкенд (vmd) и управляющий инструментарий (vmmctl) планируется интегрировать в базовую систему OpenBSD, что позволит запускать гостевые системы из коробки. Гипервизор будет доступен не только для архитектуры amd64, но и для 32-разрядных систем i386. В частности, возможность работы на устаревших системах i386 является одним из основных мотивов разработки нового гипервизора вместо портирования в OpenBSD уже существующих решений. В качестве причин также упоминаются технические особенности OpenBSD и желание уделить первоочередное внимание вещам, которые в других системах рассматриваются как второстепенные, например, поддержка i386, механизм теневых страниц (shadow paging), вложенная виртуализация и поддержка устаревших периферийных устройств. Реализация задуманных возможностей в другом гипервизоре оценена по трудозатратам как сопоставимая с созданием нового решения с нуля. На текущей стадии разработки гипервизор уже успешно загружает ядро OpenBSD и выдаёт запрос на монтирование корневой ФС. Загрузка пользовательского окружения пока упирается в написание кода эмуляции дисков и сетевого адаптера - работа над virtio-бэкендами для данных подсистем ведётся в настоящее время.