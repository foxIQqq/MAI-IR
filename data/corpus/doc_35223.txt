Релиз OpenBSD 5.2

Увидел свет релиз операционной системы OpenBSD 5.2, тридцать третий выпуск за восемнадцатилетнюю историю существования проекта. При развитии OpenBSD основное внимание уделяется переносимости (поддерживается 17 аппаратных архитектур), стандартизации, корректной работе, активной безопасности и интегрированным криптографическим средствам. Размер установочного iso-образа 230 Мб. Кроме непосредственно операционной системы, проект OpenBSD известен своими компонентами, которые получили распространение в других системах и зарекомендовали себя как одни из наиболее безопасных и качественных решений. Среди них: OpenSSH, пакетный фильтр PF, демоны маршрутизации OpenBGPD и OpenOSPFD, NTP-сервер OpenNTPD, почтовый сервер OpenSMTPD, мультиплексор текстового терминала (аналог GNU screen) tmux, BSDL-альтернатива пакету GNU groff - mandoc, протокол для организации отказоустойчивых систем CARP (Common Address Redundancy Protocol). Из улучшений, добавленных в OpenBSD 5.2, можно отметить: В состав включена новая реализация нитей pthreads, выполненная на базе работающей на уровне ядра подсистемы rthreads, заменившей собой ранее используемую библиотеку uthreads, работающую на уровне пользователя. Ключевым достоинством новой реализации pthreads является поддержка реального распараллеливания выполнения многопоточных программ на многоядерных системах. Из других связанных с поддержкой многопоточности изменений можно отметить: добавление в gdb возможности отладки работающих многопоточных программ; реализацию нового системного ограничения kern.maxthread, задающего максимально допустимое число нитей; адаптация утилит ps, top и fstat для отображения выполнения многопоточных программ. В состав базовой системы включены БД SQLite, HTTP-сервер nginx и утилита libtool. Удалены драйвер raid(4) и утилита raidctl(8), вместо которых следует использовать softraid(4); Обеспечение поддержки перехода в спящий режим (hibernation) для архитектуры i386. В настоящее время засыпание возможно только для дисковых контроллеров, поддерживаемых в драйверах pciide и wd; Улучшения в сетевой подсистеме: В пакетном фильтре PF добавлена поддержка балансировки нагрузки с учетом весов состояний; в блоке "set { }" теперь можно использовать опции prio и tos; допустимо создание более 16 интерфейсов pflog(4); добавлена возможность установки tos для пакетов IPv6; Обеспечена поддержка создания сетевого моста между двумя IPv4-сетями поверх IPv6-линка (с использованием gif(4)); В IPsec-стек и iked(8) добавлена поддержка ESN (Extended Sequence Numbers); Размер начального окна TCP увеличен до 14600 в соответствии с рекомендациями в draft-ietf-tcpm-initcwnd; Улучшена обработка sockaddrs для типичных ситуаций, улучшена обработка ошибок и ограничений в процессе работы с файловыми дескрипторами, устранена утечка файловых дескрипторов в процессе обработки сообщений, улучшена работа кода буферизации для сокетов AF_UNIX; Улучшения в системных приложениях: В программы sndiod(1), bgpd(8), dvmrpd(8), ftp-proxy(8), iked(8), iscsid(8), ldapd(8), ldpd(8), nsd(8), ospf6d(8), ospfd(8), relayd(8), ripd(8), snmpd(8), spamd(8), sshd(8), tcpbench(1) и tmux(1) добавлена поддержка ограничения интенсивности приёма новых соединений (rate limit); В команду route(8) добавлена поддержка сиснтаксиса destination/prefixlen при определении маршрутов IPv6; В tcpdump(8) добавлена поддержка вывода дампов пакетов в ASCII-режиме и улучшена поддержка протоколов etherip и BGP Переписан tftpd(8), который теперь реализован в форме самодостаточного демона, работающего в неблокирующем режиме и поддерживающего IPv6; В snmpd(8) добавлена поддержка PF-MIB, UCD-DISKIO-MIB и дополнительных OID в категории HOST-RESOURCES-MIB; В bgpd(8) улучшена работа в условиях нестабильного состояния сети; в код принятия решения о выборе маршрутов добавлены дополнительные проверки; обеспечена поддержка RFC 6608; улучшено информирование о возникающих ошибках. В bgpctl(8) для отладки добавлена возможность загрузки MRT-дампов в bgpd(8), а также добавлена опция "selected" для показа только избранных маршрутов по команде "show rib"; В ospfd(8) обеспечена корректная поддержка типов LSA_TYPE_AREA_OPAQ и LSA_TYPE_AS_OPAQ; В relayd(8) обеспечена возможность обработки транзакций, размером больше 2 Гб; В утилите ftp(1) добавлена возможность выбора IP-адреса, с которого будет установлено соединение; В функции inet_net_pton(3) и inet_net_ntop(3) добавлена поддержка IPv6 (AF_INET6); В OpenSSL по умолчанию отключено использование SSLv2; Добавлена возможность использования AMT для проброса консоли поверх Ethernet (amtterm; Многочисленные улучшения в smtpd(8): увеличение надёжности, новая реализация MTA-клиента и планировщика разбора очередей, упрощение синтаксиса smtpd.conf и улучшение соответствия RFC; Расширение возможностей утилиты tmux(1): для выбора сессий и окон добавлено новое унифицированное древовидное представление; новые команды для смены номеров окон; изменение организации работы режима просмотра истории состояния окна; поддержка ограничения интенсивности вывода на экран; Улучшение поддержки FAT-разделов и обеспечение работы fsck_msdos на накопителях с размером сектора, отличающегося от 512 байт; Обновлён пакет OpenSSH 6.1, обзор улучшений можно посмотреть здесь; В sysconf(3) и pathconf(2) добавлены дополнительные переменные конфигурирования; В системную библиотеку добавлена поддержка функций posix_spawn(3), mbsnrtowcs(3), wcsnrtombs(3), getdelim(3) и getline(3). Увеличена производительность функции realloc(3); Улучшение поддержки оборудования: Оптимизация производительности драйвера ix для Intel 10Gb Ethernet; В драйвер em добавлена поддержка устройств на базе i350; В драйвере bnx(4) появилась поддержка средств управления потоком; В tcpcib(4) (Intel Atom E600) добавлена поддержка аппаратного деглюкера (watchdog) и HPET; В urndis(4) добавлена поддержка новых Android-устройств; В wbsio(4) добавлена поддержка Winbond W83627UHG; В nviic(4) добавлена поддержка SMBus-контроллера NVIDIA MCP89, а в glxpcib(4) - AMD CS5536; В axe(4) добавлена поддержка устройств на базе AX88772B, в mos(4) - MCS7832, в umidi(4) - Roland UM-ONE, umsm(4) - Huawei Mobile E303;; В azalia(4) и piixpm(4) добавлена поддержка чипсета AMD Hudson-2; В порте sgi появилась поддержка моделей R4000 Indigo (IP20), Indy (IP22), R4000 Indigo2 (IP24) и POWER Indigo2 R10000 (IP28); Улучшена поддержка архитектуры amd64; Число портов превысило 7600. Для архитектуры i386 подготовлено 7483 бинарных пакетов, для amd64 - 7439, для arm - 5802, для mips64el - 5908, для sparc64 - 6820, для hppa - 6316. Из находящихся в портах приложений, отмечены: GNOME 3.4.2 KDE 3.5.10 Xfce 4.10 MySQL 5.1.63 PostgreSQL 9.1.4 Postfix 2.9.3 OpenLDAP 2.3.43 и 2.4.31 Mozilla Firefox 3.5.19, 3.6.28 и 13.0.1 Mozilla Thunderbird 13.0.1 GHC 7.0.4 LibreOffice 3.5.5.3 Emacs 21.4, 22.3 и 23.4 Vim 7.3.154 PHP 5.2.17 и 5.3.14 Python 2.5.4, 2.7.3 и 3.2.3 Ruby 1.8.7.370 и 1.9.3.194 Tcl/Tk 8.5.11 Jdk 1.7 Mono 2.10.9 Chromium 20.0.1132.57 Groff 1.21 Go 1.0.2 GCC 4.6.3 и4.7.1 LLVM/Clang 3.1 Lua 5.1.5 и 5.2.1 Компоненты от сторонних разработчиков, входящие в состав OpenBSD 5.2: Xenocara (основанная на X.Org 7.7 с xserver 1.12.2, freetype 2.4.10, fontconfig 2.8.0, Mesa 7.10.3, xterm 279, xkeyboard-config 2.6). GСС 2.95.3 с патчами, 3.3.5 с патчами и 4.2.1 с патчами; Perl 5.12.2 (с патчами) Улучшенная и более защищённая версия Apache 1.3, с поддержкой SSL/TLS и DSO OpenSSL 1.0.0f (с патчами) Sendmail 8.14.5, с libmilter Bind 9.4.2-P2 (с патчами) Lynx 2.8.7rel.2 с поддержкой HTTPS и IPv6 Sudo 1.7.2p8 Ncurses 5.7 SQLite 3.7.13 Heimdal 0.7.2 (с патчами) Arla 0.35.7 Binutils 2.15 (с патчами) Gdb 6.3 (с патчами) Less 444 (с патчами) Awk, версия от 10 августа 2011 г.