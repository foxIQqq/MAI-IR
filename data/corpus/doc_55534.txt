Анализ влияния на производительность дополнений к Chrome

Подготовлен обновлённый отчёт с результатом исследования влияния на производительность браузера и комфорт работы пользователя тысячи наиболее популярных дополнений к Chrome. По сравнению с проверкой, проведённой в прошлом году, в новом исследовании помимо простой страницы-заглушки оценивалось изменение производительности при открытии сайтов apple.com, toyota.com, The Independent и Pittsburgh Post-Gazette. Выводы исследования не изменились: многие популярные дополнения, такие как Honey, Evernote Web Clippe и Avira Browser Safety, могут значительно снижать производительность открытия сайтов в Chrome. С другой стороны, отмечается, что дополнения для блокировки рекламы и обеспечения конфиденциальности могут существенно повышать производительность при просмотре сайтов, содержащих большое число рекламных блоков. Особый интерес представляет исследование влияния применения блокировщиков рекламы на скорость открытия страниц. За счёт отключения кода, осуществляющего отрисовку рекламы и счётчиков, потребление процессорного времени при открытии сайтов The Independent и Pittsburgh Post-Gazette с использованием наиболее эффективного блокировщика Ghostery удалось снизить с 17.5 сек. до 1.7 сек, т.е. в 10 раз. Для менее эффективного из протестированных блокировщиков Trustnav потребление процессорного времени сократилось до 7.4 сек., т.е. на 57%. Некоторые дополнения для блокировки рекламы активно расходуют процессорные ресурсы в фоне, что может несмотря на ускорение обработки страниц повысить общую нагрузку на систему. В комбинированном тесте, учитывающем нагрузку на CPU при открытии страницы и в фоне, наибольшую эффективность демонстрируют Ghostery и uBlock Origin. При этом кроме ускорения обработки страниц при использовании блокировщиков рекламы значительно снижается трафик (от 43% до 66%) и число отправляемых сетевых запросов (от 83% до 90%). Блокировщики рекламы также позволяют снизить потребление оперативной памяти, например, при использовании дополнения Disconnect потребление браузером памяти при открытии страниц The Independent и Pittsburgh Post-Gazette снижается с 574 MB до 260 MB, т.е. на 54%, что компенсирует затраты памяти на хранение списков блокировки. При тестировании производительности дополнений, если рассматривать 100 самых популярных дополнений, при открытии страницы-заглушки наибольшее потребление ресурсов наблюдается в Evernote Web Clipper (потребляет 368 мс процессорного времени). Из дополнений потребляющих значительные ресурсы также можно отметить дополнение для обеспечения приватности Ghostery, видеомессенджер Loom for Chrome, дополнение для студентов Clever и менеджеры паролей Avira и LastPass, которые насчитывают более миллиона установок. В тесте, осуществляющем открытие сайта apple.com, ситуация меняется и на первое место вырывается дополнение Dark Reader, которое тратит около 25 секунд процессорного времени (в основном из-за подгонки изображений под тёмное оформление). Значительные ресурсы также потребляет дополнение для поиска купонов Honey (+825мс) При открытии сайта Toyota в лидеры по созданию паразитной нагрузки на CPU вырывается Norton Password Manager. В выборке из 1000 самых популярных дополнений по потреблению ресурсов CPU во время обработки страницы лидируют дополнения: Ubersuggest (потребляет 1.6 секунд процессорного времени), ProWritingAid Grammar Checker (+658 мс), Meow (637 мс) и MozBar (+604 мс). По потреблению ресурсов в фоне лидируют: Avira Safe Shopping (+2.5 сек.), TrafficLight (+1.04 сек.), Virtru Email Protection (+817 мс) и Stylebot (655 мс). Наибольшее потребление памяти наблюдается у дополнений: AdBlocker by Trustnav (+215МБ), Ad-Blocker Pro (+211МБ), Hola ad remover (198 МБ) и Xodo PDF Viewer & Editor (197МБ). Для сравнения uBlock Origin потребляет при обработке страницы 27 мс времени CPU, в фоне тратит 48 мс процессорного времени и занимает 77 МБ памяти. При выполнении теста на реальных сайтах ситуация ухудшается. Например, дополнение Substitutions, автоматически заменяющее код на странице, тратит 9.7 секунд процессорного времени. При измерении задержки перед началом отрисовки страницы-заглушки, из 100 самых популярных дополнений наихудшие показатели оказались у Clever, Lastpass и DuckDuckGo Privacy Essentials. При повторении теста на сайте apple.com значительные проблемы наблюдалась у Dark Reader, который задержал начало отрисовки на 4 секунды. На сайте toyota задержки от Dark Reader оказались не столь существенными и в лидерах оказались блокировщики нежелательного контента. В тесте на потребление ресурсов при нахождении вкладки в фоне наихудшие показатели оказались у дополнения Avira Safe Shopping, которое израсходовало более 2 секунд процессорного времени. При повторении теста на сайте toyota потребление времени CPU более 2 секунд также отмечены у менеджера паролей Dashlane и блокировщика рекламы AdGuard AdBlocker. При тестировании 1000 дополнений на сайте The Independent расход процессорного времени в фоне у дополнений uberAgent, Dashlane и Wappalyzer превысил 20 секунд. Что касается потребления памяти, то в данной категории лидируют дополнения для блокировки рекламы и обеспечения конфиденциальности, которым приходится держать в памяти базы со списками блокировки. При этом, в случае открытия в браузере большого числа сайтов, изобилующих рекламой, итоговое потребление памяти браузером может оказаться меньше, чем без использования блокировщиков. При установке нескольких дополнений потребление ресурсов от них суммируется. При сравнении результатов с прошлогодним исследованием наибольший прогресс отмечается в дополнениях Grammarly, Microsoft Office, Okta Browser Plugin, Avira Safe Shopping и Avira Browser Safety, потребление процессорного времени у которых сократилось на более чем 100 мс. Наибольшее ухудшение в потреблении ресурсов наблюдается в дополнениях Save to Pocket, Loom и Evernote.