Релиз Samba 4.1.0

После девяти месяцев разработки представлен значительный выпуск Samba 4.1.0, продолживший развитие ветки Samba 4 с полноценной реализацией контроллера домена и сервиса Active Directory, совместимого с реализацией Windows 2000 и способного обслуживать все поддерживаемые Microsoft версии Windows-клиентов, в том числе Windows 8. Ключевые изменения в Samba 4.1: Обновлённый набор клиентских утилит и библиотек с поддержкой протоколов SMB2 и SMB3. Поддержка SMB3 работает только с серверами на базе Windows 2012, Windows 8 или Samba 4.x. По умолчанию в утилитах smbclient и smbcacls по-прежнему используется протокол SMB1, для соединения по протоколам SMB2 и SMB3 можно использовать опцию командной строки "-m SMB2/SMB3" (например, "smbclient //server/share -Uuser%password -mSMB3") или указав в секции "[global]" файла smb.conf директиву "client max protocol = SMB2/SMB3". Следует иметь в виду, что при использовании SMB2 и SMB3 в наборе команд smbclient недоступны UNIX-расширения, которые пока не определены для данных протоколов; Поддержка соединений с использованием шифрованного канала связи при соединении с серверами Windows и Samba по протоколу SMB3. Ранее шифрование было доступно только при использовании Unix-расширений протокола SMB1, теперь оно может быть применено и при соединении с Windows-серверами. Для включения шифрования можно использовать опцию "-e" при вызове smbclient, например, для соединения с Windows 2012 по протоколу SMB3 с шифрованием трафика можно указать "smbclient //Win2012Server/share -Uuser%password -mSMB3 -e"; Новая система репликации содержимого базы данных контроллера домена, отличающаяся увеличением эффективности и надёжности работы. Новая реализация позволяет организовать репликацию базы с другими контроллерами домена, в том числе имеющими существенно изменённую схему данных (например, Windows 2012 DC или Windows DC с установленным Exchange); Поддержка выполнения операций копирования на стороне сервера (реализован SMB2-запрос FSCTL_SRV_COPYCHUNK по аналогии с Windows Server 2012). Таким образом клиент теперь может инициировать копирование файлов на сервере без их передачи по сети (ранее для копирования файл загружался на систему клиента, а затем опять переносился на сервер); Включение VFS-модуля для обеспечения интеграции с файловой системой Btrfs (включается через параметр "vfs objects = btrfs" в smb.conf). Модуль позволяет дополительно увеличить производительность операций копирования на стороне сервера при хранении данных на Btrfs-разделах, за счёт использования возможности по хранению только одной копии данных для идентичных файлов с их разделением на уровне метаданных; Удаление из состава Samba административного web-интерфейса SWAT. В качестве мотива называется недостаточно высокое качество кода с точки зрения безопасности. В текущем виде SWAT излишне доверяет действиям, инициируемым со стороны пользовательского браузера, что открывает возможности к проведению XSS и CSRF атак, направленных на инициирование скрытых действий от лица пользователя web-интерфейса. Для исключения подобных атак требуется переработка модели безопасности SWAT, но у SWAT отсутствует мэйнтейнер и не удалось найти заинтересованного в развитии проекта web-разработчика; Прекращена поддержка директив "password level" и "set directory"; Добавлена новая директива "use ntdb".