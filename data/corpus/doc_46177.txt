Оценка потребления памяти Firefox в многопроцессном режиме

Эрик Рам (Eric Rahm), участник проекта MemShrink, в рамках которого ведётся работа по снижению потребления памяти в Firefox, опубликовал результаты тестирования потребления памяти Firefox с выделением 2, 4 и 8 процессов для обработки контента, в сравнении с Chrome, IE и Safari. Тестирование проведено в окружениях Ubuntu 16.04, macOS 10.12.3 и Windows 10 с использованием свежих экспериментальных версий Firefox Nightly 55, Safari Technology Preview 10.2 release 25, IE 11 и Chrome 59 (в Ubuntu - Chrome 54). При выполнении одинакового тестового набора Firefox с двумя отдельными процессами для обработки контента на платформах Windows и Linux израсходовал почти в два раза меньше памяти, чем Chrome, который запускает отдельный процесс на каждую вкладку. При увеличении числа обработчиков контента разрыв уменьшался. На платформе macOS расхождения в потреблении памяти были незначительны, и Firefox с 8 обработчиками контента показал худший результат. Тестирование проводилось через открытие 100 сайтов, лидирующих в рейтинге Alexa, в 30 вкладках, с ожиданием в 10 секунд перед открытием новой ссылки в каждой вкладке. Потребление памяти оценивалось по формуле sum_uss(content processes) + sum_rss(parent processes); Для сравнения, результаты аналогичного теста, проведённого год назад (проверялся тот же набор сайтов, но они могли измениться за год): ОС Браузер Расход памяти Год назад Ubuntu 16.04 LTS Chrome 54 1,478 MB 944 MiB Ubuntu 16.04 LTS Firefox 55 – 2 CP 765 MB 525 MiB Ubuntu 16.04 LTS Firefox 55 – 4 CP 817 MB Ubuntu 16.04 LTS Firefox 55 – 8 CP 990 MB macOS 10.12.3 Chrome 59 1,365 MB 1,354 MB macOS 10.12.3 Firefox 55 – 2 CP 1,113 MB 1,065 MB macOS 10.12.3 Firefox 55 – 4 CP 1,215 MB macOS 10.12.3 Firefox 55 – 8 CP 1,399 MB macOS 10.12.3 Safari 10.2 1,203 MB 451 MB Windows 10 Chrome 59 1,382 MB 1,132 MB Windows 10 Firefox 55 – 2 CP 587 MB 512 MB Windows 10 Firefox 55 – 4 CP 839 MB Windows 10 Firefox 55 – 8 CP 905 MB Windows 10 IE 11 660 MB 523 MB