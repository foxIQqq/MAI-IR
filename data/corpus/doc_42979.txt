Red Hat уведомил о возможной подмене злоумышленниками пакетов Ceph для Ubuntu и CentOS

Компания Red Hat сообщила о выявлении проникновения злоумышленников на сервер, обслуживающий сайт распределённого хранилища Ceph (ceph.com) и сервис загрузки Inktank (download.inktank.com), которые были размещены вне инфраструктуры Red Hat. В прошлом году Red Hat поглотил компанию Inktank, занимающуюся разработкой ФС Ceph, но не перенёс в свою инфраструктуру все сервисы. В частности, через сайт download.inktank.com была организована загрузка продукта Red Hat Ceph Storage для Ubuntu и CentOS, а на сайте ceph.com были размещены пакеты с community-версиями Ceph. Продукт и пакеты были заверены закрытыми ключами Inktank (id 5438C7019DCEEEAD) и сообщества Ceph (id 7EBFDD5D17ED316D). Расследование инцидента ещё не завершено и нет полной уверенности в том, что предлагаемые для загрузки файлы и код не были скомпрометированы в результате атаки. Изучение следов взлома пока не выявило модификации файлов, предлагаемых в настоящее время для загрузки. Не исключается, что файлы в прошлом могли быть подменены на какое-то время, а затем возвращены в исходный вид. Все сборки Ceph, предлагаемые на download.inktank.com после выявления проникновения, были сверены с заведомо корректными сборками. Тем не менее, так как есть вероятность утечки закрытого ключа Inktank, все сборки Red Hat Ceph Storage были повторно подписаны с использованием штатного ключа для заверения релизов Red Hat. Пользователям продукта Red Hat Ceph Storage рекомендовано использовать только сборки, заверенные ключом Red Hat. Для формируемых сообществом пакетов создан новый закрытый ключ (id E84AC2C0460F3994), который следует использовать для верификации загрузок с сайта ceph.com. Отдельно сообщается, что на взломанном сервере не хранились данные клиентов и пользователей, но были размещены хэши паролей и логины пользователей, которым был предоставлен доступ к закрытым областям загрузки. Пользователям CentOS- и Ubuntu-сборок продукта Red Hat Ceph Storage в качестве меры предосторожности рекомендовано загрузить и переустановить пакеты, подписанные новым ключом. Пользователям Red Hat Enterprise Linux, использующим Red Hat Ceph Storage, нет повода для беспокойства, инцидент их не коснулся. Пользователям Debian и Ubuntu, использующим Red Hat Ceph Storage, следует заменить ключи для APT и обновить пакет: sudo apt-key del 17ED316D curl https://git.ceph.com/release.asc | sudo apt-key add - sudo apt-get update Пользователям Fedora, CentOS и SUSE, использующим Red Hat Ceph Storage, следует заменить ключи для верификации и переустановить пакет: sudo rpm -e --allmatches gpg-pubkey-17ed316d-4fb96ee8 sudo rpm --import 'https://git.ceph.com/release.asc' sudo yum clean metadata sudo yum reinstall -y $(repoquery --disablerepo=* --enablerepo=ceph --queryformat='%{NAME}' list '*')