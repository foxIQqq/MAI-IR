Выпуск проприетарного драйвера NVIDIA 460.32

Компания NVIDIA опубликовала первый стабильный выпуск новой ветки проприетарного драйвера NVIDIA 460.32.03. Ветка будет развиваться в рамках длительного цикла поддержки (LTS) до января 2022 года. Драйвер доступен для Linux (ARM, x86_64), FreeBSD (x86_64) и Solaris (x86_64). Основные новшества ветки NVIDIA 460: Добавлена поддержка GPU GeForce RTX 3060 Ti, RTX A6000, A40, T500, A100-SXM4-80GB. Добавлена поддержка расширений RandR для вращения и отражения (rotation, reflection) при использовании видеокарты NVIDIA для вывода в режиме "PRIME Display Offload". Реализована оптимизация "Reverse PRIME Bypass", снижающая нагрузку в режимах "PRIME Render Offload" и "PRIME Display Offload" при работе полноэкранных приложений. Заметно улучшена поддержка графического API Vulkan. Добавлена поддержка Vulkan-расширений VK_KHR_fragment_shading_rate, VK_NV_fragment_shading_rate_enums, VK_KHR_acceleration_structure, VK_KHR_shader_terminate_invocation, VK_KHR_copy_commands2, VK_EXT_shader_image_atomic_int64, VK_EXT_external_memory_host, VK_KHR_ray_tracing_pipeline, VK_KHR_ray_query, VK_KHR_pipeline_library и VK_KHR_deferred_host_operations. Со 128 МБ до 1 ГБ увеличен размер дискового кэша для шейдеров OpenGL и Vulkan. Также изменено размещение кэша шейдеров на диске (изменения действуют только для новых установок, в старых системах кэш продолжит размещаться в каталоге /.nv/ и будет ограничен 128 МБ). Прекращена поддержка устаревших атрибутов NV-CONTROL: NV_CTRL_FRAMELOCK_MASTER, NV_CTRL_FRAMELOCK_SLAVES, NV_CTRL_FRAMELOCK_MASTERABLE, NV_CTRL_FRAMELOCK_SLAVEABLE. Значение параметра AllowEmptyInitialConfiguration изменено на True, что позволяет использовать драйвер NVIDIA с X-серверами без подключённых экранов. Добавлена начальная экспериментальная поддержка спящего режима suspend-to-idle. В модуле ядра modeset.ko улучшена стратегия выделения памяти. В драйвер для X-сервера в опцию "ModeValidation" добавлен параметр "NoInterlacedModes" для отключения чересстрочных режимов развёртки. Одновременно предложены обновления прошлых LTS-веток 390.141 и 450.102.04. В выпуске 390.141 обеспечена совместимость с ядром Linux 5.8. В версии 450.102.04 исправлены ошибки, в том числе приводящие к краху X-клиентов, а также обеспечена совместимость с технологией AMD Secure Memory Encryption. В новых версиях драйверов также устранено несколько уязвимостей, из которых 5 специфичны для платформы Windows, а три затрагивают драйверы для Linux. Уязвимость CVE‑2021‑1052 позволяет повысить свои привилегии в системе. Уязвимость CVE‑2021‑1053 допускает вызов отказа в обслуживании. Уязвимость CVE‑2021‑1056 даёт возможность обойти проверку прав доступа к ФС и получить доступ к привилегированной информации. Дополнительно можно отметить публикацию сотрудником NVIDIA патчей для DDX-сервера XWayland, которые при наличии в системе проприератных драйверов NVIDIA позволят использовать аппаратное ускорение в OpenGL и Vulkan при запуске X-приложений в Wayland-окружениях. Утверждается, что при применении данных патчей производительность OpenGL и Vulkan в X-приложениях, запущенных при помощи XWayland, почти не отличается от запуска под управлением обычного X-сервера.