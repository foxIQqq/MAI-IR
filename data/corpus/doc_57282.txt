Выпуск проприетарного драйвера NVIDIA 515.48.07

Компания NVIDIA представила выпуск новой ветки проприетарного драйвера NVIDIA 515.48.07. Драйвер доступен для Linux (ARM64, x86_64), FreeBSD (x86_64) и Solaris (x86_64). Выпуск NVIDIA 515.48.07 стал первым стабильным релизом после открытия компанией NVIDIA компонентов, работающих на уровне ядра. Исходные тексты модулей ядра nvidia.ko, nvidia-drm.ko (Direct Rendering Manager), nvidia-modeset.ko и nvidia-uvm.ko (Unified Video Memory) из состава NVIDIA 515.48.07, а также используемые в них общие компоненты, не привязанные к операционной системе, опубликованы на GitHub. Прошивки и используемые в пространстве пользователя библиотеки, такие как стеки CUDA, OpenGL и Vulkan, остаются проприетарными. Основные новшества: Добавлена поддержка GPU RTX A2000 12GB, RTX A4500, T400 4GB и T1000 8GB. Добавлена поддержка расширений графического API Vulkan - VK_EXT_external_memory_dma_buf и VK_EXT_image_drm_format_modifier, для использования которых модуль ядра nvidia-drm должен быть загружен с включением DRM KMS. Systemd-сервисы nvidia-suspend.service, nvidia-resume.service и nvidia-hibernate.service переведены на привязку к сервисами systemd-suspend.service и systemd-hibernate.service в режиме WantedBy вместо RequiredBy, что позволяет избежать проблем с переходом в спящий или ждущий режимы в случае удаления драйвера без отключения предоставляемых им сервисов. При включении стереовывода обеспечено отключение чересстрочных режимов. В интерфейсе для настройки X Server реализован автоматический показ диалога подтверждения операции при попытке выхода без записи изменений. В nvidia-installer убрано предупреждение о несоответствие версий компиляторов, которыми собрано ядро Linux и модули ядра NVIDIA. В современных компиляторах подобное расхождение редко приводит к проблемам. С 200 MB до 1024 MB повышен порог использования видеопамяти (NVreg_DynamicPowerManagementVideoMemoryThreshold) в механизме динамического управления питанием D3 (RTD3, Runtime D3 Power Management). Повышена производительность приложений GLX и Vulkan, работающих в окружении композитного сервера Gamescope. В файл supported-gpus.json добавлен тег kernelopen для пометки GPU, совместимых с открытыми модулями open-gpu-kernel-modules. Предоставлена возможность использования Vulkan-расширения VK_EXT_debug_utils для получения информации о сбоях при создании виртуальных фреймбуферов (SwapChain). Для NVIDIA NGX предложена настройка для отключения проверки цифровой подписи DSO (dynamic shared objects).