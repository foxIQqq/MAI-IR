Выпуск системы резервного копирования Bacula 9.0.0

Спустя три года с момента формирования прошлой значительной ветки представлен релиз кроссплатформенной клиент-серверной системы резервного копирования Bacula 9.0.0. Новая версия вышла вслед за релизом 7.4.7, ветка 8.x пропущена для разделения нумерации версий между свободной и коммерческой редакциями - в свободной версии используются нечётные номера веток, а в коммерческой - чётные. Код свободной редакции Bacula распространяется под лицензией AGPLv3, но излишний контроль над ходом разработки и урезание функциональности в пользу коммерческой версии несколько лет назад привёл к созданию форка - Bareos, который активно развивается и конкурирует с Bacula. Основные новшества Bacula 9.0.0: Полностью переписан Storage Daemon, отвечающий за предоставление ресурсов для сохранения резервных копий. В новой версии добавлена возможность динамической загрузки драйверов устройств хранения и перенесена большая часть возможностей из коммерческой редакции Bacula Enterprise, в том числе добавлены новые драйверы для облачных хранилищ; Внесены изменения в структуру БД, что требует запуска специального скрипта update_bacula_tables после перехода на новую ветку; Реализован счётчик для учёта использования накопителей, который помогает назначать диски для равномерного распределения нагрузки; По умолчанию лимит на максимальной число одновременных работ поднят с 1 до 20; Для символических ссылок обеспечено восстановление времени доступа и модификации (atime, mtime); Добавлена новая команда "status network" для тестирования соединения и пропускной способности между клиентом и Storage Daemon; Новая система Tape Alert (скрипт scripts/tapealert) для отслеживания уведомлений о сбоях ленточных накопителей или роботизированных библиотек хранения; Реализован режим бессрочных виртуальных полных бэкапов (Perpetual Virtual Full), при котором виртуальный полный бэкап обновляется каждый день. Для виртуальных полных бэкапов также добавлена директива BackupsToKeep, позволяющая задать число сохраняемых прошлых резервных копий; Поддержка шифрованного соединения с PostgeSQL; Расширена статистика о выполненных работах; Для Console, Dir, File Daemon и Storage Daemon добавлены отдельные программы bxxjson для вывода содержимого файлов .conf; Поддержка перевода устройств хранения в режим только для чтения; В консоль добавлены новые директивы DirectoryACL, BackupClientACL и RestoreClientACL для ограничения списка каталогов во время восстановления и списка работ по бэкапу/восстановлению для определённых клиентов; В Bconsole изменено поведение команды "list" (вывод теперь фильтруется в соответствии с имеющимися ACL), добавлена команда "update jobid=xxx prio" для смены приоритета запущенной задачи, добавлена команда ".estimate" для вывода статистики о ходе выполнения работы, в команду "list jobs" добавлены параметры "level=" и "jobtype=", реализована опция для выбора заданной консоли, обеспечено отображение новых полей; Добавлена новая программа tray-monitor с графическим интерфейсом для мониторинга за состоянием демонов Director, File и Storage, выполнения заданий и инициирования бэкапов со стороны клиента; Реализован режим резервных копий, инициированных клиентом, т.е. создание резервной копии может быть запущено с машины клиента, а утилиты tray-monitor и bconsole могут устанавливать соединение с File Daemon; Внесены многочисленные оптимизации производительности.