pg_stat_plans - новый инструмент для мониторинга и тюнинга PostgreSQL

Компания 2ndQuadrant представила новый инструмент для мониторинга и оптимизиации выполнения запросов в СУБД PostgreSQL - pg_stat_plans. Pg_stat_plans позволяет накопить статистику для выявления наиболее часто выполняемых и ресурсоёмких запросов, требующих первоочерёдной оптимизации. В отличие от других утилит аналогичного назначения, pg_stat_plans позволяет охватить статистику на уровне актуального плана выполнения запроса, рассматривая характеристики выполнения определённого типа запросов в общем виде, а не через приближённые оценки характеристик выполнения конкретных запросов. Таким образом, pg_stat_plans позволяет провести диагностику достаточно сложных случаев, например, выявить причины из-за которых один и тот же запрос может подвергаться разным схемам оптимизации при передаче различных параметров. Код pg_stat_plans опубликован под свободной BSD-подобной лицензией PostgreSQL и доступен на GitHub. В настоящее время модуль может работать только с PostgreSQL 9.2, но в будущем планируется добиться совместимости с ветками 9.0 и 9.1.