Официально вышел FreeBSD 7.2-RELEASE

Спустя 5 месяцев с момента прошлого выпуска представлен релиз FreeBSD 7.2, доступный для архитектур amd64, i386, ia64, pc98, powerpc и sparc64. Для установки подготовлены iso-образы DVD, CD (3 диска), LiveCD и сокращенный образ для установки по сети. Основные новшества FreeBSD 7.2-RELEASE: Поддержка Superpages, страниц памяти увеличенного размера с возможностью автоматической и прозрачной для приложений группировки в Superpages нескольких обычных страниц памяти. По умолчанию возможность выключена, для активации нужно указать "vm.pmap.pg_ps_enabled=1" в /boot/loader.conf; Адресное пространство памяти доступное ядру увеличено для архитектуры amd64 до 6 Гб, а kmem map до 3.6 Гб (отныне значение устанавливается как 60% от адресного пространства ядра); Улучшения в работе системы изолированных окружения jail: Возможность назначения нескольких IP4/IP6 адресов; Поддержка протокола SCTP; Возможность жесткой привязки jail к заданному процессору с помощью утилиты cpuset; Возможность запуска jail окружения с указанием использовать для него отдельную таблицу маршрутизации (FIB); Возможность создания Jail без указания IP-адреса (без поддержки сети), по аналогии с chroot(8); Для выполнения отладки в ddb(4) добавлены команды "show jails" и "show mount"; Улучшена совместимость в плане работы 32-разрядных jail'ов на 64-разрядных системах; Утилиты и программы: В csup, аналоге cvsup, переписанном на языке Си, появилась поддержка режима CVSMode, при котором осуществляется загрузка CVS репозиториев целиком. Из NetBSD портирован демон btpand с реализацией поддержки профилей Bluetooth Network Access Point (NAP), Group Ad-hoc Network (GN) и Personal Area Network User (PANU); Добавлена новая утилита makefs для создания образа файловой системы на основе дерева директорий; В утилите fsck(8) появилась опция "-D" с реализацией агрессивного режима восстановления серьезно поврежденной файловой системы, когда обычные способы восстановления не помогают или приводят к краху fsck; DNS сервер BIND в базовой системе обновлен до версии 9.4.3-P2. В систему портов добавлена возможность параллельной сборки, что значительно ускоряет процесс компиляции на многоядерных системах. Число параллельно выполняемых работ задается через параметр MAKE_JOBS_NUMBER в /etc/make.conf; Официально поддерживаемая в портах версия KDE обновлена с 3.5.10 (x11/kde3) до 4.2.2 (x11/kde4). Добавлена новая версия GNOME 2.26, вместо 2.22. Улучшение поддержки файловых систем и работы с дисками: В glabel добавлена возможность использования ufsid меток для уникальной идентификации файловых систем; В gjournal появилась поддержка журналирования корневой файловой системы; В подсистеме cam(4) появилась возможность задания попыток чтения ( sysctl kern.cam.cd.retry_count), что, например, позволяет значительно эффективнее работать утилитам подобным ddrescue при попытках чтения содержимого сбойных CD/DVD; В коде VFS улучшена работа механизма совместной блокировки vnode, что позволяет повысить производительность. По умолчанию возможность выключена, для включения необходимо указать "sysctl vfs.lookup_shared=1"; Улучшение поддержки оборудования: Реализована полная поддержка процессоров семейства UltraSparc-III (Cheetah); Добавлен новый драйвер sdhci(4) с поддержкой PCI SD хост контроллеров (кард-ридеров); Обновлен модуль ядра DRM (Direct Rendering Manager) в котором улучшена поддержка GPU AMD/ATI r500, r600, r700, и IGP XGI V3XE/V5/V8, Intel i915; Обновлены драйверы для сетевых карт Atheros, JMicron, SIS, RealTek, Broadcom. В fxp драйвере появилась поддержка TSO (TCP/IP segmentation offload), WoL (Wake on LAN), вычисления контрольных сумм и установка/очистка VLAN тегов силами сетевой карты; Добавлена поддержка новых IDE/SATA/SAS контроллеров, например Marvell PATA M88SX6121 и nForce MCP67/MCP7. Добавлен драйвер u3g(4) с поддержкой 3G модемов с USB интерфейсом , среди которых: Vodafone Mobile Connect Card 3G, Qualcomm CDMA MSM, Huawei E220, Novatel U740, Sierra MC875U; Пользователи версий 7.0-RELEASE, 7.1-RELEASE, 7.2-BETA, 7.2-RC1, и 7.2-RC2 могут произвести бинарное обновление, выполнив команды: Загружаем обновления: freebsd-update upgrade -r 7.2-RELEASE Устанавливаем обновления, попутно отвечая на вопросы, касающиеся решения конфликтов при обновлении файлов конфигурации: freebsd-update install Перезагружаем систему: shutdown -r now Дополнение: на последней стадии подготовки релиза была выявлена ошибка в управлении блокировками при взаимодействии функций malloc(3)и функциями тредов. Когда многопоточный процесс вызывает системный вызов fork(2) в одном треде и функцию malloc(3)в другом потоке, это может привести к блокировке (deadlock) процесса потомка. Исправление для 7.2-R планируется выпустить после релиза. В ветку 7-STABLE уже внесены исправления.