Представлен sysdig, новый инструмент для диагностики системных проблем

Анонсирован первый выпуск sysdig, нового инструмента для диагностики проблем и изучения особенностей работы системы. Sysdig позволяет сохранить дамп активности системы за определённый промежуток времени, а затем на основании этого дампа детально проанализировать активность в системе, включая данные о системных вызовах, сетевых соединения, открытых файлах и т.п. Код проекта написан на языках Си и Си++ и распространяется под лицензией GPLv2. Работа с программой напоминает расширенное использование инструментов strace, tcpdump и lsof, позволяющее связать данные о трафике, процессах, системных вызовах, файлах и пользователях. Для сбора данных о событиях в системе используется специальный модуль для ядра Linux, а также библиотеки libsinsp и libscap. Поддерживается задание гибких фильтров для отсеивания лишних данных и возможность создавать достаточно сложные правила выборки. Для определения расширенной логики выборки данных предоставляются средства для подключения скриптов на языке Lua. Из примеров типовых сценариев использования sysdig можно отметить вывод деталей о входящих сетевых соединениях и связанных с ними процессах, определение работа с какими файлами приводит к наибольшей нагрузке на систему ввода/вывода, отображение деталей о трафике в привязке к процессу, отслеживание открытия файлов в указанной директории, просмотр списка файлов и директорий к которым обращался пользователь, изучение активности процесса, вывод системных вызовов/файлов/сетевых соединений, работа с которыми завершилась ошибкой и т.п. Для реализации на базе sysdig более сложных сценариев доступна большая коллекция вспомогательных Lua-скриптов, в которой можно найти от реализаций систем монторинга трафика и отслеживания действий пользователя до скриптов для выявления конкретных проблем и специализированных генераторов отчётов в стиле утилиты top. sysdig -ctopprocs_net Bytes Process ------------------------------ 3.59KB wget 2.50KB httpd 1.94KB dropbox