Релиз Chrome 81

Компания Google представила релиз web-браузера Chrome 81. Одновременно доступен стабильный выпуск свободного проекта Chromium, выступающего основой Chrome. Браузер Chrome отличается использованием логотипов Google, наличием системы отправки уведомлений в случае краха, возможностью загрузки модуля Flash по запросу, модулями для воспроизведения защищённого видеоконтента (DRM), системой автоматической установки обновлений и передачей при поиске RLZ-параметров. Изначально Chrome 81 планировалось опубликовать 17 марта, но из-за пандемии коронавируса SARS-CoV-2 и перевода разработчиков на работу на дому выпуск был отложен. Следующий выпуск Chrome 82 будет пропущен, выпуск Chrome 83 запланирован на 19 мая. Основные изменения в Chrome 81: Продолжена реализация защиты от загрузки смешанного мультимедийного контента (когда на HTTPS-странице загружаются ресурсы по протоколу http://). На страницах, открытых по HTTPS, в будущем автоматически будут заменяться ссылки "http://" на "https://" при загрузке изображений (замена по умолчанию отложена до Chrome 85, но в Chrome 81 можно активировать в настройках about:flags). Замена скриптов, iframe, звуковых и видео файлов была реализована в прошлых выпусках. Если изображение недоступно по https, то его загрузка будет блокироваться (вручную можно отметить блокировку через меню, доступное через символ замка в адресной строке). Отключена поддержка протокола FTP. В следующем выпуске весь связанный с FTP код будет удалён из кодовой базы. Для обращения по протоколу FTP рекомендовано использовать внешние FTP-клиенты. Временно поддержку FTP можно вернуть при помощи флага "--enable-ftp" или "--enable-features=FtpProtocol". Дополнение: из-за пандемии коронавируса Google вернул поддержку FTP. Расширен процент пользователей для которых включкена функция группировки вкладок, позволяющая объединять несколько сходных по назначению вкладок в визуально разделённые группы. Каждой группе можно привязать свой цвет и имя. В API WebXR Device добавлена поддержка устройств дополненной реальности. API WebXR позволяет унифицировать работу с различными классами устройств, от стационарных шлемов виртуальной реальности до решений на базе мобильных устройств. Для создания приложений дополненной реальности предложен новый API Web XR Hit Test, который позволяет размещать виртуальные объекты в области видимости камеры, отражающей реальную действительность. Например, можно отобразить виртуальный цветок на снимаемом на камеру подоконнике, выводить информационные метки поверх предметов или расставлять виртуальную мебель, снимая пустую комнату. При сохранении пароля во встроенном менеджере паролей обеспечен вывод предупреждения, если пароль введён на небезопасном сайте. Внесены изменения в условия использования Google (Google Terms of Service), в которых появился отдельный раздел для Google Chrome и Chrome OS. В режиме инкогнито и в гостевом сеансе по умолчанию отключена аутентификация с использованием NTLM / Kerberos. В реализации TLS 1.3 включены расширенные механизмы для противостояния откату на более ранние версии протокола TLS. Ранее защита от отката версии протокола была включена лишь частично из-за несовместимости с некоторыми некорректно работающими прокси-серверами (Palo Alto Networks PAN-OS, Cisco Firepower Threat Defense, ASA c FirePOWER). Сейчас проблемы с совместимостью остались в прошлом, так как большинство производителей подобных прокси выпустили обновления с приведением реализаций TLS в соответствие с требованиями спецификаций. В настройки добавлена опция "chrome://flags/#treat-unsafe-downloads-as-active-content", которая позволяет включить вывод предупреждений при попытке небезопасной загрузки исполняемых файлов по ссылкам со страниц HTTPS (в Chrome 83 подобные предупреждения будут выводиться по умолчанию, а в Chrome 84 загрузки будут блокироваться). Для мобильных устройств добавлена поддержка API Web NFC, позволяющего web-приложениям читать и записывать NFC-тэги. Среди примеров применения нового API в web-приложениях отмечается предоставление информации о музейных экспонатах, проведение инвентаризации, получение сведений с бейджей участников конференций и т.п. Отправка и сканирование тегов производится при помощи объектов NDEFWriter и NDEFReader. Новый API пока доступен только в режиме Origin Trials (экспериментальные возможности, требующие отдельной активации). Origin Trial подразумевает возможность работы с указанным API из приложений, загруженных с localhost или 127.0.0.1, или после прохождения регистрации и получения специального токена, который действует ограниченное время для конкретного сайта. В режиме Origin Trial в API PointerLock предложен флаг unadjustedMovement, при установке которого данные о событиях о движении мыши передаются в чистом виде, без корректировок и ускорения. Стабилизирован и теперь распространяется вне Origin Trials программный интерфейс Badging, позволяющий web-приложениям создавать индикаторы, выводимые на панели или домашнем экране. При закрытии страницы индикатор автоматически убирается. Например, подобным способом можно отображать число непрочитанных сообщений или информацию о каких-то событиях; В API Media Session добавлена возможность отслеживания позиции при воспроизведении композиции. Можно получить данные о скорости воспроизведения, продолжительности и текущем времени воспроизведения, что позволяет создавать собственные интерфейсы для оценки позиции и перемещения по треку. В API INTL реализован метод DisplayNames, через который можно получить локализированные названия языков, стран, валют, элементов дат и т.п. В API PerformanceObserver, предназначенном для сбора данных о состоянии ресурсов во время работы пользователя с web-приложением, реализована возможность использования флага "buffered" с длительно выполняемыми задачами. По умолчанию при выводе изображений Chrome будет учитывать информацию об ориентации из метаданных EXIF. Для явного переопределения данного поведения предложено CSS-свойство "image-orientation". Добавлены мета-тэг и CSS-свойство "color-scheme", позволяющие выбрать цветовую схему для отрисовки элементов интерфейса, таких как кнопки форм и полосы прокрутки. В HTMLAnchorElement добавлен атрибут hrefTranslate, через который можно передать информацию о необходимости перевода страницы на другой язык после перехода по ссылке. Добавлен новый тип событий SubmitEvent, который включает новые свойства, позволяющие узнать элемент, вызов которого привёл к отправке формы. Например, SubmitEvent даёт возможность использовать один обработчик, общий для различных кнопок и ссылок, приводящих к отправке формы. Улучшения в инструментах для web-разработчиков: В контекстное меню, показываемое для сетевых запросов, добавлен пункт "Copy > Copy as Node.js fetch" для копирования в форме fetch-выражения, включающего данные о Cookie. Обеспечен вывод подсказки с неэкранированным вариантом данных при наведении мыши на CSS-свойства "content". В web-консоли повышена детализация сообщений об ошибках при разборе полей в source map. Добавлена настройка "Preferences > Sources > Allow scrolling past end of file", позволяющая запретить прокрутку за конец файла при просмотре исходного текста страницы. В панель Device добавлена симуляция экрана смартфона Moto G4. В панели Cookies обеспечена подсветка жёлтым фоном заблокированных Cookie. В таблицы с Cookies, показываемые в панелях Network и Application, добавлен столбец с данными о приоритете выбора Cookie. Все поля (кроме поля с размером) в таблицах с Cookie теперь доступны для редактирования. Отключение поддержки протоколов TLS 1.0 и TLS 1.1 отложено до выпуска Chrome 84. До выпуска Chrome 83 также отложено включение нового оформления элементов web-форм, которые были оптимизированы для использования на сенсорных экранах. Кроме нововведений и исправления ошибок в новой версии устранено 32 уязвимости. Многие из уязвимостей выявлены в результате автоматизированного тестирования инструментами AddressSanitizer, MemorySanitizer, Control Flow Integrity, LibFuzzer и AFL. Критических проблем, которые позволяют обойти все уровни защиты браузера и выполнить код в системе за пределами sandbox-окружения, не выявлено. В рамках программы по выплате денежного вознаграждения за обнаружение уязвимостей для текущего релиза компания Google выплатила 23 премии на сумму 26 тысяч долларов США (одна премия $7500, одна премия $5000, одна премия 3000, две премии $2000, три премии $1000 и восемь премий $500). Размер 7 вознаграждений пока не определён.