Релиз Firefox 82

Состоялся релиз web-браузера Firefox 82. Кроме того, сформировано обновление ветки с длительным сроком поддержки 78.4.0. На стадию бета-тестирования перешла ветка Firefox 83, релиз которой намечен на 17 ноября. Основные новшества: Внесены улучшения, нацеленные на повышение удобства просмотра видео. Например, в режиме Picture-In-Picture изменено размещение и оформление кнопок управления воспроизведением, которые стали более заметными. Для пользователей macOS предложена клавиатурная комбинация (Option + Command + Shift + правая скобка) для вызова окна Picture-In-Picture, работающая ещё до начала воспроизведения видео. В Windows для аппаратного декодирования видео задействован механизм DirectComposition, позволяющий снизить нагрузку на CPU и продлить время автономной работы. Для всех пользователей Windows 10, имеющих необходимое оборудование, по умолчанию активирован движок композитинга WebRender, написанный на языке Rust и позволяющий добиться существенного увеличения скорости отрисовки и снижения нагрузки на CPU за счёт выноса на сторону GPU операций отрисовки содержимого страницы, которые реализованы через выполняемые в GPU шейдеры. Для Linux в списке блокировки для WebRender остаются проприетарные драйверы NVIDIA, а также драйверы Intel при использовании экранных разрешений 3440x1440 и выше. На платформе Android движок WebRender включён для устройств с GPU Adreno 5xx (Google Pixel, Google Pixel 2/XL, Oneplus 5), Adreno 6xx (Google Pixel 3, Google Pixel 4, Oneplus 6), а также смартфонов Pixel 2 и Pixel 3. Пользователи бинарных драйверов NVIDIA в Linux, которые вручную включили WebRender (gfx.webrender.all=true в about:config) и не пользуются композитингом, могут столкнуться с регрессией, которая выражается в том, что верхняя половина экрана превращается в закрашенный прямоугольник. Решить проблему можно, либо включив композитинг, либо экспортировав любую из следующих переменных окружения: MOZ_GTK_TITLEBAR_DECORATION=system (к сожалению, она включает заголовок окна) или MOZ_X11_EGL=1 (эта опция выключает поддержку WebGL 2). Также можно отключить на время WebRender. Проведена работа по ускорению загрузки страниц и сокращению времени запуска браузера. Сайты с разбивкой на основе элементов flexbox стали загружаться на 20% быстрее, а восстановление сеансов после перезапуска требует на 17% меньше времени. На платформе Windows примерно на 10% ускорено открытие новых окон. Добавлена возможность ознакомления с новыми статьями при сохранении страницы в сервис Pocket через кнопку на панели - во всплывающем диалоге теперь показывается подборка статей с добавляемого сайта, которые выбраны другими пользователями Pocket. В экранном ридере, который используется людьми с проблемами со зрением, обеспечено корректное разделение абзацев, улучшена работа при автозаполнении номеров кредитных карт и добавлено отображение ошибок при некорректном заполнении параметров в диалоге вывода на печать. Расширен набор настроек, синхронизируемых между устройствами. Например, добавлена синхронизация параметров прокрутки, а также настроек экранной клавиатуры и режима picture-in-picture. В собираемую на платформе Linux телеметрию (about:support) добавлен учет сведений о протоколе оконной подсистемы (Wayland, Wayland/DRM, XWayland или X11). Включён по умолчанию API Media Session, предоставляющий средства для настройки блока с информацией о воспроизведении мультимедийного контента в области уведомлений. Через данный API web-приложение может настроить оформление информации в области уведомлений, например, разместить кнопки приостановки, перемещения по потоку или переходу к следующей композиции. Также при помощи API Media Session можно добавить обработчики для мультимедийных кнопок, срабатывающие в области уведомлений или при активном хранителе экрана. В атрибуте sandbox элемента <iframe> добавлена поддержка флага "allow-downloads" для блокирования автоматических загрузок, инициируемых из iframe. В CSS добавлен псевдо-элемент "::file-selector-button", через который можно настроить кнопку выбора файлов внутри элемента <input type="file">. Указание некорректного селектора в псевдо-классах :is() и :where() теперь не приводит к прекращению отрисовки всего списка. Директива inline в заголовке Content-Disposition теперь игнорируется, если в элементе <a> задан атрибут "download". Прекращена поддержка вложенных и рекурсивных вызовов метода Document.execCommand(), которые теперь возвращают значение "false". Element.setPointerCapture() теперь генерирует исключение NotFoundError при передаче некорректного идентификатора указателя. Свойство window.name теперь сбрасывается в пустое значение при загрузке во вкладке страницы с другим доменом и восстанавливается при нажатии кнопки "назад" и восстановлении старой страницы. В инструментах для web-разработчиков в панели инспектирования сети добавлено отображение серверных событий (Server-sent event), которые позволяют в любое время отследить данные, отправляемые сервером через механизм Server-sent. Панель сообщений (Message) в инструментах инспектирования сети объединена с панелью ответов сервера (Response), что позволяет просматривать сообщения, передаваемые через WebSockets и server-sent event, непосредственно рядом со списком ответов сервера. В версии для платформы Android: Добавлен просмотр загрузок; Улучшен поиск; Обеспечен вывод наиболее часто открываемых сайтов; В блоке New Tab обеспечен показ недавно закрытых вкладок; Реализовано автоматическое закрытие вкладок; Добавлена поддержка переноса паролей для пользователей с master-паролем (теперь Primary Password); Реализована возможность переключения вкладок через жест с горизонтальным сдвигом на адресной строке; Включён режим зашиты от отслеживания перемещений через редиректы; Включена автоматическая очистка сторонних Cookie. Тестировавшиеся в бета-версии Firefox 82 не блокирующий другие вкладки новый диалог web-аутентификации, интерфейс добавления собственных поисковых движков и служебная страница about:processes отложены до следующего выпуска. В Firefox 83 также ожидается добавление в настройки опции для включения режима "HTTPS Only" (автоматическое перенаправление с HTTP на HTTPS), реализация контекстного меню для вывода на печать выделенного фрагмента, активация WebRender для GPU Intel Gen12 и задействование нового JIT-компилятора WarpBuilder, обеспечивающего ускорение от 5 до 20%. Кроме новшеств и исправления ошибок в Firefox 82 устранено 15 уязвимостей, из которых 12 помечены как опасные. 10 уязвимостей (собраны под CVE-2020-15683 и CVE-2020-15684) вызваны проблемами работы с памятью, такими как переполнения буферов и обращение к уже освобождённым областям памяти. Потенциально данные проблемы способны привести к выполнению кода злоумышленника при открытии специально оформленных страниц.