Пользователям FreeBSD требуется обновить загрузчик перед установкой обновлённого ядра

Разработчик Dimitry Andric в списке рассылки src-head сообщил о том, что при обновлении систем FreeBSD-CURRENT, -9.x и -10.x требуется обновление загрузчика. Необходимость обновления загрузчика связана с добавлением секции SHT_AMD64_UNWIND в модули ядра в ревизии 296428. Суть заключается в том, что при рекомендуемой схеме обновления системы make buildworld make buildkernel make installkernel reboot make installworld ... В случае если у вас есть модули ядра, требующие загрузки при старте системы, и вы провели обновление по указанному сценарию, то после стадии "make installkernel && reboot" во всех установленных модулях ядра будет иметься вышеуказанная секция SHT_AMD64_UNWIND, но так как загрузчик пока не обновлён на этапе "make installworld", при перезагрузке он не обработает данные секции в модулях, что может привести к панике ядра при загрузке. В /usr/src/UPDATING уже добавлено напоминание о данном нововведении. В нём рекомендуется проводить обновление с шагами: make buildworld make kernel KERNCONF=YOUR_KERNEL_HERE make -C sys/boot install ... далее как обычно... Включение новой секции в модулях ядра стало необходимым после перехода на clang-3.8. Дополнение: Данные изменения внесены также в стабильные ветки 9-STABLE и 10-STABLE.