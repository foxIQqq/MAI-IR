Изучение изменения потребления памяти Firefox в многопроцессном режиме

Тестирование работы Firefox в многопроцессном режиме с одним выделенным процессом обработки контента (предлагается по умолчанию) показало возрастание потребления памяти в среднем на 10-20%, в сравнении с работой Firefox в обычном однопроцессном режиме, при котором контент и интерфейс обрабатываются одним и тем же процессом. При увеличении числа дополнительных процессов обработки контента увеличение потребления памяти может достигать двух раз при 8 обработчиках контента и сильно зависит от числа открытых вкладок, типа контента и установленных дополнений. С другой стороны, чем больше процессов-обработчиков, тем меньше фрагментация, эффективнее возвращается память системе после закрытия вкладок и активнее используются возможности многоядерных процессоров. При проведении теста в браузере открывалось 100 типовых URL в 30 вкладках с ожиданием в 10 секунд перед открытием новой ссылки в каждой вкладке. При тестировании в Linux (64-bit) максимальное потребление памяти cразу после открытия ссылок составило в обычном Firefox 457 MiB (после закрытия вкладок 242 MiB), при включении одного процесса обработки контента - 544 MiB (322 MiB), двух - 586 MiB (304 MiB), четырёх - 714 MiB (285 MiB), восьми - 871 MiB (281 MiB). При запуске в OS X (64-bit) потребление памяти составило для обычного Firefox 889 MiB (621 MiB), при включении одного процесса обработки контента - 1,038 MiB (800 MiB), двух - 1,243 MiB (799 MiB), четырёх - 1,397 MiB (755 MiB), восьми - 1,694 MiB (747 MiB). При сравнении с другими браузерами, Firefox в многопроцессном режиме потребляет заметно меньше памяти чем Chrome, но проигрывает Safari. Отставание Chrome объясняется тем, что Firefox тестировался в конфигурации с одним процессом обработки контента для всех вкладок, а Chrome запускал по отдельному процессу на каждую вкладку.