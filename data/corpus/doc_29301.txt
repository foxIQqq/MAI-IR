Разработчики Firefox обратили внимание на проблемы с работой WebGL в Linux

При подготовке девятой бета-версии web-браузера Firefox 4, разработчики Mozilla отметили проблемы с работой WebGL и OpenGL-акселерации на платформе Linux. В конечном итоге, возможность работы с WebGL на платформе Linux была ограничена только проприетарным драйвером NVIDIA, все остальные драйверы, включая AMD Catalyst, были занесены в черный список. Подчеркивается, что проблема не связана только с Firefox и проявляется при тестировании поддержки WebGL в других браузерах (например, тестирование WebGL в последнем релизе Google Chome приводит в Ubuntu 10.04 к краху X-сервера). При прохождении официального тестового комплекта WebGL в Linux-системе с последними версиями открытых драйверов для видеокарт Intel и ATI в процессе тестирования в случайные моменты времени наблюдаются крахи. Похожая ситуация наблюдается и для других драйверов для платформы Linux. По словам представителя проекта Mozilla, говорить о включении в белый список Linux-драйверов можно будет только при полном отсутствии крахов и при успешном прохождении более 90% тестовых заданий, при условии, что проваленные тесты не являются существенными. Например, проприетарный драйвер NVIDIA проходит 5241 из 5344 тестов, что является достаточным для его поддержки. Разработчики Mesa уже приступили к анализу и исправлению выявленных на этапе тестирования WebGL ошибок. В частности, выявлено, что крах возникает при определенном стечении обстоятельств при выполнении операции очистки экранного буфера в DRI2-обработчике Mesa. Так как следующий релиз Mesa ожидается через несколько месяцев, устранить все ошибки до выхода релиза Firefox 4 не представляется реальным, но даже если корректирующий релиз Mesa будет выпущен оперативно, он сможет быть интегрирован только в весенние релизы популярных дистрибутивов Linux. В связи с этим, Linux-пользователи Firefox 4 смогут использовать WebGL только при использовании проприетарного драйвера NVIDIA, при тестировании которого стабильность работы была на должном уровне. Отключить проверку в черном списке можно путем установки переменной окружения MOZ_GLX_IGNORE_BLACKLIST=1 перед запуском Firefox, но в этом случае стабильность работы браузера не гарантируется.