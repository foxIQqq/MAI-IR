Проект Sandcastle подготовил сборки Linux и Android для установки на iPhone 7

Проект Sandcastle опубликовал сборки Linux и Android, пригодные для установки на смартфоны iPhone 7 и 7+ в дополнение к iOS. Проектом также обеспечена ограниченная поддержка iPod Touch 7G и ведётся портирование на различные модели iPhone 6, 8, X, 11 и iPod Touch 6G. Наработки опубликованы на GitHub. Сборки находятся на стадии бета-тестирования и не охватывают некоторые возможности, например, не поддерживается звук, камера, ускорение GPU, осуществление звонков через сотовых операторов. При этом при использовании iPhone 7 работают Wi-Fi, Bluetooth, вывод на экран, мультитач, управление питанием, I2C, SPI, USB, AIC, NAND Flash, APCIe, DART и чип управления зарядкой Tristar. По сравнению с iPhone 7 при использовании Sandcastle на iPod Touch 7G недоступны Wi-Fi, Bluetooth и мультитач. Для снятия защиты, привязывающей устройство к прошивке Apple, предлагается использовать jailbreak-инструментарий checkra1n. Прошивка загружается непосредственно из Flash устройства и хранится с использованием штатной файловой системы APFS (создаётся новый раздел), что позволяет Sandcastle сосуществовать с iOS. Исходная прошивка с iOS сохраняется и в любой момент пользователь может перезагрузить устройство на свой выбор в окружение с iOS или Android. Инструкция по установке Sandcastle приводится в файле "README.txt", размещённом внутри предлагаемых для загрузки zip-архивов (после установки checkra1n нужно скопировать на телефон файлы setup.sh, loadlinux.c и Android.lzma, запустить setup.sh, собрать loadlinux и запустить "loadlinux Android.lzma dtbpack"). Для доступа к файловой системе APFS применяется модифицированный драйвер linux-apfs, расширенный поддержкой параллельного монтирования подразделов и возможностью работы со сжатыми файлами. Несмотря на то, что использованная реализация APFS поддерживает работу в режиме записи, данный режим пока является экспериментальным и по умолчанию разделы монтируются в режиме только для чтения (данные в Android-окружении не сохраняются и теряются после перезапуска). Проектом используется модифицированное ванильное ядро Linux. Для сборки системного Linux-окружения применяется buildroot. Android-окружение базируется на платформе Android 10. По умолчанию предустановлены домашний экран OpenLauncher и программа для обмена сообщениями Signal. Для установки Android-приложений предлагается использовать утилиту adb. Поддерживаются APK-пакеты на Java. APK-пакеты с исполняемым кодом для ARMv8 требуют пересборки (пакеты для ARMv7 не поддерживаются). Целью разработки является предоставление пользователям iPhone свободы выбора платформы и избавление от навязываемых компанией Apple ограничений и привязок к оборудованию. По мнению разработчиков проекта, владельцем оборудования является купивший телефон пользователь, а не компания Apple, поэтому он волен устанавливать на устройства любые операционные системы. Разработка ведётся командой, десять лет назад развивавшей проект iPhone Linux, а теперь работающей в компании Сorellium, предлагающей облачный сервис с виртуальными окружениями с iOS для разработчиков. В прошлом году компания Apple подала судебный иск против Сorellium за обход защиты iOS и привязки к устройствам (jailbreak).