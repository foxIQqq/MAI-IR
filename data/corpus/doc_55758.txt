Релиз Firefox 92

Состоялся релиз web-браузера Firefox 92. Кроме того, сформировано обновление веток с длительным сроком поддержки - 78.14.0 и 91.1.0. На стадию бета-тестирования переведена ветка Firefox 93, релиз которой намечен на 5 октября. Основные новшества: Добавлена возможность автоматического проброса на HTTPS, используя запись "HTTPS" в DNS в качестве аналога HTTP-заголовка Alt-Svc (HTTP Alternate Services, RFC-7838), который позволяет серверу определить альтернативный способ обращения к сайту. При отправке DNS-запросов, помимо записей "A" и "AAAA" для определения IP-адресов, теперь также запрашивается DNS-запись "HTTPS", через которую передаются дополнительные параметры установки соединения. Реализована поддержка корректного воспроизведения видео в полном цветовом диапазоне (Full RGB). WebRender по умолчанию активирован для всех пользователей Linux, Windows, macOS и Android, без исключений. В выпуске Firefox 93 будет прекращена поддержка опций для отключения WebRender (gfx.webrender.force-legacy-layers и MOZ_WEBRENDER=0) и данный движок станет обязательным. WebRender написан на языке Rust и позволяет добиться существенного увеличения скорости отрисовки и снижения нагрузки на CPU за счёт выноса на сторону GPU операций отрисовки содержимого страницы, которые реализованы через выполняемые в GPU шейдеры. Для систем со старыми видеокартами или проблемными графическими драйверами в WebRender будет использован режим программной растеризации (gfx.webrender.software=true). Переработано оформление страниц с информацией об ошибках в сертификатах. Включены наработки, связанные с реструктуризацией управления памятью JavaScript, позволившие поднять производительность и сократить потребление памяти. Решена проблема со снижением производительности во вкладках, обрабатываемых в том же процессе, что и вкладка с открытым диалогом-предупреждением (alert()). В сборках для macOS: включена поддержка изображений с цветовыми профилями ICC v4, в меню File добавлен пункт для вызова функции macOS Share, к общему стилю Firefox приближено оформление панели с закладками. В CSS-свойство "break-inside", позволяющее настроить поведение разрывов при фрагментированном выводе, добавлена поддержка параметров "avoid-page" и "avoid-column" для запрета разрывов страниц и столбцов в основном блоке. В CSS-свойстве font-size-adjust реализован синтаксис с двумя параметрами (например, "font-size-adjust: ex-height 0.5"). В CSS-правило @font-face добавлен параметр size-adjust, позволяющий масштабировать размеры глифа для определённого начертания шрифта, не изменяя значение CSS-свойства font-size (область под символ остаётся той же, но меняется размер глифа в этой области). Добавлена поддержка CSS-свойства accent-color, при помощи которого можно указать цвет индикатора выбора элемента (например, цвет фона выбранного checkbox). В CSS-свойство font-family добавлена поддержка параметра system-ui, при указании которого используется глифы из предлагаемого по умолчанию системного шрифта. В JavaScript добавлено свойство Object.hasOwn, представляющее собой упрощённый вариант Object.prototype.hasOwnProperty, реализованный в форме статического метода. Object.hasOwn({ prop: 42 }, 'prop') // → true Добавлен параметр "Feature-Policy: speaker-selection", позволяющий управлять предоставлением в WebRTC доступа к устройствам вывода звука, таким как динамики и наушники. Для собственных HTML-элементов (custom element) реализовано свойство disabledFeatures. Предоставлена возможность отслеживания выделения текста в областях <input> и <textarea> через обработку событий selectionchange в HTMLInputElement и HTMLTextAreaElement. Кроме новшеств и исправления ошибок в Firefox 92 устранено 8 уязвимостей, из которых 6 помечены как опасные. 5 уязвимостей (собраны под CVE-2021-38494 и CVE-2021-38493) вызваны проблемами работы с памятью, такими как переполнения буферов и обращение к уже освобождённым областям памяти. Потенциально данные проблемы способны привести к выполнению кода злоумышленника при открытии специально оформленных страниц. Ещё одна опасная уязвимость CVE-2021-29993 позволяет в версии для Android подменить элементы интерфейса через манипуляции с протоколом "intent://". В бета-выпуске Firefox 93 отмечается включение поддержки формата изображений AVIF (AV1 Image Format), в котором задействованы технологии внутрикадрового сжатия из формата кодирования видео AV1.