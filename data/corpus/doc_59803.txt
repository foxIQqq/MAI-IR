Проект Wine опубликовал Vkd3d 1.9 с реализацией Direct3D 12

Проект Wine опубликовал выпуск пакета vkd3d 1.9 с реализацией Direct3D 12, работающей через трансляцию вызовов в графический API Vulkan. В состав пакета входят библиотеки libvkd3d с реализаций Direct3D 12, libvkd3d-shader c транслятором 4 и 5 модели шейдеров и libvkd3d-utils с функциями для упрощения портирования приложений Direct3D 12, а также набор демонстрационных примеров, включая порт glxgears на Direct3D 12. Код проекта распространяется под лицензией LGPLv2.1. Библиотека libvkd3d поддерживает большую часть возможностей Direct3D 12, включая средства для графики и вычислений, очереди и списки команд, дескрипторы и дескрипторы кучи, корневые сигнатуры, неупорядоченный доступ, Sampler-ы, сигнатуры команд, корневые константы, непрямую (indirect) отрисовку, методы Clear*() и Copy*(). В libvkd3d-shader реализована трансляция байткода 4 и 5 моделей шейдеров в промежуточное представление SPIR-V. Поддерживаются вершинные, пиксельные, тесселяционные, вычислительные и простые геометрические шейдеры, сериализация и десериализация корневой сигнатуры. Из шейдерных инструкций реализованы арифметические, атомарные и битовые операции, операторы сравнения и управления потоком передачи данных, инструкции sample, gather и load, операции неупорядоченного доступа (UAV, Unordered Access View). В новой версии: Добавлена утилита vkd3d-dxbc для инспектирования блобов DXBC и продолжена работа по улучшению компилятора шейдеров на языке HLSL (High-Level Shader Language). Реализованы встроенные функции clip(), ddx_coarse(), ddy_coarse(), ddx_fine(), ddy_fine(), tex1D(), tex2D(), texCUBE() и tex3D(). В функции vkd3d_shader_scan() появилась возможность извлечения информации о дескрипторе для шейдеров d3dbc. Добавлена поддержка свёртки констант для операторов сравнения, min() и max() с числами с плавающей запятой, логических операций AND и OR, квадратных корней и логарифмов. Упрощено определение объектов мультисэмпловых текстур. Для функций реализован модификатор "inline". В функции ID3D12GraphicsCommandList::CopyResource() добавлена поддержка копирования между форматами цвета и глубины/масок (stencil). Добавлена поддержка интерфейса ID3D12Fence1. Добавлены структуры vkd3d_shader_scan_signature_info и vkd3d_shader_varying_map_info, а также связанные с ними функции vkd3d_shader_free_scan_signature_info() и vkd3d_shader_build_varying_map().