Доступен Mozilla WebThings Gateway 0.10, шлюз для умного дома и IoT-устройств

Компания Mozilla опубликовала новый выпуск продукта WebThings Gateway 0.10, который в сочетании с библиотеками WebThings Framework образует платформу WebThings для обеспечения доступа к различным категориям потребительских устройств и использования универсального Web Things API для организации взаимодействия с ними. Код проекта написан на языке JavaScript с использованием серверной платформы Node.js и распространяется под лицензией MPL 2.0. Прошивки с шлюзом подготовлены для различных моделей Raspberry Pi. Также доступны пакеты для OpenWrt и Debian, а на базе OpenWrt развивается готовый дистрибутив с интегрированной поддержкой Things Gateway, предоставляющий унифицированный интерфейс для настройки умного дома и беспроводной точки доступа. В новом выпуске: Добавлена поддержка умных термостатов, используемых для регулирования температуры в помещении. Поддерживаются такие модели, как Zigbee Zen Thermostat, Centralite HA 3156105 и Z-Wave Honeywell TH8320ZW1000. Через предоставляемый платформой web-интерфейс можно удалённо наблюдать за температурой в доме, выставлять режимы обогрева или охлаждения, менять целевую температуру. Также можно создаваться правила, реагирующие на изменение температуры, например, включающие обогревательный прибор или кондиционер при достижении определённых температурных границ или в привязке ко времени суток; Добавлена возможность управления умными замками, поддерживающими протокол Zigbee или Z-Wave, такими как Yale YRD226 Deadbolt и Yale YRD110 Deadbolt. Находясь вне дома, пользователь может удостовериться, что не забыл закрыть дверь, и при необходимости открыть или закрыть замок удалённо. Через задание правил можно автоматизировать запирание двери в определённое время или отправлять уведомление, если замок остался открытым; Добавлен новый тип дополнений, позволяющих расширять возможности пользовательского интерфейса. Например, при помощи дополнений можно добавить новые секции на основное меню или реализовать новые экраны с дополнительной функциональностью. Для создания дополнений предложен новый формат файла-манифеста, созданный по аналогии с манифестами браузерных дополнений на базе технологии WebExtensions; Добавлен новый раздел настроек, посвящённый локализации. Пользователь теперь может выбрать страну, часовой пояс и язык в основном web-интерфейсе, и данные настройки будут учтены во всех используемых дополнениях и правилах при обработке зависимых от местоположения данных, таких как сведения о погоде, рассвете/закате и приливах/отливах. Например, в привязанных ко времени правилах будет учитываться перевод часов на летнее или зимнее время, а в интерфейсе температура выводиться в привычных единицах изменения; Добавлена возможность обращения ко всем Web API платформы через одно WebSocket-соединение (ранее требовалось открытие отдельного соединения для каждого устройства). В консорциуме W3C создана рабочая группа Web Thing Protocol Community Group, которая займётся стандартизацией протокола на базе WebSocket для взаимодействия с устройствами Web of Things; В следующем выпуске ожидается интеграция поддержки голосового управления с использованием устройств Mycroft и реализация новых методов установки. Напомним, что WebThings Gateway представляет собой универсальную прослойку для организации доступа к различным категориям потребительских и IoT-устройств, скрывающую за собой особенности каждой платформы и не требующую использования специфичных для каждого производителя приложений. Для взаимодействия шлюза с IoT-платформами можно использовать протоколы ZigBee и ZWave, WiFi или прямое подключение через GPIO. Шлюз можно установить на плату Raspberry Pi и получить систему управления умным домом, объединяющую все имеющиеся в доме IoT-устройства и предоставляющую средства для мониторинга и управления ими через Web-интерфейс. Платформа также позволяет создавать дополнительные web-приложения, которые могут взаимодействовать с устройствами через Web Thing API. Таким образом, вместо установки своего мобильного приложения для каждого типа IoT-устройств, можно использовать единый унифицированный web-интерфейс. Для установки WebThings Gateway достаточно загрузить предоставленную прошивку на SD-карту, открыть в браузере хост "gateway.local", настроить подключение к WiFi, ZigBee или ZWave, найти имеющиеся IoT-устройства, настроить параметры для доступа извне и добавить самые востребованные устройства на домашний экран. Шлюз поддерживает такие функции, как определение устройств в локальной сети, выбор web-адреса для соединения с устройствами из интернета, создание учётных записей для доступа к web-интерфейсу шлюза, подключение к шлюзу устройств, поддерживающих проприетарные протоколы ZigBee и Z-Wave, удалённое включение и выключение устройств из web-приложения, удалённый мониторинг за состоянием дома и видеонаблюдение. Кроме web-интерфейса и API в шлюзе также реализована экспериментальная поддержка голосового управления, позволяющая распознавать и выполнять голосовые команды (например, "включи свет на кухне"). WebThings Framework предоставляет набор заменяемых компонентов для создания IoT-устройств, которые могут напрямую взаимодействовать c использованием Web Things API. Подобные устройства могут автоматически определяться шлюзами на базе WebThings Gateway или клиентским ПО (используется mDNS) для последующего мониторинга и управления через Web. Реализации серверов для Web Things API подготовлены в форме библиотек на Python, Java, Rust, Arduino и MicroPython.