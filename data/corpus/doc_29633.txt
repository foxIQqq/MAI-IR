В дисплейном сервере Wayland налажена работа с видеокартами NVIDIA и ATI

Разработчики дисплейного сервера Wayland сообщили о реализации поддержки прямой работы со свободными драйверами для видеокарт NVIDIA и ATI/AMD, без использования X-сервера. Поддержка карт Intel в Wayland уже была обеспечена ранее. Поддержка проприетарных драйверов AMD Catalyst и NVIDIA пока отсутствует. Для работы Wayland требуется реализация поддержки метода Page Flipping, при котором вместо копирования содержимого буфера в видеопамять, применяется техника быстрого переключения между двумя буферами в видеопамяти, пока один из буферов заполняется, другой отображается на экране. В свободном драйвере ATI Radeon такая поддержка появилась только в DRM-модуле из состава находящегося в разработке Linux-ядра 2.6.38. Для драйвера Nouveau поддержка Page Flipping ожидается только в DRM-модуле для ядра 2.6.39, поэтому в настоящее время для работы требуется наложение дополнительных патчей. Wayland отличается от классического X-сервера тем, что на уровне сервера выполняется только переадресация всех окон, а все операции рендеринга и управления окнами производятся на стороне клиента и передаются для обработки серверу со встроенным композитным менеджером. Сервер не поддерживает API отрисовки и оперирует только с уже сформированными окнами, что позволяет избавится от двойной буферизации, при использовании таких библиотек как GTK+, Qt и Clutter. Все операции отрисовки производятся силами дополнительных библиотек, например, OpenGL ES, FreeType и Cairo. Взаимодействие с аппаратным обеспечением, например, проведение инициализации, переключение видеорежимов (drm modesetting) и управление памятью (GEM) графических карт, производится через KMS-модуль, работающий на уровне ядра, что позволяет обойтись без привилегий суперпользователя.