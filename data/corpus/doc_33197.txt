Представлены патчи для Btrfs с поддержкой алгоритма сжатия LZ4 и реализация утилиты btrfsck

Для файловой системы Btrfs были представлены патчи с поддержкой алгоритма сжатия LZ4, показавшие довольно приятные результаты. LZ4 - скоростной алгоритм сжатия, как правило обгоняющий Snappy по степени сжатия и способный достигать скорости сжатия в 300Мб/сек на одном ядре процессора и скорости распаковки в 1Гб/сек, достигая на многоядерной системе потолка производительности RAM. Также отмечается о создании отдельной экспериментальной ветки в Git-репозитрии Btrfs для тестирования реализации утилиты btrfsck, ориентированной на восстановление целостности повреждённой ФС (добавлена опция "--repair"). Ветка получила название "dangerdonteveruse" которое наглядно указывает на экспериментальный характер разработки, которую пока не рекомендуется использовать, кроме как для тестирования кода. В настоящее время реализована поддержка перестроения записей экстентов, восстановления информации о группах блоков и начальная поддержка работы с повреждёнными группами блоков. Отмечается, что благодаря задействованию механизма COW (copy-on-write) для хранения структур данных (при изменении данные не переписываются, а копируются и сохраняются в новом свободном блоке), файловая система Btrfs в штатом режиме устойчива к сбоям, тем не мнее потребность в fsck вызвана возможностью появления повреждений, вызванных внешними факторами (например, запись напрямую данных на диск каким-то приложением) или нарушением структур данных из-за ошибок в работе сервисных утилит (btrfs-zero-log или btrfs-select-super).