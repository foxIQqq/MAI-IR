Представлены сервис идентификации MyKDE и механизм запуска KDE при помощи systemd

Введён в строй сервис идентификации MyKDE, призванный унифицировать вход пользователей на различные сайты проекта KDE. MyKDE пришёл на смену системе единого входа identity.kde.org, которая была реализована в форме простой PHP-надстройки над OpenLDAP. В качестве причины создания нового сервиса отмечается завязка identity.kde.org на устаревшие технологии, которые мешают обновлению некоторых других систем KDE, а также такие проблемы, как трудоёмкий ручной процесс удаления учётных записей, очень большие задержки перед завершением регистрации (до 30 секунд), неэффективное масштабирование групп, слишком топорные меры против спама. MyKDE написан на языке Python с использованием фреймворка Django и модуля Django-OAuth-Toolkit. Для хранения учётных записей применяется MySQL. Код MyKDE является ответвлением от системы Blender ID, распространяемой под лицензией GPLv3.0. Кроме организации входа в MyKDE также реализована поддержка публичных профилей, позволяющих при желании пользователя сделать видимыми для других участников некоторые сведения о себе, такие как ФИО, аватар, список проектов и ссылки на социальные сети и личный сайт. В настоящее время система идентификации MyKDE уже может использоваться для подключения к KDE Wiki и вскоре будет адаптирована для входа на другие сайты проекта. Существующие учётные записи identity.kde.org, а также информация о привязках к группам, будут автоматически перенесены в момент первого входа пользователя через MyKDE. Регистрация новых учётных записей на время миграции отключена, но пользователь может зарегистрироваться на старом сайте identity.kde.org и он будет перенесён при входе через MyKDE. После окончания периода миграции неперенесённые учётные записи будут заморожены. Дополнительно можно отметить реализацию опционального механизма, позволяющего запускать рабочий стол KDE Plasma при помощи systemd. Отмечается, что применение systemd позволяет решить проблемы с настройкой процесса запуска - штатный скрипт инициализации включает жёстко определённые параметры работы, не допускающие варьирования. Например, нет возможности запустить krunner с другими переменными окружения, управлять выделением системных ресурсов, добавить собственный скрипт, выполняемый в случае перезапуска оболочки, или вывести начальный диалог настройки после загрузки kwin, но до запуска Plasma. Текущий скрипт требует для любого подобного изменения редактирования кода, а systemd предоставляет готовые средства для адаптации под свои нужды, как для разработчиков дистрибутивов, так и для конечных пользователей. Для запуска под управлением systemd подготовлен целевой файл plasma-workspace.target и набор сервисов для запуска различных подсистем KDE. Поддержка старого механизма автозапуска (/etc/xdg/autostart или ~/.config/autostart) сохранена без изменений, благодаря применению механизма автоматической генерации сервисов, появившегося в systemd 246 (на основании файлов .desktop автоматически создаются соответствующие сервисы systemd). Реализованный код планируют включить в состав выпуска KDE Plasma 5.21. По умолчанию будет сохранён старый скрипт, но в будущем, после тестирования и анализа отзывов, не исключается его активации по умолчанию. Для перехода к запуску на базе systemd и просмотра состояния загрузки можно использовать команды: kwriteconfig5 --file startkderc --group General --key systemdBoot true systemctl --user status plasma-plasmashell.service