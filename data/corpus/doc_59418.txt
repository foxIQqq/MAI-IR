Выпуск графического редактора GIMP 2.99.16

Доступен выпуск графического редактора GIMP 2.99.16, продолжающий развитие функциональности будущей стабильной ветки GIMP 3.0, в которой выполнен переход на GTK3, добавлена штатная поддержка Wayland и HiDPI, реализована базовая поддержка цветовой модели CMYK (позднее связывание), проведена значительная чистка кодовой базы, предложен новый API для разработки плагинов, реализовано кэширование отрисовки, добавлена поддержка выделения нескольких слоёв (Multi-layer selection) и обеспечено редактирование в исходном цветовом пространстве. Для установки доступен пакет в формате flatpak (org.gimp.GIMP в репозитории flathub-beta), а также сборки для Windows и macOS. Предполагается, что следующему выпуску будет присвоен статус кандидата в релизы GIMP 3.0. Среди изменений в GIMP 2.99.16: В интерфейсе пользователя предложен режим объединения строки меню с заголовком окна, что позволяет сэкономить вертикальное экранное пространство. При включении режима для окон применяется декорирование на стороне клиента. Включение опции также делает меню видимым в полноэкранном режиме. Переработана тёмная тема оформления, которая воспринималась некоторыми как слишком тёмная. Старый вариант тёмной темы вынесен в отдельную тему "Darker". Официально завершена работа, связанная с переводом кодовой базы с использования библиотеки GTK2 на GTK3 и задействованием новой CSS-подобной системы определения стилей, применяемой в GTK3. Использовавшийся в GIMP для обработки горячих клавиш, кнопок и меню класс GtkAction, который в ветке GTK3 объявлен устаревшим в пользу сокращённого варианта GAction в библиотеке GLib, заменён на надстройку GimpAction, в которой на базе GAction реализована необходимая для GIMP утерянная функциональность. Аналогично подготовлены обвязки над другими изменившимися виджетами, такими как виджеты для меню и панелей (GimpMenu, GimpMenuModel, GimpToolbar, GimpMenuBar). Реализована возможность привязки к одному действию нескольких разных клавиатурных комбинаций. Например, новая возможность позволяет для комбинаций подобных Ctrl+1 учитывать нажатие "1" как в верхнем ряду цифр, так и боковом цифровом блоке, а также реализовать поддержку имеющихся на некоторых клавиатурах специализированных отдельных клавиш, таких как Copy, Cut и Paste. В диалоге "поиск по действиям" реализован показ связанных с действиями элементов меню, что позволяет лучше ориентироваться при выборе действий людям, привыкшим к структуре меню. Добавлена кнопка для показа руководства из раздела помощи для выбранного действия. Улучшена интеграция в GUI операций, использующих движок обработки изображений GEGL (Generic Graphics Library). Реализована возможность простой интеграции в меню сторонних модулей с фильтрами, не требующая создания отдельных плагинов. Разработчику фильтров теперь достаточно определить свойства операции и на его основе автоматически будут сформированы компоненты для интеграции с интерфейсом GIMP. Например, для добавления операции в меню теперь можно использовать GEGL-ключ "gimp:menu-path". Также реализована поддержка вывода внешних фильтров при поиске действий (диалог, показываемый при нажатии "/"), независимо от добавления фильтра в меню. В инструмент Текст добавлена опция "Показывать редактор на холсте" ("Show on-canvas editor"), позволяющая скрыть показываемый при вводе блок с параметрами редактирования, оставив только вводимый текст. В переделанном в прошлом выпуске инструменте "Выравнивание и распределение" ("Align and Distribute") реализована возможность применения опции "Только содержимое слоя" не только к целевым объектам, но и опорному объекту, относительно которого производится выравнивание. В инструменте "Трансформации" предоставлена возможность выбора матрицы преобразования в диалоге, выводимом прямо на холсте, что упрощает копирование матрицы преобразования для использования в других программах после их тестирования в GIMP. Проведена работа по избавлению кода от привязок к вводу и выводу данных только в цветовом пространстве sRGB. Упрощено задание цветов переднего плана и фона в цветовых пространствах, отличных от sRGB. В инструменте "Пипетка" обеспечен показ значений цветов в цветовом пространстве, используемом в изображении. В инструменты "Пипетка" и "Выборочные точки" добавлен режим "Grayscale (%)" для показа значений цветов пикселей в градациях серого, если изображение преобразовано в соответствующий режим. Улучшены диалоги заливки и обведения контура или границы выделения. Опция заливки и обведения одним цветом разделена на два варианта, позволяющих выбирать цвет фона или переднего плана. Реорганизованы инструменты "Обвести выделение" и "Обвести контур", в которых в отдельные секции разделены настройки линии и инструментов рисования. В поле "Залить цветом", показываемое при создании нового изображения или слоя, добавлен новый режим "Заливка нейтральным серым (CIELAB)", который соответствует 50% воспринимаемой яркости (среднее значение между темнотой и светом). Поддержка формата изображений FITS, востребованного в астрономии, переведена на использование библиотеки fitsio, что позволило добавить возможность импорта сжатых файлов (GZIP, HCOMP, PLIO, RICE) с 8/16/32 битами цвета на канал с одинарной и двойной точностью. Добавлена возможность импорта и экспорта обрезанных контуров в файлы в формате PSD. При импорте файлов PSD в случае отсутствия в GIMP определённых возможностей, задействованных в импортируемом файле, обеспечен вывод предупреждения с перечислением данных возможностей. Добавлена процедура "file-psd-load-metadata", позволяющая другим плагинам использовать плагин PSD для загрузки метаданных в формате Photoshop, например, подобные метаданные могут включаться в фалы TIFF и JPEG. Улучшена обработка метаданных в файлах в формате JPEG. Переименованы настройки, связанные с использованием цветовой субдискретизации 4:2:2. Для формата JPEG-XL добавлена начальная поддержка экспорта с использованием цветовой модели CMYK. Добавлена поддержка импорта и экспорта форматов изображений PAM, QOI, Amiga IFF/ILBM и DCX. Продолжена работа по усовершенствованию API для разработки плагинов. Добавлены отдельные классы для различных видов ресурсов (GimpBrush, GimpFont, GimpGradient, GimpPalette и GimpPattern). Улучшены возможности по локализации плагинов. Из продолжающихся работ, которые необходимо завершить до релиза GIMP 3.0, отмечается поддержка Wayland, переработка API для скриптов и плагинов, завершение модернизации системы управления цветом и интеграция поддержки цветового пространства CMYK, пересмотр концепции плавающего выделения (по умолчанию вставка в форме нового слоя) и обновление документации. Среди уже полностью завершённых задач, связанных с GIMP 3.0, кроме перехода на GTK3 упоминается поддержка многослойного выделения и многослойных операций, переход на сборочную систему Meson и переход с intltool на gettext при локализации.