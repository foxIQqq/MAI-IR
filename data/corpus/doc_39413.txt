Проект Mozilla представил rr 1.0.0, отладчик для крупных проектов на С/C++

Проект Mozilla выпустил новый отладчик rr (Record and Replay), нацеленный на упрощение отладки сложно повторяемых ошибок в крупных программных проектах на Си/Си++, таких как Firefox. Процесс отладки с использованием rr основан на двух стадиях - записи истории процесса выполнения и отладки с повторным воспроизведением записанных шагов выполнения. Указанная особенность позволяет использовать rr для отладки проблем, проявляющихся не постоянно и при определённом редком стечении обстоятельств. При традиционной отладке, каждый раз приложение запускается заново и ход его выполнения зависит от множества сторонних факторов. В rr сеансы отладки манипулируют единым записанным ходом выполнения, который полностью повторяется для каждой попытки. Таким образом, при использовании rr достаточно один раз добиться проявления проблемы, что может потребовать десятков запусков исследуемого приложения в разных условиях, после чего выполняется отладка записанного и предсказуемого хода выполнения. Разработчик может сколько угодно раз возвращаться в начало и повторять отладочный проход, не опасаясь, что при очередном выполнении проблема не проявится. Для записи хода выполнения приложения используется ptrace. Замедление выполнения программы в режиме записи составляет в среднем 20-40%. Для непосредственного процесса отладки используется привычный gdb, надстройкой над которым выступает rr. В рабочем процессе rr может выступать в качестве почти полной замены gdb. Ограничения сводятся к невозможности поменять в процессе значения регистров и памяти, а также невозможности отладки программ, обменивающихся данными с другими процессами по разделяемой памяти. В настоящее время поддерживается только работа на 32-разрядных системах x86, поддержка x86_64 будет добавлена позднее. Отладка многопоточных приложений производится только в условиях эмуляции одноядерного CPU.