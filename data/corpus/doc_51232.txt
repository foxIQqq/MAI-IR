Релиз сетевого конфигуратора NetworkManager 1.20.0

Опубликован новый стабильный релиз интерфейса для упрощения настройки параметров сети - NetworkManager 1.20. Плагины для поддержки VPN, OpenConnect, PPTP, OpenVPN и OpenSWAN развиваются в рамках собственных циклов разработки. Основные новшества NetworkManager 1.20: Добавлена поддержка беспроводных Mesh-сетей, каждый узел в которых связан через соседние узлы; Проведена чистка от устаревших компонентов. В том числе удалена библиотека libnm-glib, на смену которой в NetworkManager 1.0 пришла библиотека libnm, удалён плагин ibft (для передачи данных о сетевой конфигурации от прошивки следует использовать nm-initrd-generator из initrd) и прекращена поддержка настройки "main.monitor-connection-files" в NetworkManager.conf (следует явно вызывать "nmcli connection load" или "nmcli connection reload"); По умолчанию активирован встроенный DHCP-клиент (режим "internal") вместо ранее используемого приложения dhclient. Изменить значение по умолчанию можно при помощи сборочной опции "--with-config-dhcp-default" или через настройку main.dhcp в файле конфигурации; Добавлена возможность настройки дисциплины управления очередями ожидающих отправки пакетов fq_codel (Fair Queuing Controlled Delay) и действия mirred для зеркалирования трафика; Для дистрибутивов предоставлена возможность размещения скриптов диспетчеризации в каталоге /usr/lib/NetworkManager, что можно использовать в системных образах, доступных в режиме только для чтения и очищающих /etc при каждом запуске; В плагин keyfile добавлена поддержка каталогов в режиме только для чтения ("/usr/lib/NetworkManager/system-connections"), профили в которых могут быть изменены или удалены через D-Bus (в этом случае недоступные для изменения файлы в /usr/lib/ переопределяются файлами, сохраняемыми в /etc или /run); В libnm переработан код разбора настроек в формате JSON и обеспечена более строгая проверка параметров; В правилах маршрутизации по адресу источника (policy routing) добавлена поддержка атрибута "suppress_prefixlength"; Для VPN WireGuard реализована поддержка скриптов для автоматического назначения маршрута по умолчанию "wireguard.ip4-auto-default-route" и "wireguard.ip6-auto-default-route"; Переработана реализация плагинов управления настройками и метода хранения профилей на диске. Добавлена поддержка миграции профилей соединений между плагинами; Хранимые в памяти профили теперь обрабатываются только плагином keyfile и сохраняются в каталоге /run, что позволяет избежать потери профилей после перезапуска NetworkManager и даёт возможность использовать API на основе ФС для создания профилей в памяти; Добавлен новый D-Bus метод AddConnection2(), позволяющий заблокировать автоподключение профиля в момент его создания. В метод Update2() добавлен флаг "no-reapply", при котором изменение содержимого профиля соединения не приводит к автоматическому изменению фактической конфигурации устройства до момента реактивации профиля; Добавлена настройка "ipv6.method=disabled", позволяющая отключить IPv6 для устройства.