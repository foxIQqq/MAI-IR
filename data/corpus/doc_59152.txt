Выпуск композитного сервера Weston 12.0

После восьми месяцев разработки опубликован стабильный релиз композитного сервера Weston 12.0, развивающего технологии, содействующие появлению полноценной поддержки протокола Wayland в Enlightenment, GNOME, KDE и других пользовательских окружениях. Разработка Weston нацелена на предоставление высококачественной кодовой базы и рабочих примеров для использования Wayland в десктоп-окружениях и встраиваемых решениях, таких как платформы для автомобильных информационно-развлекательных систем, смартфонов, телевизоров и прочих потребительских устройств. Код проекта распространяется под лицензией MIT. Смена значительного номера версии Weston обусловлена изменениями ABI, нарушающими совместимость. Изменения в новой ветке Weston: Добавлен бэкенд для организации удалённого доступа к рабочему столу - backed-vnc, выполняющий функции, сходные с backend-rpd. Протокол VNC реализован при помощи aml и neatvnc. Поддерживается аутентификация пользователя и шифрование канала связи (TLS). Добавлен бэкенд для работы с мультимедийным сервером PipeWire. Изменения в бэкенде DRM (Direct Rendering Manager): Реализована поддержка конфигураций с несколькими GPU. Для задействования дополнительных GPU предложена опция "--additional-devices список_устройств_вывода". Добавлена поддержка протокола tearing-control для отключения вертикальной синхронизации (VSync) с кадровым гасящим импульсом, применяемой для защиты от появления разрывов при выводе (tearing). В игровых программах отключение VSync позволяет сократить задержки ври выводе на экран, ценой появления артефактов из-за разрывов. Добавлена поддержка определения типов содержимого для HDMI (графика, фотографии, кино и игры). Добавлено и когда это возможно задействовано свойство поворота плоскости. Добавлена поддержка отложенных коннекторов (writeback connector), применяемых для создания скриншотов. Добавлено свойство для определения уровня прозрачности плоскости. Для разбора метаданных EDID задействована внешняя библиотека libdisplay-info. В backend-wayland реализованы операции изменения размера, используя расширение xdg-shell. В бэкенде удалённого доступа backend-rdp добавлена предварительная поддержка многомониторных систем (multi-head). В бэкенде backend-headless, предназначенном для работы на системах без дисплея, добавлена поддержка декорации вывода, применяемой для тестирования плагина color-lcms. Объявлен устаревшим и отключён по умолчанию компонент launcher-logind, вместо которого рекомендуется использовать launcher-libseat, также поддерживающий logind. В libweston/desktop (libweston-desktop) реализована поддержка состояния ожидания, применяемого на стадии до прикрепления к клиенту буфера вывода, что может использоваться, например, для организации запуска клиента с самого начала в полноэкранном режиме. Реализован протокол weston-output-capture, предназначенный для создания скриншотов и выступающий более функциональной заменой старого протокола weston-screenshooter. Добавлена поддержка протокола xwayland_shell_v1, позволяющего создать объект xwayland_surface_v1 для определённой поверхности wl_surface. В библиотеке libweston реализована поддержка аутентификации пользователей через PAM и добавлена поддержка 4 версии программного интерфейса wl_output. В процесс compositor добавлен упрощённый режим выбора бэкенда, оболочки и отрисовщика, позволяющий использовать синтаксис "--backend=headless", "--shell=foo" и "--renderer=gl|pixman" вместо "--backend=headless-backend.so", "--shell=foo-shell.so" и "--renderer=gl-renderer.so". В клиенте simple-egl появилась поддержка протокола fractional-scale, позволяющего использовать нецелые значения масштаба, и реализован режим вертикальной отрисовки панели. В оболочке для автомобильных информационно-развлекательных систем ivi-shell реализована активация фокуса ввода с клавиатуры для поверхности xdg-shell, реализованная по аналогии с активацией ввода в оболочках desktop-shell и kiosk-shell. Разделяемая библиотека libweston-desktop интегрирована в библиотеку libweston, связывание приложений с libweston позволит получить доступ ко всем функциям, ранее предоставляемым в libweston-desktop.