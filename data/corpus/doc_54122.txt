Релиз пакета для создания 2D-анимации Synfig 1.4

После более двух лет разработки состоялся релиз Synfig 1.4, одного из самых мощных свободных пакетов для векторной 2D-анимации, используемого при производстве отечественного анимационного проекта "Моревна" (Morevna). Пакет разработан специально для анимации и позволяет создавать работы кинематографического качества без рутинной промежуточной прорисовки каждого кадра. Код проекта написан на С++ и распространяется под лицензией GPLv3. Сборки Synfig формируются для Linux (AppImage), Windows и macOS. Synfig примечателен наличием средств для композитинга на основе слоёв (в качестве слоёв можно использовать геометрические фигуры, градиенты, фильтры, искажения, преобразования, фракталы и т.п.) и полной поддержкой контурных градиентов, которые позволяют добавлять мягкое затенение анимации без необходимости рисовать его на каждом кадре. Редактор также предоставляет полноценную поддержку рисования с использованием планшетов, в том числе с возможностью изменения толщины линии в зависимости от интенсивности нажатия. За исключением импортированных растровых изображений, редактор манипулирует векторными объектами, что делает создаваемые работы независимыми от экранных разрешений. Плавность анимации достигается благодаря автоматической интерполяции изменений изображений между ключевыми кадрами. Для обеспечения корректной цветопередачи и большого диапазона яркости применяется технология HDRI (High Dynamic-Range Imaging) и вычисления с плавающей точкой. Ключевые новшества Synfig 1.4: В панели Graphs кривые теперь можно редактировать через набор контрольных точек, перемещая их для изменения формы кривой. Проведена большая чистка кода, связанного с воспроизведением звука. Решены проблемы, связанные с синхронизацией звука. Добавлена панель для визуализации звуковой волны, упрощающая синхронизацию анимации со звуковым треком. В виджет трансформации добавлена специальная контрольная точка, упрощающая изменение исходной позиции для трансформации. Добавлена операция "bake", позволяющая сформировать анимацию любого параметра, преобразовав интерполированную кривую в набор путевых точек. В панели TimeTrack появилась возможность определения диапазона для воспроизведения и зацикливания воспроизведения. В контекстное меню слоёв с изображениями добавлен пункт "Edit image in external tool…" для открытия изображения во внешнем графическом редакторе. Восстановлена корректная работа функции "onion-skin", которая в ветке 1.2 была ограничена возможностью отображения только одного слоя. Кроме того, onion-skin теперь может привязываться не только к ключевым, но и к обычным кадрам. Упрощён импорт наборов изображений, для которого в меню File теперь предложен пункт "Import sequence…". Реализована поддержка векторизации растровых изображений - Synfig Studio теперь может конвертировать растровое изображение в векторный вариант. Алгоритм векторизации перенесён из программы OpenToonz. Добавлена начальная поддержка импорта видео-файлов. Импорт файлов AVI и MP4 пока выполняется очень медленно, но для анимированных GIF-изображений работает вполне сносно. Добавлена поддержка экспорта анимации в формате Lottie JSON, который можно использовать для встраивания на web-страницы и воспроизведения в браузере. Настройки рендеринга по умолчанию переведены на использование формата AVI и кодека mpeg4. Для более высокого качества опционально доступен кодек H.264 в режиме Lossless. Проведена оптимизация движка рендеринга. Сцены с большим числом слоёв стали обрабатываться существенно быстрее. Полностью переписана реализация слоя Outline и вынесены оптимизации в слои Region, Checkerboard и SuperSample. Для битовых карт реализован алгоритм децимации (downsampling), значительно повысивший качество результирующих изображений при наличии в сцене уменьшенных крупных изображений. Добавлен режим предпросмотра рабочей области, в отличие от черновой отрисовки, отображающий все слои. Обеспечено кеширование уже отрендеренных кадров, что заметно улучшает воспроизведение и манипуляции на шкале времени. Добавлен режим фонового рендеринга всех кадров. Реализована возможность определения значения гамма-коррекции в привязке к отдельному документу вместо задания для всего приложения. Изменить значение можно через меню "Canvas" -> "Properties" -> "Gamma correction". Расширены возможности слоёв Advanced Outline, Switch и Rectangle. Добавлена возможность сохранения слоя рабочей области ("Workspace" -> "Save workspace" в меню). Добавлена возможность назначение фона по умолчанию для новых файлов ("Edit" -> "Preferences" -> "Document").