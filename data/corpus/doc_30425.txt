Релиз OpenBSD 4.9

Увидел свет релиз операционной системы OpenBSD 4.9, отличающаяся поддержкой 17 аппаратных архитектур и ориентацией на высокую безопасность. Размер установочного iso-образа 215 Мб. Из представленных в новой версии улучшений можно отметить: Изменения, специфичные для архитектур amd64 и i386: В GENERIC-ядре по умолчанию включена поддержка файловой системы NTFS (поддерживается только чтение данных). По умолчанию включен драйвер vmt(4), используемый для обеспечения запуска OpenBSD в виде гостевой системы под управлением VMWare; Ядро, собранное для работы в SMP-режиме, теперь может поддерживать до 64 процессорных ядер; Максимальный размер выделяемой памяти для приложения (MAXDSIZ) для i386-систем увеличен до 2 Гб; Возможность обработки более 16 дисков в процессе поиска устройства для загрузки ядра; Добавлена поддержка инструкций AES-NI, появившихся в последних моделях процессоров Intel; Улучшена поддержка перехода в спящий режим и возврата из него; Для архитектуры amd64 снято ограничение на 4000 процессов. Для архитектуры hppa добавлена поддержка многопроцессорных систем; Для архитектуры sparc64 обновлен драйвер vdsp(4), который теперь поддерживает протокол vDisk 1.1, что позволяет выполнять Solaris поверх управляющего домена на базе OpenBSD. Улучшение поддержки оборудования: Поддержка новых Ethernet-адаптеров: RDC R6040 10/100, RDC Semiconductor R6040 10/100, Intel 82583V, Yukon 88E8059, SiS191; Поддержка новых беспроводных карт: Realtek RTL8188SU/RTL8191SU/RTL8192SU USB IEEE 802.11b/g/n, Realtek RTL8188CU/RTL8192CU USB IEEE 802.11b/g/n, R9271, AR9280+AR7010, AR9287+AR7010 USB IEEE 802.11a/g/n; Поддержка систем хранения: LSI SAS2004, NVIDIA MCP89 SATA; Поддержка видеокарт: Mobility Radeon HD 4200 и Sun XVR-300; Поддержка SCSI: улучшение безопасного отсоединения SCSI-устройств; улучшение поддержки горячего подключения устройств в драйверах mpi и mpii; улучшение производительности multi-LUN устройств; добавление драйвера vscsi для обработки SCSI-команд на уровне пользователя; добавление iSCSI initiator iscsid; Улучшения в сетевом стеке: Доработан алгоритм Livelock-блокировок MCLGETI, с целью увеличения производительности хоста и перенаправления трафика при большой сетевой нагрузке; Добавлена поддержка стыковки сокетов (socket splicing), позволяющая временно присоединить сокет для перемещения данных ядром без задействования кода на уровне пользователя. Поддержка данной возможности будет интегрирована в relayd в следующем релизе OpenBSD; В реализацию IPSec добавлена поддержка AES-GCM; Благодаря решению проблемы с сортировкой radix-деревьев, удалось значительно поднять производительность IPSec в некоторых ситуациях; Реализована поддержка автоматического изменения размера буферов отправки и приема для TCP; В ifconfig добавлена опция wpakey, заменяющая собой функциональность, ранее доступную через утилиту wpa-psk; Для loopback-интерфейса убрана задержка в отправке TCP-подтверждений; В утилиту tcpdump добавлена поддержка декодирования трафика Multicast DNS (mDNS); В утилиту arp добавлена поддержка управления пробуждением системы по сети ("Wake on Lan"); В GENERIC-ядрах по умолчанию активирована поддержка MPLS и mpe; В ifconfig добавлена опция mpls, позволяющая управлять включением MPLS для отдельных сетевых интерфейсов; После подозрений по внедрению бэкдора был проведен аудит кода IPSec-стека. В процессе аудита было выявлено несколько проблем безопасности, которые были исправлены. Проведен аудит и исправление недоработок в основанном на ARC4 коде PRNG; Улучшение пакетного фильтра pf: Переписана большая часть подсистемы ведения логов, в логе теперь отражаются адреса после их трансляции; Совпадения log-правил приводят к выводу данных в лог на лету, отображая пакет также как pf видит его в момент выполнения правила. При этом отныне пакет может попасть в лог несколько раз; Правила "log(matches)" позволяет отследить дальнейшие правила для заданных совпадений; pflog(4) теперь включает оригинальные адреса и номера портов для пакетов, которые были переписаны; Улучшения компонентов, работающих на уровне пользователя: В поставку включен авторитативный DNS-сервер nsd, отвечающий за прямую отдачу DNS зон, без обращения ко внешним DNS серверам; В dhclient добавлена поддержка определения исходящего сетевого интерфейса; В tcpdump налажена обработка примитивов "net" при обработке трафика через pflog; fdisk добавлена обработка ошибок чтения MBR, устранено зацикливание при обработке некорректных EBR; В ldapd добавлена поддержка bsdauth и поддержка синтаксиса атрибутов, определенного в RFC4517; Добавлена новая утилита video для записи или отображения изображений, полученных через устройство video; В httpd mod_headers добавлена поддержка стиля Apache2 в определении директивы RequestHeader; В pcidump добавлена возможность просмотра расширенной конфигурации PCIe через использование опции "-xxx"; Заметно повысилась устойчивость и совместимость реализации IKEv2 в iked; Из системы удалены Skipjack и libdes. Из libc удалена поддержка CAST-128; Устранена проблема с эффектом гонки в USB-подсистеме, что позволило значительно увеличить надежность работы с USB-устройствами; Добавлена поддержка дополнительных системных вызовов в compat_linux, что позволило добиться выполнения таких приложений как Skype; Улучшение инсталлятора: Налажен процесс установки с CD для архитектуры hppa; В состав установочного образа включены дополнительные прошивки; В установочных скриптах реализована поддержка конфигурации 802.11-интерфейсов для беспроводных сетей. Видимые сети могут быть отображены и настроены для работы WPA; При обновлении теперь проверяется только корневая файловая система. Не осуществляется проверка файловых систем с fs_passno = 0. При ошибках монтирования пользователю выводится предупреждение с выбором дальнейших действий; Инсталлятор отныне настраивает ntpd для использования всех доступных источников синхронизации точного времени; Добавлен фреймворк rc.subr с функциями для упрощения создания rc-скриптов. Развитие фреймворка еще не завершено, поэтому на его использования переведены только небольшая часть пакетов. rc.local по прежнему может быть использован вместо или в дополнение к скриптам rc.d; OpenOSPFD: В ospfd обеспечено корректное перераспределение перекрывающихся маршрутов. В ospfctl при выводе суммарных данных обеспечен показ контрольных сумм LSDB, позволяющих удостовериться что два LSDB синхронизированы; Обновлен пакет OpenSSH 5.8, обзор улучшений можно посмотреть здесь; Число портов достигло 6800. Отмечается значительное увеличение надежности и скорости в утилитах работы с пакетами. Для архитектуры i386 подготовлено 6620 бинарных пакетов, для amd64 - 6570, для arm - 5679, для mips64el - 5499, для sparc64 - 6225, для hppa - 5838. Из находящихся в портах приложений, отмечены: Gnome 2.32.1. KDE 3.5.10. Xfce 4.8.0. MySQL 5.1.54. PostgreSQL 9.0.3. Postfix 2.7.2. OpenLDAP 2.3.43 и 2.4.23. Firefox 3.5.16 и 3.6.13. Thunderbird 3.1.7. OpenOffice.org 3.3.0rc9. LibreOffice 3.3.0.4. Emacs 21.4 и 22.3. Vim 7.3.3. PHP 5.2.16. Python 2.4.6, 2.5.4 и 2.6.6. Ruby 1.8.7.330 и 1.9.2.136. Mono 2.8.2. Chromium 9.0.597.94. Компоненты от сторонних разработчиков, входящие в состав OpenBSD 4.9: Xenocara (основанная на X.Org 7.6 с xserver 1.9, freetype 2.4.4, fontconfig 2.8.0, Mesa 7.8.2, xterm 267); Gcc 2.95.3 с патчами, 3.3.5 с патчами и 4.2.1 с патчами; Perl 5.12.2 (с патчами); Улучшенная и защищенная версия Apache 1.3, с поддержкой SSL/TLS и DSO; OpenSSL 1.0.0a (с патчами) Sendmail 8.14.3, с libmilter Bind 9.4.2-P2 (с патчами) Lynx 2.8.6rel.5 с поддержкой HTTPS и IPv6; Sudo 1.7.2p8 Ncurses 5.7 Heimdal 0.7.2 (с патчами) Arla 0.35.7 Binutils 2.15 (с патчами) Gdb 6.3 (с патчами)