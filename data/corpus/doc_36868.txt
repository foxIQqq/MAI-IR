Новая версия systemd 203

Леннарт Поттеринг (Lennart Poettering) представил релиз системного менеджера systemd 203, рекомендованный для интеграции в новые выпуски дистрибутивов. В частности, на базе systemd 203 будет построен выпуск Fedora 19. В следующие несколько недель планируется приступить к реализации очередной порции значительных новшеств, например, осуществить перевод systemd с libdbus1 на libsystemd-bus, собственную реализацию клиентской библиотеки D-Bus. Из изменений в выпуске systemd 203 можно отметить: В systemd-nspawn обеспечено сохранение метаданных о создаваемых изолированных контейнерах, в том числе о корневой директории, в полях с расширенными атрибутами cgroups. При создании контейнеров через systemd-nspawn теперь при необходимости создаётся файл /etc/resolv.conf до монтирования окружения. В файле .service добавлена секция systemd-nspawn для организации запуска контейнеров в форме системных сервисов; Переработана иерархия cgroup: все сохраняемые в дереве cgroup объекты теперь снабжены суффиксом, например, данные связанные с пользовательскими сессиями снабжаются суффиксом ".session", пользователи в cgroups помечаются через ".user", а контейнеры - ".nspawn". Для имён cgroup применено экранирование, которое позволяет избежать пересечений имён объектов пользовательского уровня и уровня ядра. В дальнейшем планируется обеспечить возможность перемещения объектов в дереве cgroup, что позволит реализовать такие функции, как партицирование ресурсов для данных объектов без возникновения конфликта имён; В команду "systemctl list-dependencies" добавлена поддержка опций "--plain", "--reverse", "--after" и "--before". В nss-myhostname добавлена встроенная поддержка резолвинга "localhost", что переводит /etc/hosts в категорию опциональных файлов; В директиве ".include" запрещено рекурсивное включение unit-файлов; systemd-analyze добавлена команда "critical-chain", выявляющая самую медленную цепочку юнитов в процессе загрузки системы. Указанную команду удобно использовать для оптимизации времени загрузки; В systemd-cgls добавлен параметр "--machine" для вывода процессов только для указанного контейнера; В блоке "ConditionSecurity=" добавлена поддержка проверки для "apparmor"; Добавлен новый файл конфигурации /etc/systemd/sleep.conf, который может быть использовать для настройки действий при переходе в спящий, ждущий или гибридный ("hybrid-sleep") режим.