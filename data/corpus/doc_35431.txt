В Debian Unstable добавлена система инициализации Upstart и проведено сравнение с sysvinit и systemd

Стив Лангашек (Steve Langasek), один из активных разработчиков проектов Debian и Ubuntu, участвующий в разработке и продвижении Upstart, объявил об интеграции свежей версии пакетов для поддержи загрузки Debian GNU/Linux с использованием системы инициализации и контроля за выполнением системных сервисов Upstart, изначально разработанной компанией Canonical и применяемой в дистрибутивах Ubuntu и RedHat Enterprise Linux 6, а также в проектах Maemo, Chrome OS и webOS. Интеграция Upstart дала возможность проведения сравнительной оценки скорости загрузки дистрибутива при помощи Upstart, базовой системы инициализации sysvinit, а также доступной в репозиториях системой загрузки на базе systemd. В отличие от ранее проводимых разрозненных тестов, в которых каждая система тестировалась в разных дистрибутивах, теперь стало возможным выполнить комплексную оценку скорости работы трёх указанных систем инициализации в конфигурации, отличающейся только выбранными методами загрузки. После проведения тестирования были получены следующие результаты (каждый тест повторялся три раза, для загрузки использовалась базовая установка Debian GNU/Linux без дополнительных сервисов): Загрузка с классической системой инициализации Sysvinit и со штатными дополнениями для распараллеливания запуска сервисов Startpar была выполнена за 3.37 сек. (максимальное время 3.42 сек.); Загрузка с использованием Upstart была выполнена за 3.03 сек (максимальное время 3.19 сек.). Ускорение было обеспечено в основном благодаря оптимизации процесса монтирования разделов с учётом работы всех запускаемых процессов в совокупности; Загрузка с использованием systemd заняла 2.32 сек (максимальное время 2.85 сек.), что на 45% быстрее, чем при использовании Sysvinit. Основной причиной большого расхождения между systemd и upstart стало наличие unit-файла для запуска rsyslog, в то время как для upstart не было подготовлено соответствующего job-файла. После удаления unit-файла для rsyslog время загрузки с systemd увеличилось до 2.78-3.03 сек. (была исключена из сравнения сокет-активация, один из ключевых механизмов, дающий systemd преимущество над Upstart). Другим фактором стало использование в systemd встроенных служб hwclock, hostname и udev-mtab, в то время как upstart приходилось обращаться к внешним программам. Наиболее очевидное узкое место upstart, связанное с необходимостью запуска shell-интерпретатора, не является ключевым фактором, оказывающим значительное влияние на скорость загрузки. Примечательно, что в условиях задействования job-файлов upstart демонстрирует близкие к systemd результаты и вполне может конкурировать с ним, обеспечивая большую гибкость в настройке и управлении процессом загрузки по сравнению с жестко определяемыми через unit-файлы правилами загрузки. Из недостатков проведённого тестирования можно отметить: использование эмулятора QEMU, вместо реального оборудования; измерение скорости загрузки до приглашения shell без учёта времени запуска реального десктоп-окружения и серверных служб; использование для анализа устаревшей версии утилиты bootchart, предоставляющей менее детальную информацию о процессе загрузки; сравнение свежей версии Upstart (1.6) с systemd годичной давности (v44).