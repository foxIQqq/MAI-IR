Из новой версии CUPS будут изъяты некоторые используемые в Linux возможности

Стало известно, что компания Apple, которая является владельцем и с 2007 года главным разработчиком сервера печати CUPS, приняла решение исключить из состава будущего выпуска CUPS 1.6 целый ряд прежних возможностей, посчитав их "не интересными" для Mac OS X, несмотря на то, что данные функции активно используются Linux-сообществом. Как пишет в своем блоге Тим Вог (Tim Waugh), являющийся разработчиком конфигурационной программы для принтеров system-config-printer, которая используется в таких дистрибутивах как Fedora и Ubuntu, в новой версии CUPS будет исключена поддержка протокола "CUPS Browsing". Эта служба использует сетевой порт 631 и выполняет широковещательную трансляцию всех имеющихся очередей заданий для принтеров, позволяя находить доступные принтеры автоматически. В Mac OS X, вместо этого уже стандартного механизма, для достижения аналогичных целей используются возможности Bonjour и DNS-SD (DNS-based Service Discovery). Проблема заключается в том, что поддержку функциональности DNS-SD в Linux-системах обеспечивает пакет Avahi, который используется в некоторых Linux-дистрибутивах для обеспечения возможностей автонастройки ряда сервисов (в частности, в Zeroconf). Но CUPS пока не умеет взаимодействовать с Avahi, что оставляет Linux-пользователей вообще без этой функциональности. Чтобы как-то урегулировать сложившуюся ситуацию, Тим Вог самостоятельно создал патчи, которые добавляют возможность взаимодействия CUPS с Avahi, и уже добавил их в Fedora. Кроме того он выслал эти патчи разработчикам из Apple для рассмотрения возможности их включения в текущую ветку CUPS. Вог также предупреждает, что если это будет сделано – для включения функциональности автообнаружения очередей печати понадобится дополнительно установить Avahi как на стороне сервера, так и у каждого клиента. Отдельно подчеркивается, что в любом случае - новый CUPS будет работать и без установленного Avahi, просто в нем будет отсутствовать автоматическое определение очередей принтера. Другой разработчик, Тиль Камппетер (Till Kamppeter), мэйнтэйнер проекта openprinting.org, - полностью подтверждает эти факты, кроме того он добавляет, что в новой версии CUPS также будут объявлены устаревшими функции PPD, а также некоторые фильтры, которые бесполезны для Mac OS X. Проект OpenPrinting уже отделил эти фильтры и собирается впредь поддерживать их собственными силами, отдельно от пакета CUPS, для чего уже создан новый пакет - cups-filters. Кроме этого решено включить туда и совершенно новые фильтры для обработки PDF-файлов, которые никогда не входили в CUPS. Тим Вог информировал сообщество Fedora о возникшей ситуации и своих патчах, и в ходе этого обсуждения некоторые разработчики Fedora в качестве альтернативного решения изъявили желание создать независимый форк CUPS. Сам Тим Вог считает, что создание такого форка не исключено в будущем, если интересы Linux-сообщества будут также игнорироваться, но на данном этапе создание независимого форка считает нецелесообразным. Ради справедливости стоит отметить, что Apple заранее анонсировала удаление протокола "CUPS Browsing" ещё в версии 1.5, но никто не обратил на это внимание. В частности, разработчики Apple мотивируют это тем, что CUPS Browsing очень плохо работает в WiFi-сетях, имеет проблемы в сетях в инфраструктуре которых отсутствует DNS, а также в любых других сетях, где запрещены широковещательные трансляции (что, по мнению Apple, не такая уж и редкость). Дополнение: В состав выпущенного сегодня SVN-снапшота CUPS 1.6 включены патчи с поддержкой Avahi и добавлено объяснение причины прекращения поддержки компилятора PPD (указано, что делается ставка на протокол IPP Everywhere и постепенный уход от устаревших драйверов).