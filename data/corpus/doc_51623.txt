Intel подготовил начальную реализацию драйвера USB 4.0 для ядра Linux

Компания Intel представила в списке рассылки разработчиков ядра Linux начальную реализацию кода для поддержки в ядре спецификации USB 4.0. Новая версия интерфейса USB основана на протоколе Thunderbolt 3 и обеспечивает пропускную способность до 40 Гбит/с, сохраняя обратную совместимость с USB 2.0 и USB 3.2. По аналогии с Thunderbolt интерфейс USB 4.0 позволяет туннелировать различные протоколы поверх одного кабеля с разъёмом Type-C, включая PCIe, Display Port и USB 3.x, а также программные реализации протоколов, например, для организации сетевых линков между хостами. За создание различных типов туннелей для подключения нескольких устройств через один разъём отвечает менеджер соединений (Connection Manager), который может быть реализован как программно, так и на уровне прошивки. Патчи основаны на уже входящем в ядро Linux драйвере Thunderbolt, добавляют поддержку устройств Thunderbolt 3 в программную реализацию менеджера соединений и адаптирует его для работы с хостами и устройствами, совместимыми с USB4. Предложенный код пока имеет статус предварительной реализации для обсуждения и ещё не охватывает все возможности USB 4.0, например, не поддерживает механизмы управления питанием. При этом код уже поддерживает создание туннелей для PCIe, Display Port и USB 3.x, а также организацию сетевых каналов между напрямую подключёнными хостами в режиме P2P.