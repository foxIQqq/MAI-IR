В ночные сборки Firefox добавлен блокировщик назойливых уведомлений и API UserScripts

Разработчики Mozilla анонсировали эксперимент, в рамках которого планируется опробовать технику борьбы с назойливыми запросами на предоставление сайту дополнительных полномочий. В последнее время все больше сайтов злоупотребляют предоставляемой в браузерах возможностью запроса полномочий, главным образом путём периодического вывода запросов на получение push-уведомлений. Для защиты от подобного спама в Firefox планируют ограничить ситуации при которых сайт может выводить подобные уведомления. По статистике, полученной в рамках сбора телеметрии, пользователям Firefox Beta с 25 декабря по 24 января было показано около 18 млн запросов получения полномочий. Только 3% запросов были одобрены, а большая часть отклонена, причём в 19% случаев пользователи сразу закрыли вкладку со страницей после появления подобного запроса, не нажимая кнопку согласия или отклонения. Для сравнения при запросе доступа к камере и микрофону доля принятия уведомления составляет 85%. Указанная статистика свидетельствует о том, что обычно запросы на push-уведомления выводятся вне контекста и сильно раздражают посетителей. В настройках Firefox уже давно присутствует опция, позволяющая полностью запретить вывод запросов для push-уведомлений, но данная возможность неудобна в ситуациях, когда пользователь не намерен полностью отказываться от доставки уведомлений, но желает избавиться от назойливого спама. Начиная со вчерашнего дня и до 29 апреля в ночных сборках Firefox проводится эксперимент - запросы полномочий будут блокироваться, если не зафиксировано взаимодействие пользователя со страницей (клик мышью или нажатие клавиш). Первые две недели запросы будут блокироваться молча, а оставшееся время при попытке вывода запроса в адресной строке будет отображаться индикатор поступления запроса, при клике на который можно посмотреть сам запрос. Затем планируется провести второй эксперимент, в ходе которого небольшому проценту пользователей релиза Firefox 67 будет предложено поделиться сведениями о работе с формами запроса полномочий. В ходе эксперимента разработчики Firefox намерены получить информацию о том, как долго пользователь находился на сайте перед выводом запроса полномочий и накопить статистику для выявления злоупотреблений, которые можно блокировать. Кроме того, в ночных сборках на базе которых будет сформирован релиз Firefox 68 (включение перенесено на Firefox 69), активирован по умолчанию API UserScripts, позволяющий создавать на базе технологии WebExtensions дополнения в стиле Greasemonkey, позволяющие выполнять пользовательские скрипты в контексте web-страниц. Например, при помощи подключения скриптов можно изменять оформление и поведение просматриваемых страниц. Данный API уже входит в состав Firefox, но до сих пор для его включения требовалась установка параметра "extensions.webextensions.userScripts.enabled" в about:config. В отличие от имеющихся дополнений с похожей функциональностью, применяющих вызов tabs.executeScript, новый API позволяет изолировать скрипты в отдельных sandbox-окружениях, решает проблемы с производительностью и даёт возможность обрабатывать различные стадии загрузки страниц.