Выпуск дистрибутива для создания сетевых хранилищ TrueNAS SCALE 23.10

Компания iXsystems опубликовала дистрибутив TrueNAS SCALE 23.10, в котором используется ядро Linux и пакетная база Debian (ранее выпускаемые продукты данной компании, в том числе TrueOS, PC-BSD, TrueNAS и FreeNAS, основывались на FreeBSD). Как и TrueNAS CORE (FreeNAS), TrueNAS SCALE может быть загружен и использован бесплатно. Размер iso-образа 1.5 ГБ. Исходные тексты специфичных для TrueNAS SCALE сборочных сценариев, web-интерфейса и прослоек опубликованы на GitHub. Продукты TrueNAS CORE на базе FreeBSD и TrueNAS SCALE на базе Linux развиваются параллельно и дополняют друг друга, используя общую кодовую базу инструментария и типовой web-интерфейс. Предоставление дополнительной редакции на базе ядра Linux объясняется желанием реализовать некоторые идеи, недостижимые при использовании FreeBSD. Примечательно, что это не первая подобная инициатива - в 2009 году от FreeNAS уже отделился дистрибутив OpenMediaVault, который был переведён на ядро Linux и пакетную базу Debian. Одним из ключевых улучшений в TrueNAS SCALE стала возможность создавать хранилища, размещаемые на нескольких узлах, в то время как TrueNAS CORE (FreeNAS) позиционируется как решение на базе одного сервера. Кроме увеличения масшатабируемости, TrueNAS SCALE также отличается использованием изолированных контейнеров, упрощением управления инфраструктурой и пригодностью для создания программно-определяемых инфраструктур. В качестве файловой системы в TrueNAS SCALE применяется ZFS (OpenZFS). В TrueNAS SCALE предоставляется поддержка контейнеров Docker, виртуализации на базе KVM и масштабирования ZFS на несколько узлов при помощи распределённой файловой системы Gluster. Для организации доступа к хранилищу поддерживается SMB, NFS, iSCSI Block Storage, S3 Object API и Cloud Sync. Для обеспечения защищённого доступа подключение может осуществляться через VPN (OpenVPN). Хранилище может быть развёрнуто на одном узле и в дальнейшем при увеличении потребностей постепенно горизонтально расширяться через добавление дополнительных узлов. Кроме выполнения задач, связанных с организацией работы хранилища, узлы также могут использоваться для предоставления сервисов и запуска приложений в контейнерах, оркестируемых при помощи платформы Kubernetes, или в виртуальных машинах на базе KVM. В новой версии: Добавлена возможность предоставления доступа к одному массиву данных одновременно через протоколы SMB и NFSv4. Обеспечена совместимость ACL, прав доступа и блокировок для SMB и NFSv4. Добавлена возможность монтирования SMB-разделов с других систем (Windows, Netapp, myriad и т.п.) и импортирования с них данных в TrueNAS для предоставления совместного доступа. Добавлена поддержка синхронизации файлов между SMB/NFS-серверами. Добавлена поддержка механизма клонирования блоков в ZFS, позволяющего создать копию файла или его части без дублирования данных, используя во второй копии ссылки на уже существующие блоки данных исходного файла без их фактического копирования. Использование указанного механизма позволило до 10 раз ускорить копирование файлов и каталогов в хранилищах SMB и NFS. В OpenZFS, Samba и NVMe-подсистему внесены изменения для повышения производительности и масштабируемости. Повышена пропускная способность, поднят лимит на число файлов в каталогах и предоставлена возможность работы с бо́льшим числом пользователей. Изменено оформление интерфейса для работы с приложениями TrueNAS. Переработан интерфейс для создания пула хранилища (Storage Pool). Добавлена возможность использования в одной системе до 1255 накопителей и создания хранилищ размером более 25 ПБ. Многие системные сервисы преобразованы в отдельно загружаемые приложения TrueNAS. Переработаны компоненты для генерации отчётов. Для формирования системной статистики, показываемой на экране с отчётами, задействован бэкенд Netdata. Добавлены кнопки для приостановки и возобновления проверки ZFS (Scrub). Добавлена поддержка ZFS dRAID (Distributed Spare RAID), варианта RAIDZ с интегрированной распределённой обработкой блоков для горячего восстановления (hot spare). На 70% сокращено время восстановления после сбоя в отказоустойчивых конфигурациях. Обновлены версии ядра Linux 6.1.42, драйверов NVIDIA 535.54.03 и OpenZFS 2.2.