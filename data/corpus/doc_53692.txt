Huawei будет использовать собственную ОС Harmony для смартфонов

На конференции HDC 2020 компания объявила о расширении планов, касающихся операционной системы Harmony, анонсированной в прошлом году. Помимо изначально заявленных портативных устройств и продуктов интернета вещей (IoT), таких как дисплеи, носимые устройства, умные колонки и инфо-системы автомобилей, разрабатываемая ОС также будет применяться и на смартфонах. Тестирование SDK для разработки мобильных приложений для Harmony начнётся в конце 2020 года, а первые смартфоны на базе новой ОС планируется выпустить в октябре 2021 года. Отмечается, что новая ОС уже готова для IoT-устройств с объёмом оперативной памяти от 128KB до 128MB, в апреле 2021 года начнётся продвижение варианта для устройств с объёмом памяти от 128MB до 4GB, а в октябре для устройств, с ОЗУ больше 4GB. Напомним, что проект Harmony находится в разработке начиная с 2017 года и представляет собой микроядерную операционную систему, которую можно рассматривать как конкурента ОС Fuchsia от Google. Платформа будет опубликована в исходных текстах как полностью открытый проект с независимым управлением (Huawei уже развивает открытый LiteOS для IoT-устройств). Код платформы будет передан под покровительство некоммерческой организации China Open Atomic Open Source Foundation. Huawei считает, что Android не так хорош для мобильных устройств из-за излишне большого объёма кода, устаревшего планировщика процессов и вопросов фрагментации платформы. Особенности Harmony: Ядро системы верифицировано на уровне формальной логики/математики для минимизации риска появления уязвимостей. Верификация проведена с использованием методов, которые обычно используются при разработке критически важных систем в таких областях, как авиация и космонавтика, и позволяют добиться соответствия уровню защищённости EAL 5+. Микроядро изолированно от внешних устройств. Система отделена от оборудования и даёт возможность разработчикам создавать приложения, которые можно использовать на различных категориях устройств без создания отдельных пакетов. Микроядро реализует только планировщик и IPC, а всё остальное вынесено в системные сервисы, большая часть которых выполняется в пространстве пользователя. В качестве планировщика задач предлагается минимизирующий задержки детерминистический движок распределения ресурсов (Deterministic Latency Engine), анализирующий нагрузку в режиме реального времени и использующий методы предсказания поведения приложений. По сравнению с другими системами планировщик позволяет добиться сокращения задержек на 25.7% и снизить флуктуации задержек на 55.6%. Для обеспечения связи между микроядром и внешними сервисами ядра, такими как ФС, сетевой стек, драйверы и подсистема запуска приложений, применяется IPC, который по заявлениям компании работает в пять раз быстрее, чем IPC в Zircon, и в три раза быстрее, чем IPC в QNX. Вместо обычно применяемого четырёхуровневого стека протоколов для уменьшения накладных расходов в Harmony задействована упрощённая одноуровневая модель на основе распределённой виртуальной шины, обеспечивающей взаимодействие с оборудованием, таким как экраны, камеры, звуковые платы и т.п. В системе не предоставляется доступ пользователей на уровне root. Для сборки приложения применяется собственный компилятор Arc, который поддерживает код на языках C, C++, Java, JavaScript и Kotlin. Для создания приложений для различных классов устройств, таких как телевизоры, смартфоны, умные часы, автомобильные информационные системы и т.п, будет предоставлен собственный универсальный фреймворк для разработки интерфейсов и SDK с интегрированной средой разработки. Инструментарий позволит автоматически адаптировать приложения для разных экранов, элементов управления и методов взаимодействия с пользователем. Также упоминается предоставление инструментов для адаптации для Harmony существующих Android-приложений с минимальными изменениями. Дополнение: В рамках проекта OpenHarmony под лицензией BSD опубликованы исходные тексты первого варианта ОС Harmony, ориентированного на использование на устройствах с объёмом оперативной памяти от 128KB до 128MB. Код редакции для устройств с объёмом ОЗУ до 4 ГБ планируется опубликовать в апреле 2021 года, а для устройств с размером памяти более 4 ГБ - в октября 2021 года.