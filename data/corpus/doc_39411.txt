Новая версия systemd 212

Представлен выпуск системного менеджера systemd 212, в котором представлена порция исправлений ошибок и добавлено несколько новшеств. Systemd сочетает в себе функции системы инициализации, механизм для контроля за выполнением фоновых процессов, службу для журналирования событий и средства для управления сервисами, сеансами пользователей и подключаемыми устройствами. Для определения параметров сервисов в Systemd используется набор конфигурационных unit-файлов, вместо оформления сценариев запуска в виде shell-скриптов. Система нацелена на интенсивную параллелизацию выполнения сервисов на этапе загрузки системы, вобрав в себя лучшие черты таких систем, как launchd (Mac OS X), SMF (Solaris) и Upstart (Ubuntu, старые версии Fedora). В настоящее время на использование systemd уже перешли такие дистрибутивы, как Fedora, openSUSE, Mandriva и Arch Linux, одобрен переход дистрибутивов Debian и Ubuntu по умолчанию на systemd. Наиболее существенные изменения: В journald добавлен режим перенаправления вывода на консоль, который теперь активирован по умолчанию для всех важных уведомлений; Добавлена утилита systemd-journal-remote для потоковой передачи логов на другой хост; При восстановлении параметров экрана добавлена защита от установки слишком низкого уровня яркости для предотвращения отображения черного экрана после перезагрузки; В PID 1 обеспечен учёт общесистемного состояния ("starting", "running", "degraded", "maintenance", "stopping"), которое отображается через команду "systemctl status" и позволяет быстро оценить статус работы, что полезно в конфигурациях с большим числом контейнеров; В утилиту "systemctl" добавлена команда "list-machines" для вывода списка всех локальных контейнеров и состояния, каждого из них; В утилиту "systemctl" добавлена опция "-r" для рекурсивного перебора юнитов всех локальных контейнеров; В механизм автоматического монтирования разделов на основе GPT-меток, позволяющего загружаться без /etc/fstab и без передачи ядру опции "root=", добавлен учёт флагов монтирования в режиме только для чтения и игнорирования раздела. Добавлено два новых GPT-типа UUID для 32- и 64-разрядных ARM-систем; При генерации MAC-адреса для сетевого интерфейса при помощи nspawn с опцией "--network-interface=" теперь используется имя машины, что позволяет сохранить MAC при разных вызовах контейнеров; В logind обеспечена автоматическая чистка всех объектов IPC, владельцем которых является пользователь, завершивший сеанс; В утилитах systemd-machine-id-setup и tmpfiles появилась опция "--root=" для установки относительной корневой директории; Директория /sys/fs/cgroup/ теперь монтируется в режиме только для чтения после прикрепления всех управляющих деревьев cgroup; В утилиту machinectl добавлена команда "poweroff" для отключения по питанию локальных контейнеров; Все длительно выполняющиеся сервисы systemd теперь дополнительно изолируются через опции "PrivateDevices=", "PrivateNetwork=" и "PrivateTmp="; Процесс systemd-udevd теперь выполняется в отдельном изолированном пространстве точек монтирования; В коде обеспечения поддержки kdbus добавлена возможность загрузки политик в ядро. В sd-bus добавлена поддержка создания соединений для мониторинга обмена данными в отладочных целях; В качестве времени теперь допустимо указание эпохального формата "@число", определяющего число секунд с 1 января 1970 года. Прекращена поддержка кода с устаревшей и оставшейся без сопровождающего встроенной реализацией tcpwrap, вместо которой рекомендует использовать активацию через сокеты; В system.conf добавлена опция "DefaultTimerAccuracySec=" для задания уровня точности срабатывания timer-юнитов. Добавлена опция "WakeSystem=" позволяющая пробудить систему из спящего режима при наступлении события в timer-юните, если подобная возможность поддерживается в ОС. Добавлена опция "Persistent=" для сохранения состояния планирования вызова timer-юнитов после перезагрузки; В systemd-networkd обеспечено назначение предсказуемых адресов IPv4LL для локальных интерфейсов.