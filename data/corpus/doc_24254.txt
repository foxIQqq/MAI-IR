Эксперимент по запуску тысячи Jail окружений на одном FreeBSD сервере

Ivan Voras, один из коммитеров FreeBSD, опубликовал результаты эксперимента по запуску 1000 Jail-окружений на одном FreeBSD сервере с 4 Гб ОЗУ. Запуск окружений занял около 30 минут, при этом система чувствовала себя отлично с 1001 IP, привязанных к одной сетевой карте, и 14 тысячами точек монтирования (nullfs). Через какое-то время во всех 1000 jail одновременно запустилось одно и тоже cron задание, Load averages при этом сразу поднялся до 100. Для надлежащей работы более тысячи jail необходимо увеличить значение kern.maxproc и вероятно kern.maxprocperuid.