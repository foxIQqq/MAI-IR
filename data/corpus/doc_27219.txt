Началось бета-тестирование Firefox 4

Разработчики проекта Mozilla представили Firefox 4 Beta 1, тестовую версию новой ветки популярного web-браузера, в которой реализовано несколько значительных улучшений, связанных как с поддержкой новых web-технологий, так и с переработкой пользовательского интерфейса. Релиз Firefox 4 ожидается в конце нынешнего или начале следующего года. Изменения, заметные для пользователя: Обновлен интерфейс пользователя, в котором панель вкладок может быть перемещена пользователем в верхнюю часть окна (по умолчанию пока табы перемещены вверх только в Windows-сборке). В строку с табами можно добавлять и другие элементы тулбаров, такие как закладки, адресную строку и блок для обращения к поисковым системам. В Linux версии меню оставлено на прежнем месте, но строка с вкладками поднята дан URL, что очень непривычно. Переместить строку вкладок под строку ввода адреса можно через контекстное меню, появляющееся при нажатии правой кнопки мыши на строке вкладок; Скрыто в одну кнопку и переработана организация структуры меню. Кнопки "stop" и "reload" объединены в одну многофункциональную кнопку. Добавлена домашняя вкладка с организацией быстрого перехода на часто посещаемые сайты и выборкой последних запросов. Формы ввода текста теперь по умолчанию допускают произвольное изменение своего размера мышью; Новый менеджер дополнений, который открывается в виде вкладки в основном окне браузера и оптимизирован для поиска и навигации по каталогу дополнений. Дополнительно в менеджер дополнений интегрирована поддержка управления поисковыми плагинами, которые теперь могут быть настроены в одном месте, наряду с визуальными темами и языковыми пакетами. Новый менеджер для управления сохраненными паролями, диалог для сохранения пароля для открытой страницы теперь можно вызвать в любое время, а не первые несколько секунд после открытия страницы; Поддержка медиа-контейнера WebM и видеокодека VP8; В состав будет интегрировано дополнение Mozilla Sync (Weave), позволяющее синхронизировать между разными машинами содержимое коллекции закладок, список открытых табов, сохраненные пароли, историю посещений и настройки; Начало подготовки 64-разрядных сборок для Windows, Linux и MacOS X (раньше сборки формировались только для 32-рязрядных систем). Технологии для web-разработки: Улучшения платформы: интегрирован новый HTML5-парсер, улучшающий поддержку HTML5 (например, теперь можно не выносить SVG и MathML, а добавлять их прямо в код страницы) и позволяющий избавиться от множества ошибок старого парсера. Появилась поддержка интерфейсов FormData и средств управления формами HTML5; Поддержка IndexedDB API для создания индексируемых БД в браузере Поддержка технологии web-сокетов (Web Sockets) для организации двунаправленного обмена данными между web-приложением и сервером; Поддержка технологии написания дополнений JetPack, установка которых производится без перезапуска web-браузера. Технология Jetpack представляет собой новый упрощенный способ расширения функциональности Firefox, через разработку расширений с использованием стандартных web-технологий (HTML, CSS и Javascript), без изучения внутренней структуры браузера и тонкостей технологии XUL. Добавлена система JS-ctypes для обеспечения возможности вызова нативного кода из JavaScript-расширений; В состав браузера интегрирован инструмент Web Console (Web Inspector), позволяющий проанализировать структуру документа (дерево DOM) и наглядно сопоставить визуально отображаемые элементы с участками HTML-кода и CSS. В итоге планируется получить простой и удобный инструмент инспектирования страниц, который тем не менее останется минималистичным и не будет пытаться конкурировать по функциональности с Firebug. Представлен API для управления переходом в полноэкранный режим, улучшение поддержки API для определения местоположения на основе данных от GPS-приемника. Изменено поведение при выделении ранее открытых ссылок. Для SVG реализована поддержка SMIL-анимации. Поддержка чернового варианта стандарта WebGL, определяющего способ формирования аппаратно ускоренного 3D контента без привлечения сторонних плагинов при помощи HTML5 конструкций "Canvas" и JavaScript реализации OpenGL API; Осуществлен переход на улучшенный механизм распределения памяти, который позволит защититься от целого ряда уязвимостей, связанных с разыменованием NULL-указателей. При возникновении проблемы с выделением памяти аллокатор аварийно завершит работу, вместо возврата NULL-указателя. Продолжена реализация поддержки CSS-трансформаций. CSS-трансформация позволяет применять для целых страниц или их элементов операции перемещения, вращения, наклона, масштабирования и матричных преобразований; Поддержка технологии CSP (Content Security Policy), направленной на интеграцию в web-браузеры средств для защиты от проведения CSRF-атак, организации межсайтового скриптинга (XSS) и подстановки в страницы "IFRAME/JavaScript src" блоков; Оптимизация производительности: Поиск ссылки в БД с историей посещений теперь производится в асинхронном режиме; Проведена работа по увеличению скорости перезапуска браузера в процессе установки обновления, время завершения работы теперь ускорено на 97%. Оптимизирован процесс ввода/вывода. Для платформ Windows Vista и Windows 7 добавлена поддержка аппаратной 2D-акселерации через задействование API Direct2D, а при выводе видео акселерации через использование OpenGL 2, в будущем поддержка технологий ускорения вывода графики ожидается также для платформ Linux и Mac OS X. Реализована технология отложенного построения фреймов для увеличения скорости работы динамических страниц; Загрузка HTML5-спецификации более не приводит к ощутимым паузам; Увеличена скорость повторной прорисовки HTML в SVG теге "foreignObject"; Улучшение производительности выполнения строковых операций в JavaScript; Добавлена возможность JIT-компиляции рекурсивных функций; Увеличена скорость отрисовки; Уменьшено время выполнения операций с DOM-деревом. Дополнение: улучшения, появившиеся во второй бета-версии Firefox 4: Добавлена поддержка перемещения любой вкладки в отдельную область "App Tab", через выбор "Make into App Tab" в контекстном меню вкладки. Блок "App Tab" предназначен для закрепления и автоматической загрузки вкладок с сайтами, которые пользователь просматривает несколько раз в день (почта, социальные сети, игровые сайты и т.п.). Перемещенные в "App Tab" табы с одной стороны не занимают места в строке вкладок, но с другой стороны остаются доступными в один клик (видеодемонстрация). Включение в поставку дополнения для отправки разработчикам своего мнения о работе новшеств; Поддержка CSS3 трансформаций. CSS-трансформация позволяет применять для целых страниц или их элементов операции перемещения, вращения, наклона, масштабирования и матричных преобразований (демонстрация); Поддержка сохраняемых слоев (Retained Layers), позволяющая организовать супербыструю прокрутку содержимого большой web-страницы; Реализация нового метода регистрации XPCOM компонентов, которая позволила сократить время запуска браузера; В Mac OS X и Windows строка табов по умолчанию перенесена в верхнюю часть окна. Меню Firefox в Windows 7 и Windows Vista реализовано в виде одной кнопки. Для Linux-сборки подобное изменение ожидается в будущих бета-версиях. Улучшения, появившиеся в третьей бета-версии Firefox 4: Для платформы Windows 7 добавлена поддержка режима multi-touch, позволяющего управлять работой браузера используя интуитивно понятные жесты (видеодемонстрация), например, передвигать содержимое через удержание касания к сенсорному экрану, масштабировать содержимое двумя пальцами, вращать объекты в web-приложениях, используя специальный API. Использование C++-представления для организации работы с переменными JavaScript, позволило повысить эффективность выполнения скриптов, требующих интенсивных численных вычислений, например, для обработки графики. Для всех типов переменных теперь используется единая 64-разрядная переменная jsval, в первых 32-битах которой закодирован тип, позволяющий отличить указатели на строки, объекты, числа с плавающей точкой и целочисленных переменных; Улучшения, появившиеся в четвертой бета-версии Firefox 4: В состав браузера включено дополнение Firefox Sync, которое позволяет пользователям синхронизировать закладки, список открытых вкладок, историю и сохранённые пароли между несколькими компьютерами, а также мобильными телефонами, с установленным браузером Firefox Mobile. Из iPhone доступ к синхронизированным данным можно получить через приложение Firefox Home. Данные передаются и хранятся на сервере в зашифрованном виде, в качестве ключа используется известный только пользователю пароль. В состав интегрировано дополнение Firefox Panorama (Tab Candy), которое представляет возможность сгруппировать вкладки по характеру выполняемой работы, а затем легко переключаться между группами вкладок (при переключении на интересующую группу, Firefox отображает только вкладки этой группы, скрывая все остальные); В HTML5 теге video теперь поддерживается свойство "buffered", позволяющее перемещаться по потоку на основе привязанной к времени позиции, а не на основе размера загруженных данных. Свойство "autobuffer" заменено на "preload"; Для обеспечения более эффективной анимации с использованием Javascript добавлено экспериментальное API mozRequestAnimationFrame. Улучшения, появившиеся в пятой бета-версии Firefox 4 (шестая бета-версия вышла через несколько дней с исправлением одной недоработки): Поддержка API для низкоуровневой обработки аудио-данных. При помощи нового API разработчики, могут читать и записывать звуковые потоки в raw-представлении, что, например, можно использовать для наглядной визуализации звука, полученного при работе тегов audio и video; Поддержка протокола HSTS (HTTP Strict Transport Security), позволяющего владельцам сайтов настоять на использовании SSL-шифрования. В процессе работы Firefox запоминает сайты, использующие HSTS, и в будущем соединяется с ними только при помощи протокола SSL; Задействование по умолчанию аппаратной акселерации Direct2D для платформы Windows 7; Улучшения, появившиеся в седьмой бета-версии Firefox 4: Браузер перешел на новый JavaScript-движок JägerMonkey, использующий легкий контекстно-ориентированный многопоточный JIT-компилятор, транслирующий JavaScript-классы на лету в машинный код. Скорость работы нового движка впечатляет, по сравнению с Firefox 3.6.12 скорость прохождения тестов V8 возросла в 5 раз, а тестов SunSpider и Kraken в 3 раза; Для платформ Windows и MacOS X по умолчанию включена поддержка спецификации WebGL, определяющей способ формирования аппаратно ускоренного 3D-контента без привлечения сторонних плагинов при помощи HTML5 конструкций "Canvas" и JavaScript реализации OpenGL API. Для работы WebGL у пользователя необходимо наличие OpenGL-совместимой графической карты. Поддержка платформы Linux и Intel GPU ожидается в будущих бета-версиях; Некоторые операции отрисовки на экране теперь выполняются с привлечением аппаратной акселерации, используя Direct3D 9 в Windows XP, Direct3D 10 в Windows Vista/7 и OpenGL в Mac OS X; Проведена работа по улучшению web-типографики за счет использования шрифтов в формате OpenType с поддержкой лигатуры, кернинга и валидации шрифтов; Добавлена поддержка HTML5 API для управления web-формами (HTML5 Forms API), позволяющего упростить процесс проверки корректности параметров web-форм. Например, новая возможность позволяет организовать проверку введения в форму корректного email-адреса, номера телефона или URL без использования JavaScript. Улучшения, появившиеся в восьмой бета-версии Firefox 4: Значительно усовершенствованы настройки Firefox Syn, связанные с синхронизацией между десктоп системами и мобильными устройствами; Проведена работа по оптимизации производительности, расширению функциональности и обеспечению совместимости со стандартом кода WebGL; Наведен дополнительный лоск на интерфейс Firefox Add-ons Manager; Для платформы Linux реализована начальная поддержка новой организации системы меню, которое теперь может быть скрыто в одну кнопку, размещенную в начале строки со списком открытых табов. Улучшения, появившиеся в девятой бета-версии Firefox 4: Интегрирована поддержка API IndexedDB, позволяющая использовать в JavaScript локальные индексируемые БД, в которых можно не только выбирать данные по имени ключа, но и совершать отсортированные в определенном порядке выборки. Проведена ревизия кода, связанная с работой закладок и историей посещений, что привело к ускорению работы с закладками и уменьшению времени запуска браузера; По умолчанию активирован новый сборщик мусора; Улучшения, появившиеся в десятой бета-версии Firefox 4: Создан черный список видеодрайверов, приводящих к нестабильной работе. В Linux для всех драйверов, кроме проприетарного драйвера NVIDIA, по умолчанию заблокировано использование OpenGL-акселерации и WebGL. Подобный шаг сделан из-за проблем со стабильностью; Улучшения, появившиеся в одиннадцатой бета-версии Firefox 4: Добавлена поддержка HTTP-заголовка Do Not Track ("DNT"), позволяющего информировать сайты о нежелании пользователя передавать на хранение фигурирующую в рамках сессии информацию, в ситуации ее использования для отслеживания перемещений и предпочтений пользователя. Настройка отправки DNT-заголовка производится в блоке расширенных настроек браузера; Отключено автоматическое переключение в offline-режим; Сообщения об изменении статуса соединения теперь выводятся в виде небольшого всплывающего блока. К сожалению, при наличии активной формы поиска на странице статусное сообщение с URL всплывает в правом нижнем углу, а без активной строки поиска - в левом нижнем углу, что очень неудобно так как трудно предсказать в куда нужно смотреть чтобы увидеть куда ведет ссылка; Для платформы Linux активирована ранее отключенная поддержка WebGL; Изменено оформление отображаемой по умолчанию домашней страницы; Обновлены CSS для соответствия Linux-сборки новому оформлению интерфейса; Для наглядной оценки улучшений Firefox 4 по сравнению с Firefox 3.5 и 3.6 подготовлена специальная таблица.