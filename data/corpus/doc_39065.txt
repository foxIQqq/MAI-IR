Увидел свет Apache SpamAssassin 3.4.0

После двух лет разработки и четырёх лет с момента прошлого значительного выпуска представлен релиз платформы для организации фильтрации спама - SpamAssassin 3.4.0. Отмечается, что релиз можно считать стабильным и готовым к промышленной эксплуатации, так как он в течение года проходил тестирование на многих крупных почтовых системах. Код SpamAssassin написан на языке Perl и распространяется в рамках лицензии Apache. SpamAssassin является одним из самых эффективных и широкоиспользуемых платформ для фильтрации спама. По данным январской статистики загрузки обновлений правил фильтрации спама пакет используется на более чем миллионе почтовых серверов. Наряду с http-сервером Apache, SpamAssassin включен изданием eWeek в список 11 технологий Apache, которые изменили компьютерные системы за последние 10 лет. В SpamAssassin реализован комплексный подход в принятии решения о блокировании: Сообщение подвергается ряду проверок (контекстный анализ, черные и белые списки DNSBL, обучаемые байесовские классификаторы, проверка по сигнатурам, аутентификация отправителя по SPF и DKIM и т.п.). После оценки сообщения разными методами, накапливается определенный весовой коэффициент. Если вычисленный коэффициент превышает определенный порог - сообщение блокируется или помечается как спам. Поддерживаются средства автоматического обновления правил фильтрации. Пакет может использоваться как на клиентских, так и на серверных системах. Особенности нового выпуска: Реализация поддержки IPv6, в том числе утилита sa-update и инфраструктура проекта теперь поддерживает загрузку обновлений правил по IPv6. SpamAssassin также теперь может запускаться на системах, имеющих только IPv6-соединение; Улучшение эффективности технологии блокирования с использованием проверки по черным спискам через DNS (DNSBL): Добавлен новый плагин AskDNS, позволяющий создавать правила askdns, задающие шаблон запроса к DNS. Шаблон включает в себя теги с различными параметрами SpamAssassin. Соответствующий шаблону DNS-запрос выполняется после доступности значений всех параметров, определённых в шаблоне. Полученный ответ может использоваться для принятия решения в дополнительно заданных правилах фильтрации; В код DNS-клиента добавлена поддержка кэширования запросов и ответов в процессе обработки одного почтового сообщения, что позволяет ускорить работу при наличии в правилах дублирующихся DNS-обращений; В формируемых DNS-запросах включена по умолчанию опция EDNS0, а размер буфера увеличен до 4096 байт, что позволило обеспечить поддержку приёма превышающих 512 байт ответов, переданных в рамках одного UDP-пакета. В случае использования внешних резолверов, находящихся за межсетевым экраном, блокирующим DNS UDP-пакеты больше 512 байт, следует использовать опцию "dns_options noedns0"; Добавлены директивы конфигурации dns_query_restriction (allow|deny) и clear_dns_query_restriction. Для явного указания IP рекурсивного DNS-сервера добавлена опция 'dns_server. Для управления диапазоном портов в процессе отправки DNS-запросов добавлены директивы dns_local_ports_permit, dns_local_ports_avoid и dns_local_ports_none; Значение по умолчанию для опции 'dns_available' изменено с 'test' на 'yes', что подразумевает запуск SpamAssassin на хосте с работающим резолвером DNS; Добавлен бэкенд Mail::SpamAssassin::BayesStore::Redis с реализацией высокомасштабируемых вероятностных байесовских фильтров, для хранения накопленных статистических данных для которых применяется БД Redis. При этом одна баесовская база в Redis может использоваться одновременно на нескольких серверах SpamAssassin; В spamd добавлена опция "--listen", позволяющая организовать приём сетевых запросов на выборочных сетевых интерфейсах. В spamassassin, spamd, spamc и sa-update добавлены опции "-4" и "-6" для управления использованием только IPv4 или IPv6. В утилиту sa-learn добавлена опция "--max-size"; Из зависимостей убраны Perl-модули Net::Ident, IP::Country::Fast и IP::Country. Зависимость от модуля LWP::UserAgent теперь является опциональной, при наличии в системе утилит curl, wget или fetch. Добавлены новые опциональные зависимости: Geo::IP (используется в плагине RelayCountry), IO::Socket::IP, Net::Patricia (для эффективного хранения больших списков IP, заданных в блоках internal_networks, trusted_networks или msa_networks). Требования к версии NetAddr::IP повышены до 4.010.