В рамках проекта Virgil началась разработка виртуального 3D GPU для QEMU

Дэвид Эйрли (David Airlie), один из наиболее активных разработчиков X.Org, представил проект Virgil, в рамках которого началась разработка набора драйверов с реализацией виртуального GPU (виртуальной 3D-видеокарты) для QEMU. После завершения работы планируется подготовить KMS-драйвер, X.org 2D DDX-драйвер и 3D-драйвер Mesa, которые позволят задействовать средства 3D-акселерации в виртуальных окружениях на базе QEMU и KVM без эксклюзивного проброса видеокарты в гостевую систему. Virgil позволит организовать 3D-рендеринг внутри гостевых систем с задействованием GPU хост-системы, но при этом виртуальный GPU будет работать независимо от физического GPU хост-системы. Виртуальный GPU, поддерживающий 3D-операции, можно будет использовать в гостевых окружениях с Linux и Windows, в том числе для обеспечения работы OpenGL и Direct3D внутри гостевых систем. Драйвер Mesa построен с использованием интерфейса Gallium/TGSI. Устанавливаемые на стороне гостевой системы драйверы взаимодействуют через virtio с выполняемым на стороне хоста компонентом рендеринга, использующим OpenGL-стек хост-системы. Инженеры Red Hat приступили к разработке драйвера несколько месяцев назад. Код пока не готов для повсеместного тестирования, но уже может использоваться энтузиастами для проведения экспериментов. Для загрузки доступны компоненты: DDX-драйвер xf86-video-virgl, DRM/KMS-драйвер для ядра Linux, компонент рендеринга для Mesa, virtio VGA-устройство для QEMU. В текущем виде проект уже способен выполнять GNOME Shell и играть в OpenArena. Производительность пока не превышает 40-50% от нативной системы, но отмечается возможность существенного изменения ситуации после внесения оптимизаций.