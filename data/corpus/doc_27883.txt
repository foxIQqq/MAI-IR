Мнение разработчиков KWin о видеодрайверах для Linux

Мартин Граеслин (Martin Graesslin), один из основных разработчиков оконного менеджера KWin, опубликовал заметку о печальном состоянии открытых видеодрайверов и рассказал о тех усилиях, которые предпринимаются в проекте KDE для обхода некоторых известных проблем. По заявлению Мартина, многие из наблюдаемых пользователями крахов оконного менеджера, являются следствием ошибок в видеодрайверах. В настоящий момент визуальные эффекты в KDE включаются только если версия установленного у пользователя видеодрайвера присутствует в специальном динамически формируемом белом списке, который создается на основе статистики о крахах в процессе инициализации OpenGL, информации о поддерживаемых драйвером OpenGL-расширений и на основании оценки в процессе работы производительности некоторых операций. В процессе работы было обнаружено, что многие драйверы заявляют о поддержке некоторых функций, на самом деле их не поддерживая, что привело к необходимости добавления дополнительных субъективных проверок функциональности. В качестве примера приводится реализация поддержки в KDE 4.5 двух новых эффектов, требующих привлечения определенных OpenGL-шейдеров: размывание и сглаживание методом Ланцоша. С проприетарным драйвером NVIDIA проблем не возникло, но свободные драйверы дезинформировали систему о поддержке нужных функций, не выполняя их на самом деле. Дополнение: опубликовано продолжение заметки, в котором представлены ответы на вопросы, прозвучавшие в возникших после первой публикацией обсуждениях.