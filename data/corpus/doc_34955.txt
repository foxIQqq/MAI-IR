Планы по продолжению поддержки sysvinit в Arch Linux после внедрения systemd

Том Гундерсен (Tom Gundersen), мейнтейнер пакета initscripts, последнее время вовлечённый в процесс миграции Arch Linux на systemd, опубликовал в списке рассылки разработчиков Arch Linux сообщение с планом продолжения поддержки системы инициализации sysvinit после перехода дистрибутива на systemd. Ниже перевод сообщения Тома: Переход на systemd идет полным ходом. Скоро все пакеты в наших репозиториях будут иметь поддержку systemd. Я думаю, что самое время поговорить о текущем состоянии sysvinit/initscripts и их будущем. Я считаю, что сейчас initscripts находятся в относительно хорошем состоянии (я, естественно, очень предвзят). И поэтому, будет нетрудно дополнительно поддерживать загрузку не с systemd в Arch, даже в долгосрочной перспективе. Однако, кто-то должен делать эту работу. Пожалуйста, давайте отвечать только по теме. Речь не идет о sysvinit или systemd, их достоинствах и недостатках. Тестирование Это повторялось неоднократно, но я думаю, что имеет смысл повторить еще раз: мы быстро теряем людей, которые осуществляли раннее тестирование initscripts, т.е. следили за проектом, проверяли патчи и тестировали initscripts-git. В какой то момент, мы видимо столкнемся с нехваткой разработчиков и доверенных пользователей для тестирования initscripts в тестовом репозитории. Поэтому если вам близок sysvinit/initscripts способ загрузки, присоединяйтесь к проекту Arch и помогайте в тестировании. Initscripts Initscripts в настоящее время полностью поддерживаются и активно развиваются. Уже на протяжении большого количества времени ведется работа по объединению и унификации файлов конфигурации для initscripts и systemd. И эта работа в основном завершена (по крайней мере, для initscripts). Кроме того, код разделен для systemd и initscripts, где это возможно (может быть, есть еще больше возможностей для этого, но работа в основном завершена). Все это должно способствовать довольно легкой поддержке initscripts в Arch в долгосрочной перспективе, даже с небольшой базой пользователей и разработчиков. Я намерен поддерживать initscripts в официальном репозитории пока это будет иметь смысл. Однако, чтобы это все было жизнеспособным, мы нуждаемся в еще как минимум одном разработчике initscripts, который заинтересован помогать и который использует sysvinit/initscripts в качестве основной init-системы. В дальнейшем этот человек сможет взять на себя сопровождение initscripts. Если это кому-то интересно, то присоединяйтесь к проекту Arch, публикуйте отзывы, предложения и патчи. Пакеты, требующие systemd В (ближайшем) будущем мы ожидаем, что некоторые пакеты будут поддерживать только systemd-загрузку. В частности, я думаю это polkit, networkmanager и некоторые пакеты GNOME (какие именно я не знаю, так как не использую GNOME). В будущем количество таких пакетов вероятно будет только увеличиваться. Мы также возможно прекратим поддержку ConsoleKit в будущем. Но не нужно паниковать. Количество пакетов, которые нужно перекомпилировать для поддержки чего-то отличного от systemd на самом деле очень мало (наверное меньше десяти). Поддерживать альтернативный репозиторий, содержащий данные пакеты, даже одному человеку (например тому, кто будет сопровождать initscripts), будет очень легко. Я буду рад помочь в старте этой затеи, если кто-то заинтересован. Впрочем, возможно люди, которые не хотят использовать systemd, также не используют polkit или consolekit, поэтому для них эта проблема не актуальна. RC-скрипты В настоящее время мы имеем несколько сотен rc-скриптов в нашем репозитории (скрипты в /etc/rc.d/), поставляемых с разными пакетами. Это скорее всего не изменится в ближайшем будущем. Но если кто-то из мейнтейнеров решит убрать эти скрипты из своих пакетов (оставив только unit-файлы для systemd), то можно взять нужные скрипты из нашего репозитория и добавить их в альтернативный репозиторий, о котором я говорил выше. Заключение Как я попытался изложить выше, объем работы, необходимой для не-systemd загрузки, действительно очень мал, и я буду рад помочь всем, кто решит принять его. Однако, я видел предложения путей для избежания поставки только systemd в дистрибутиве, которые предполагали разделение пакета на части и перекомпилирование десятка пакетов, чтобы избежать зависимостей от библиотек systemd, или же повторно дублировать код, разделенный между systemd и initscripts. Это, по моему скромному мнению, не стоит усилий и я не заинтересован связываться с этим.