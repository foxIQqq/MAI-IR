В ZFS on Linux добавлена поддержка FreeBSD

В кодовую базу "ZFS on Linux", развиваемую под эгидой проекта OpenZFS в качестве эталонной реализации ZFS, приняты изменения, добавляющие поддержку операционной системы FreeBSD. Добавленный в "ZFS on Linux" код протестирован в ветках FreeBSD 11 и 12. Таким образом, разработчикам FreeBSD теперь не нужно поддерживать собственное синхронизированное ответвление "ZFS on Linux" и разработка всех связанных с FreeBSD изменений будет осуществляться в основном проекте. Кроме того, работоспособность во FreeBSD основной ветки "ZFS on Linux" в процессе разработки будет тестироваться в системе непрерывной интеграции. Напомним, что в декабре 2018 года разработчики FreeBSD выступили с инициативой перехода на реализацию ZFS от проекта "ZFS on Linux" (ZoL), вокруг которого последнее время сосредоточилась вся активность, связанная с развитием ZFS. В качестве причины миграции была упомянута стагнация кодовой базы ZFS от проекта Illumos (форк OpenSolaris), которая ранее использовалась в качестве основы для переноса связанных с ZFS изменений во FreeBSD. Основной вклад в поддержку кодовой базы ZFS в Illumos до недавнего времени вносила компания Delphix, развивающая операционную систему DelphixOS (форк Illumos). Два года назад компания Delphix приняла решение о переходе на "ZFS on Linux", что привело к стагнации ZFS от проекта Illumos и сосредоточением всей связанной с разработкой активности в проекте "ZFS on Linux", который теперь рассматривается как основная реализация OpenZFS. Разработчики FreeBSD решили последовать общему примеру и не пытаться удержаться за Illumos, так как эта реализация уже сильно отстаёт по функциональности и требует больших ресурсов для сопровождения кода и переноса изменений. "ZFS on Linux" теперь рассматривается как основной единый совместный проект по разработке ZFS. Среди возможностей, которые доступны в "ZFS on Linux" для FreeBSD, но отсутствуют в реализации ZFS от Illumos: режим multihost (MMP, Multi Modifier Protection), расширенная система квот, шифрование наборов данных, раздельный выбор классов распределения блоков (allocation classes), использование векторных процессорных инструкций для ускорения реализация RAIDZ и вычисления контрольных сумм, улучшенный инструментарий командной строки, исправление многих ошибок, связанных с состоянием гонки и блокировками.