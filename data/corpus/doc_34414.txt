Релиз дисплейного сервера Wayland 0.95 и композитного сервера Weston 0.95

Представлен релиз протокола, механизма межпроцессного взаимодействия и библиотек Wayland 0.95, который выпущен синхронно с композитным сервером Weston 0.95. Выпуск 0.95 переводит проект на завершающую стадию подготовки первого стабильного релиза, ознаменовав полную заморозку API от внесения нарушающих совместимость изменений и переход на фазу интенсивного тестирования. Утверждается, что написанные для Wayland 0.95 клиентские приложения и тулкиты смогут без изменений функционировать и с Wayland 1.0, релиз которого планируется выпустить в конце года. По сути, стабилизации API даёт зелёный свет для более интенсивной адаптации продуктов для прямой работы с Wayland и интеграции поддержки технологий Wayland в дистрибутивы. Отдельно можно отметить, что стабилизация касается только протокола Wayland и клиентского API, интерфейсы Weston и wayland-server не закрыты от изменений. Кроме того, сообщается, что заморозка не касается интерфейса к протоколу (wl_drm) и библиотек (gbm), которые будут включены в состав пакета Mesa, их можно будет воспринимать как стабильные только после релиза Mesa 8.1. Напомним, что Wayland представляет собой протокол взаимодействия композитного сервера и работающих с ним приложений. Клиенты самостоятельно выполняют отрисовку своих окон в отдельном буфере, передавая информацию об обновлениях композитному серверу, который комбинирует содержимое буферов отдельных приложений для формирования итогового вывода с учётом возможных нюансов, таких как перекрытие окон и прозрачность. Иными словами, композитный сервер не предоставляет API для отрисовки отдельных элементов, а оперирует только с уже сформированными окнами, что позволяет избавиться от двойной буферизации при использовании высокоуровневых библиотек, таких как GTK+ и Qt, берущих на себя работу по компоновке содержимого окон. Взаимодействие с аппаратным обеспечением, например, проведение инициализации, переключение видеорежимов (drm modesetting) и управление памятью (GEM для i915 и TTM для radeon и nouveau) графических карт, может производиться напрямую через модуль, работающий на уровне ядра, что позволяет обойтись без привилегий суперпользователя. В настоящее время поддержка прямой работы c Wayland уже реализована для библиотек Gtk3+, Qt 5, SDL, Clutter и EFL (Enlightenment Foundation Library). Для обеспечения выполнения обычных X11-приложений в окружении на базе Wayland и композитного сервера Weston развивается проект XWayland, позволяющий организовать запуск полноценного X.Org-сервера в роли клиента Wayland. В рамках проекта Weston развивается один из прототипов реализации композитного сервера. Подчёркивается, что это лишь одна из реализаций (по аналогии с оконными менеджерами), так как в роли композитного сервера может выступать любой другой продукт, поддерживающий протокол Wayland. Например, в настоящее время ведётся работа по обеспечению поддержки Wayland в таких существующих композитных менеджерах для X11, как KWin и Compiz. Композитный сервер Weston может работать с использованием DRM-модуля ядра Linux, поверх X11 или поверх другого композитного сервера Wayland.