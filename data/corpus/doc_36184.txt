Оценка производительности файловой системы F2FS, включённой в состав ядра Linux 3.8

Ресурс Phoronix провёл серию тестов работы файловых систем на SSD-накопителях. Основной целью данных тестов была проверка, как новая файловая система F2FS соотносится с другими файловыми системами в ситуации, когда носитель представляет собой массив NAND flash памяти, на работу с которой в основном и оптимизирована файловая система F2FS. В тесте приняли участие файловые системы F2FS, Btrfs, EXT3, EXT4, XFS и JFS. Тестирование производилось на 160Гб накопителе Intel SSD SA2M160. В тесте Flexible IO Tester 1.57 первое место занял ext4. Второе место поделили между собой JFS и EXT3. F2FS показал в данном тесте весьма неважный результат, выиграв только у btrfs и проиграв всем остальным участникам тестирования. В семействе тестов FS-Mark V3.3 F2FS показал отличный результат, заняв первое место. На втором месте с довольно небольшим отрывом оказался JFS, который очень хорошо показал себя в этом семействе тестов. За третье место соревновались XFS и EXT4. Самые плохие результаты в этом семействе тестов показал ReiserFS, заметно отставший от других файловых систем. В тесте dbench F2FS победил с огромным отрывом. На втором месте оказался JFS, который тем не менее проиграл победителю более чем в полтора раза. На 3-м месте оказался ext4, отставший от лидера в примерно 2.5 раза. Последнее место в данном тесте занял ReiserFS. В тестах на чтение IOZone F2FS показал вполне приличный результат, на равных соперничая с JFS, XFS и EXT4. Все эти файловые системы показали очень близкий результат. Самыми медленными в этом семействе тестов показали себя EXT3 и Btrfs. В тестах на запись IOZone F2FS опять был в рядах лидеров. При этом разница между F2FS, EXT3, EXT4, BTRFS и XFS была незначительной. Медленней всех данные тесты выполнили JFS и ReiserFS, тем не менее, отставание от лидеров было достаточно скромным. В тесте compile bench - compile лидерами выступили btrfs и ext4, поделившие первое место с очень близкими результатами. Второе место заняли EXT3 и XFS, показавшие очень близкий друг к другу результат. За третье место боролись F2FS и JFS, опять же показавшие близкие результаты. Самой медленной ФС в данном тесте был ReiserFS. В тесте compile bench - initial create первое место разделили XFS и EXT4. Второе место занял EXT3, а третье - btrfs. F2FS и JFS разделили 4-е место, показав близкие результаты. Самым медленной ФС в этом тесте опять был ReiserFS. В тесте PostMark F2FS занял первое место, практически разделив его с XFS и EXT4, отставшими от F2FS на незначительную величину. От группы лидеров немного отстал JFS. Хуже всех в данном тесте опять выступил ReiserFS. В целом по результатам данного теста можно сделать вывод, что F2FS является вполне заслуживающим внимания вариантом в случае использования SSD. Также можно отметить неожиданно высокие результаты JFS в ряде тестов и достаотчно неожиданный проигрыш ReiserFS (считающейся довольно быстрой ФС) в значительном количестве тестов. Отдельно было проведено тестирование файловой системы F2FS на SDHC карте памяти. В качестве тестового носителя в данной серии замеров выступала карта памяти Patriot LX Series 16GB Class 10 SDHC. Поскольку SD карты намного медленнее чем SSD, было решено ограничиться соперниками в виде EXT4 и Btrfs. Кроме того, отмечается, что неплохим кандидатом на тестирование могла бы стать ФС Tux3, однако она пока не внесена в основное ядро Linux. В тесте Flexible IO tester - оценке производительности доступа к файлам F2FS показал наилучший результат. Btrfs немного отстал от лидера, а ext4 оказался в этом тесте медленнее всех, проиграв примерно на треть. В тестах FSMark и Dbench F2FS также был лидером, заметно обогнав конкурентов. Второе место в обоих тестах занял EXT4, btrfs оказался в указанных тестах самой медленной ФС. В тесте IOZone - операции чтения с размером блока в 4Кб F2FS и EXT4 показали очень близкие результаты. Btrfs заметно отстал от обоих лидеров. В тесте IOZone - при записи с размером блока в 4Кб лидером стал ext4, тогда как F2FS и Btrfs несколько отстали от лидера, показав близкий результат. В тесте IOZone - операции чтения с размером блока в 64Кб F2FS и EXT4 опять показали близкие результаты, с некоторым преимуществом в пользу F2FS. Btrfs отстал от соперников более чем в 2 раза. В тесте IOZone - при записи с размером блока в 64Кб лидером стал ext4. Btrfs показал близкий результат. F2FS заметно отстал от обоих ФС. В тесте PostMark F2FS одержал безоговорочную победу. Второе место с некоторым отставанием занял btrfs. EXT4 в данном тесте показал очень плохой результат, проиграв лидеру теста более чем в 5 раз. В целом F2FS показал себя на подобном носителе довольно перспективно, обгоняя ext4 на многих нагрузках. Btrfs, с другой стороны, в большинстве тестов показал себя медленнее остальных ФС на данном носителе и его сложно рекомендовать для использования с таким носителем.