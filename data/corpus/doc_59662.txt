Для Debian и Ubuntu создан репозиторий со свежими версиями ядра Linux

Стефан Грабе (Stéphane Graber), лидер проекта Linux Containers, член управляющего технического совета Ubuntu и участник команд, отвечающих за выпуск релизов Ubuntu, объявил о создании репозитория Zabbly, в котором началась публикация пакетов со свежими выпусками ядра Linux для Debian и LTS-выпусков Ubuntu. Представленный репозиторий позволит использовать в Ubuntu и Debian "ванильные" версии ядра, более новые, чем ядра из пакетов, поставляемых через штатную систему обновлений. Пакеты формируются для Ubuntu 20.04 LTS, Ubuntu 22.04 LTS и Debian 12 в сборках для архитектур x86_64 и aarch64. Новые версии пакетов планируется публиковать еженедельно по мере выпуска новых корректирующих обновлений ядра. После выхода новой значительно версии ядра Linux репозиторий будет переключаться на его поставку как только разработчиками ядра будет сформировано первое корректирующее обновление (например, сейчас в репозитории предложена версия 6.4.12, а после выхода ядра 6.5.1 репозиторий перейдёт на поставку более новой ветки 6.5.). Пакеты собираются и публикуются в автоматическом режиме после ручного одобрения перехода на новый выпуск и прохождения тестирования на нескольких серверах. Сборки пакетов формируются на основе корректирующих выпусков ядра, предлагаемых на сайте kernel.org, с патчами, добавляющими поддержку VFS idmap для cephfs, устраняющими проблемы с PCIe на серверах Qualcomm с архитектурой aarch64 и отключающими GPL-only привязки в kernel_neon_begin и kernel_neon_end, которые мешают использованию ZFS на системах с архитектурой aarch64. Конфигурация ядер оптимизирована для использования в виртуальных машинах и для запуска контейнеров в окружении на базе инструментария Incus (форк LXD). Настройки ядра приближены к настройкам ядер из пакетов для Ubuntu. В качестве причины создания нового репозитория отмечается желание предоставить пользователям возможность использования ядер с самыми свежими драйверами и более широкой поддержкой оборудования (репозиторий имеет смысл использовать, когда в штатном пакете с ядром отсутствуют драйверы для оборудования, поддерживаемого в свежих ванильных ядрах). Использование ванильных ядер также может оказаться полезным как способ избежать регрессий, специфичных для Ubuntu-пакетов с ядром и возникающих из-за применения большого числа дополнительных патчей. Для добавления нового репозитория в систему следует добавить файл /etc/apt/sources.list.d/zabbly-kernel-stable.sources, выбрав необходимые значения в полях Suites и Architectures: Enabled: yes Types: deb deb-src URIs: https://pkgs.zabbly.com/kernel/stable Suites: focal, jammy или bookworm Components: main Architectures: amd64 или arm64 Signed-By: /etc/apt/keyrings/zabbly.asc Из ограничений пакетов из репозитория Zabbly отмечается отсутствие поддержки загрузки в режиме UEFI SecureBoot из-за отсутствия заверения ядра цифровой подписью, связанной цепочкой доверия с ключами, поставляемыми в прошивках.