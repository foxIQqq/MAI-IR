Выпуск композитного сервера Weston 8.0

Опубликован стабильный релиз композитного сервера Weston 8.0, развивающего технологии, содействующие появлению полноценной поддержки протокола Wayland в Enlightenment, GNOME, KDE и других пользовательских окружениях. Разработка Weston нацелена на предоставление высококачественной кодовой базы и рабочих примеров для использования Wayland в десктоп-окружениях и встраиваемых решениях, таких как платформы для автомобильных информационно-развлекательных систем, смартфонов, телевизоров и прочих потребительских устройств. Выпуск протокола, механизма межпроцессного взаимодействия и библиотек Wayland 1.18 намечен на 11 февраля. Смена значительного номера версии Weston обусловлена изменениями ABI, нарушающими совместимость. Изменения в новой ветке Weston: Повышена эффективность задействования в DRM (Direct Rendering Manager) аппаратных механизмов манипуляции с регионами памяти, используемыми для хранения компонентов фреймбуфера (hardware planes); В бэкенд DRM, используемый для организации вывода через подсистемы ядра DRM (Direct Rendering Manager), KMS (Kernel Mode Setting) и evdev, добавлена поддержка технологии защиты от копирования звукового и видеоконтента HDCP, которая используется для шифрования видеосигнала, передаваемого через интерфейсы DVI, DisplayPort, HDMI, GVIF или UDI; В gl-renderer добавлена блокировка захвата, предоставления совместного доступа и создания скриншотов областей, в которых отображается защищённый от копирования контент; В бэкенд headless, применяемый для рендеринга без экрана, добавлена поддержка отрисовки в буфер с использованием OpenGL (добавлена опция "--use-gl"), что позволяет получить виртуальное изображение экрана в памяти, которое можно передать удалённому клиенту; В бэкенде вывода через подсистему DRM (Direct Rendering Manager) добавлена возможность сборки без привязки к библиотеке GBM (Generic Buffer Manager), предлагаемой в Mesa для управления выделением буферов отрисовки. Вместо форматов GBM задействованы форматы FourCC, применяемые в подсистеме DRM; Для сокращения нагрузки на память в некоторых GPU по возможности теперь всегда применяется EGL-расширение EGL_KHR_partial_update, позволяющее выборочно обновлять содержимое поверхностей, пропуская области, в которых не было изменений; Расширены возможности фреймворка для ведения отладочных логов; В gl-renderer добавлена поддержка формата XYUV; В оконном менеджере xwm реализован контроль за выводом изменений на поверхность Wayland при работе Xwayland, который позволил избавиться от артефактов при декорировании окон X11-приложений, запускаемых в окружении на базе Wayland; Снижено потребление памяти при отображении однородного фона рабочего стола за счёт применения буфера 1x1 для всего viewport-а; Добавлена поддержка расширения weston-direct-display, позволяющего организовать передачу содержимого dmabuf напрямую в контроллер экрана.