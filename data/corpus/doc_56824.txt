Релиз Firefox 98

Состоялся релиз web-браузера Firefox 98. Кроме того, сформировано обновление ветки с длительным сроком поддержки - 91.7.0. На стадию бета-тестирования переведена ветка Firefox 99, релиз которой намечен на 5 апреля. Основные новшества: Изменено поведение при загрузке файлов - вместо вывода запроса перед началом загрузки, файлы теперь начинают загружаться автоматически, а в панели показывается уведомление о начале загрузки. Через панель пользователь в любой момент может получить информацию о процессе загрузки, открыть загружаемый файл в ходе загрузки (действие будет совершено после окончания загрузки) или удалить файл. В настройках предоставлена возможность включения вывода запроса при каждой загрузке и определения приложения по умолчанию для открытия файлов определённого типа. Добавлены новые действия в контекстное меню, показываемое при клике правой кнопкой мыши на файлах в списке загрузки. Например, при помощи опции "Always Open Similar Files" можно разрешить Firefox автоматически открывать файл после завершения загрузки в приложении, связанном в системе с тем же типом файлов. Также можно открыть каталог с загруженными файлами, перейти на страницу с которой была инициирована загрузка (не сама загрузка, а ссылка на загрузку), скопировать ссылку, удалить упоминание о загрузке из истории посещений и очистить список в панели загрузок. Для некоторых пользователей изменена выбранная по умолчанию поисковая система. Например, в протестированной англоязычной сборке вместо Google по умолчанию принудительно теперь включён DuckDuckGo. При этом Google остался в числе поисковых систем в качестве опции и может быть активирован по умолчанию в настройках. В качестве причины принудительного изменения поисковой системы по умолчанию упоминается невозможность продолжения поставки обработчиков для некоторых поисковых движков из-за отсутствия официального согласования (formal permission). Сделка с компанией Google о передаче поискового трафика действовала до августа 2023 года и приносила около 400 млн долларов в год, что составляет большую часть дохода Mozilla. В настройках по умолчанию показан новый раздел с экспериментальными возможностями, которые пользователь может протестировать на свой страх и риск. Например, для тестирования доступна возможность кэширования стартовой страницы, режимы SameSite=Lax и SameSite=None, CSS Masonry Layout, дополнительные панели для web-разработчиков, выставление Firefox 100 в заголовке User-Agent, глобальные индикаторы для выключения звука и микрофона. С целью оптимизации процесса запуска браузера, изменена логика запуска дополнений, в которых используется API webRequest. К запуску дополнений во время запуска Firefox теперь будут приводить только блокирующие вызовы webRequest. Обращения к webRequest в неблокирующем режиме будут откладываться до завершения запуска Firefox. Включена поддержка HTML-тега "<dialog>", позволяющего формировать диалоговые окна и компоненты для интерактивного взаимодействия с пользователем, такие как закрываемые предупреждения и вложенные окна. Созданными окнами можно управлять из кода на JavaScript. В реализации спецификации Custom Elements, позволяющей добавлять собственные HTML-элементы, расширяющие функциональность существующих HTML-тегов, добавлена поддержка добавления собственных элементов, связанных с обработкой форм ввода. В CSS добавлено свойство hyphenate-character, которое можно использовать для установки строки, используемой вместо символа переноса конца слова на другую строку ("-"). В методе navigator.registerProtocolHandler() реализована поддержка регистрации обработчиков протоколов для схем URL ftp, sftp и ftps. Добавлено свойство HTMLElement.outerText, которое возвращает содержимое внутри узла DOM, как и свойство HTMLElement.innerText, но в отличие от последнего при записи заменяет не содержимое внутри узла, а узел целиком. Отключено по умолчанию API WebVR, которое объявлено устаревшим (для возвращения в about:config следует установить параметр dom.vr.enabled=true). В инструменты для web-разработчиков добавлена панель для оценки совместимости. В панели выводятся индикаторы с предупреждением о возможных проблемах с CSS-свойствами выбранного HTML-элемента или всей страницы, позволяющие определить несовместимости с разными браузерами без отдельного тестирования страницы в каждом браузере. Предоставлена возможность отключения обработчиков событий (event listener) для заданного узла DOM. Отключение производится через подсказку, выводимую при наведении мыши на событие в интерфейсе инспектирования страницы. В контекстное меню режима редактирования в отладчике добавлен пункт "Ignore line" для игнорирования строки при выполнении. Пункт показывается при установке параметра devtools.debugger.features.blackbox-lines=true в about:config. Реализован режим автоматического открытия инструментов для разработчиков для вкладок, открытых через вызов window.open (в режиме devtools.popups.debug для страниц, для которых открыты инструменты для разработчиков, они автоматически будут открыты и для всех открываемых с этой страницы вкладок). В версии для платформы Android предоставлена возможность смены фонового изображения на домашней странице и добавлена поддержка очистки Cookie и данных сайта для одного домена. Кроме новшеств и исправления ошибок в Firefox 98 устранено 16 уязвимостей, из которых 4 помечены как опасные. 10 уязвимостей (сведены под CVE-2022-0843) вызваны проблемами работы с памятью, такими как переполнения буферов и обращение к уже освобождённым областям памяти. Потенциально данные проблемы способны привести к выполнению кода злоумышленника при открытии специально оформленных страниц. В бета-версии Firefox 99 добавлена поддержка родных контекстных меню GTK, включены плавающие полосы прокрутки GTK, в просмотрщике PDF предоставлена поддержка поиска с учётом или без учёта диакритических знаков, в режим читателя (ReaderMode) добавлена горячая клавиша "n" для включения/выключения режима чтения вслух (Narrate).