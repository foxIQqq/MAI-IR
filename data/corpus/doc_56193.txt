Выпуск Stratis 3.0, инструментария для управления локальными хранилищами

Опубликован выпуск проекта Stratis 3.0, развиваемого компанией Red Hat и сообществом Fedora для унификации и упрощения средств настройки и управления пулом из одного или нескольких локальных накопителей. Stratis предоставляет такие возможности, как динамическое выделение места в хранилище, снапшоты, обеспечение целостности и создание слоёв для кэширования. Поддержка Stratis интегрирована в дистрибутивы Fedora и RHEL начиная с выпусков Fedora 28 и RHEL 8.2. Код проекта распространяется под лицензией MPL 2.0. Система во многом повторяет по своим возможностям расширенные средства управления разделами ZFS и Btrfs, но реализована в виде прослойки (демон stratisd), работающей поверх подсистемы device-mapper ядра Linux (используются модули dm-thin, dm-cache, dm-thinpool, dm-raid и dm-integrity) и файловой системы XFS. В отличие от ZFS и Btrfs, компоненты Stratis работают только в пространстве пользователя и не требуют загрузки специфичных модулей ядра. Проект изначально преподносится как не требующий для администрирования квалификации эксперта по системам хранения. Для управления предоставляется D-Bus API и cli-утилита. Работа Stratis протестирована с блочными устройствами на базе LUKS (шифрованные разделы), mdraid, dm-multipath, iSCSI, логическими томами LVM, а также с различными НЖМД, SSD и NVMe-накопителями. При наличии в пуле одного диска Stratis позволяет использовать логические разделы с поддержкой снапшотов для отката изменений. При добавлении нескольких накопителей в пул появляется возможность логического объединения накопителей в непрерывную область. Такие возможности, как RAID, сжатие данных, дедупликация и организация отказоустойчивости пока не поддерживаются, но запланированы на будущее. Значительная смена номера версии объясняется изменением интерфейса для управления через D-Bus и прекращением поддержки интерфейсов FetchProperties в пользу использования свойств и методов на основе D-Bus. В новом выпуске также добавлена проверка правил udev при помощи libblkid перед внесением изменений, переделана обработка событий от DeviceMapper, изменено внутреннее представление обработчиков ошибок, переработан код для отката изменений (rollback), разрешено указание логического размера при создании ФС. Во фреймворке Clevis, применяемом для автоматического шифрования и расшифровки данных в дисковых разделах, задействованы хэши SHA-256 вместо SHA-1. Предоставлена возможность изменения парольной фразы и перегенерации привязок к Clevis.