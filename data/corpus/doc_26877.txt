Вышел релиз http-сервера nginx 0.7.66

Вышел релиз стабильной ветки http-сервера nginx - 0.7.66. Изменения, относительно предыдущей версии: Безопасность: теперь nginx на платформе Windows игнорирует имя потока файла по умолчанию; Добавление: директивы proxy_no_cache и fastcgi_no_cache. Добавление: теперь при использовании переменной $scheme в директиве rewrite автоматически делается редирект. Добавление: директива chunked_transfer_encoding. Добавление: переменные $geoip_city_continent_code, $geoip_latitude и $geoip_longitude. Добавление: модуль ngx_http_image_filter_module теперь всегда удаляет EXIF и другие данные, если они занимают больше 5% в JPEG-файле. Добавление: теперь директива msie_padding работает и для Chrome. Изменение: теперь charset-фильтр работает до SSI-фильтра. Изменение: теперь в лог ошибок не пишется сообщение, если переменная не найдена с помощью метода $r->variable(). Изменение: теперь keepalive соединения после запросов POST не запрещаются для MSIE 7.0+. Изменение: теперь keepalive соединения запрещены для Safari. Исправление: nginx игнорировал значения "private" и "no-store" в строке "Cache-Control" в заголовке ответа бэкенда. Исправление: символ "&" при копировании в аргументы в правилах rewrite не экранировался. Исправление: nginx мог завершаться аварийно во время обработки сигнала или при использовании директивы timer_resolution на платформах, не поддерживающих методы kqueue или eventport. Исправление: если временные файлы и постоянное место хранения располагались на разных файловых системах, то у постоянных файлов время изменения было неверным. Исправление: модуль ngx_http_memcached_module мог выдавать ошибку "memcached sent invalid trailer". Исправление: nginx не мог собрать библиотеку zlib-1.2.4 из исходных текстов. Исправление: модуль SSI в подзапросах использовал закэшированные в основном запросе значения переменных $query_string, $arg_... и им подобных. Исправление: nginx не поддерживал HTTPS-рефереры. Исправление: nginx/Windows мог не находить файлы, если путь в конфигурации был задан в другом регистре; ошибка появилась в 0.7.65. Исправление: переменная $date_local выдавала неверное время, если использовался формат "%s". Исправление: nginx не поддерживал все шифры, используемые в клиентских сертификатах. Исправление: если ssl_session_cache не был установлен или установлен в none, то при проверке клиентского сертификаты могла происходить ошибка "session id context uninitialized"; ошибка появилась в 0.7.1. Исправление: совместимость с OpenSSL-1.0.0 на 64-битном Linux. Исправление: geo-диапазон возвращал значение по умолчанию, если диапазон включал в себя одну и более сетей размером /16 и не начинался на границе сети размером /16. Исправление: переменную $uid_got нельзя было использовать в SSI и перловом модулях. Исправление: рабочий процесс зависал при запросе файла FIFO. Исправление: значение переменной повторно экранировалось после каждого вывода SSI-команды echo; ошибка появилась в 0.6.14. Исправление: параметр stub в SSI-директиве include не использовался, если пустой ответ имел код 200. Исправление: блок, используемый в параметре stub в SSI-директиве include, выводился с MIME-типом "text/plain". Исправление: если проксированный или FastCGI запрос внутренне перенаправлялся в другой проксированный или FastCGI location, то в рабочем процессе мог произойти segmentation fault; ошибка появилась в 0.7.65. Исправление: соединения IMAP к серверу Zimbra могло зависнуть до таймаута. Исправление: nginx не поддерживал передачу chunk'ами для 201-ых ответов. Кроме того, одновременно выпущена экспериментальная версия nginx - 0.8.40, из новшеств в которой можно отметить добавление модуля ngx_http_uwsgi_module.