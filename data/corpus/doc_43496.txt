Статус развития новой версии OpenVZ - Virtuozzo 7

Прошло больше полугода с момента начала открытой разработки дистрибутива Virtuozzo 7, развиваемого после слияния в единый свободный продукт кодовых баз открытой системы контейнерной виртуализации OpenVZ и коммерческого продукта Virtuozzo (Parallels Cloud Server). За это время в проекте произошло много изменений, среди которых: Опубликована документация для Virtuozzo 7: Command Line Reference, Getting Started Guide, Installation Guide, Installation Using PXE, Templates Management Guide. Исходный код документации так же как и исходный код продукта размещён в репозитории; В дистрибутив добавлено два новых компонента: libreport-plugin-virtuozzo и coripper; Минимальные шаблоны контейнеров очень популярны в OpenVZ, но отсутствуют в Virtuozzo 7. Один из пользователей OpenVZ Philipp Born сделал минимальный шаблон для операционной системы Debian и разработчики добавили его в базовый дистрибутив Virtuozzo; После продолжительного обсуждения востребованности SimFS разработчиками Virtuozzo было принято решение перенести код SimFS в новое ядро, базирующееся на ядре RHEL7. Опубликована таблица со сравнением ploop и SimFS. Статус портирования SimFS на ядро RHEL7 можно отслеживать в тикетах OVZ-6581 и OVZ-6613; Добавлена новая функциональность: возможность запуска каждого контейнера в отдельном пространстве имён пользователя, поддержка форматов виртуальных дисков QEMU в утилиту prl_disk_tool, в дистрибутиве Virtuozzo 7 поставляется пакет virt-manager с возможностью управления как виртуальными машинами так и контейнерами; Подготовлена таблица, в которой проведено сравнение функциональности Virtuozzo 7 с похожими решениями. Таблица позволит понять какую функциональность стоит ждать в релизе Virtuozzo и оценить достаточно ли будет функциональности бесплатной версии для решения своих задач. Нужно отметить, что некоторая функциональность находится в статусе обсуждения и поэтому не была добавлена в таблицу; Опубликован отчёт аудита безопасности исходного кода OpenVZ, который делал Александр Песляк (Solar Designer из проекта OpenWall) в 2005 году. Во время аудита была выявлена одна проблема в коде OpenVZ и две проблемы в коде ванильного ядра Linux. Все проблемы были исправлены. Этот отчёт лишний раз подтверждает высокое качество кода в проекте OpenVZ; Составлен список технологий и продуктов, интегрированных с OpenVZ; Разработчики отказались от использования пакетной базы Cloud Linux и теперь базовые пакеты дистрибутива Virtuozzo 7 собираются своими силами. Такой шаг позволит более гибко разрабатывать продукт и сохранить время разработчиков. При использовании лицензии на Virtuozzo 7 поддержка будет распространяться и на базовые пакеты в том числе. В Virtuozzo 7 гипервизор собственной разработки был заменён на KVM/QEMU. Все сборки Virtuozzo 7 из ветки Beta 2 включают всё необходимое для запуска виртуальных машин QEMU. Пользовательские утилиты (prlsrvctl, prlctl) интегрированы c QEMU с помощью LibVirt и позволяют управлять как контейнерами так и виртуальными машинами. Возможность использовать стандартные утилиты virsh, virt-install как и другие приложения, интегрированные с LibVirt, сохранилась; Пример создания виртуальной машины с CentOS 6.7 x86_64 с помощью virt-install: $ curl -O http://mirrors.kernel.org/centos/6.7/isos/x86_64/CentOS-6.7-x86_64-bin-DVD1.iso $ virt-install --virt-type kvm --name centos-6.7 --ram 1024 --disk centos-6.7.qcow2 format=qcow2 --graphics vnc password=vz7 listen=0.0.0.0 --noautoconsole--os-type=linux --os-variant=rhel6 --extra-args"console=tty0 console=ttyS0115200n8 serial" --location=CentOS-6.7-x86_64-bin-DVD1.iso --network network=Bridged Попробовать тестовые сборки можно несколькими способами: загрузить установочный образ с одного из зеркал проекта OpenVZ и установить Virtuozzo 7 на физический сервер или виртуальную машину запустить инстанс Virtuozzo 7 в облаке Amazon EC2 (это будет бесплатно в случае использования t2.micro) или загрузить образ для Vagrant. Подготовлено несколько скринкастов про утилиты Virtuozzo, которые отсутствовали в OpenVZ: мониторинг ресурсов с помощью vzstat установка гостевой ОС с помощью virt-install базовые операции с контейнерами с помощью утилиты prlctl; Дополнительно можно упомянуть о намерении провести в феврале новую встречу с пользователями и разработчиками контейнеров. Желающие выступить с докладами могут связаться с организаторами. Интересующиеся технологиями контейнерной изоляции в Linux могут подписаться на группу Moscow Containers Meetup на meetup.com или на рассылки проекта OpenVZ. В рассылках каждый месяц публикуется список наиболее значительных изменений в разработке Virtuozzo. Отчёты за предыдущие месяцы: октябрь, ноябрь.