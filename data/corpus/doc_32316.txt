Mozilla развернёт борьбу с утечками памяти в дополнениях и тестирует фоновые обновления к Firefox

Отметив успехи проекта MemShrink, наработки которого позволили снизить потребление памяти в Firefox 7 на 20-50%, разработчики намерены расширить сферу действия инициативы и заняться выявлением утечек памяти в сторонних дополнениях. По мнению участников проекта, огромное число жалоб на повышенное потребление памяти Firefox, вызвано не проблемами в самом браузере, а утечками памяти в установленных дополнениях. Пользователям трудно судить, вызван большой расход памяти браузером, или установленными дополнениями, поэтому негативная реакция как правило перекладывается на сам браузер. Джастин Лебар (Justin Lebar), один из разработчиков Mozilla, предложил более серьёзно обратить внимание на проблему и организовать регулярный мониторинг потребления памяти в дополнениях. Джастин считает, что Mozilla несёт ответственность перед пользователями и сейчас именно то время, когда ещё не поздно взять на себя роль защитника пользователей от проблем в дополнениях и поступить в том же духе, как когда-то было сделано для защиты пользователей от использования устаревших плагинов, содержащих проблемы безопасности (блокируется использование дополнений и плагинов, содержащих уязвимости и серьёзные проблемы со стабильностью). Джастин Лебар предлагает реализовать стратегию, которая включает в себя три подхода: Добавление на сайт распространения дополнений средств для выявление утечек памяти в коде дополнений. В настоящее время все дополнения в каталоге в обязательном порядке предварительно тестируются на предмет наличия вредоносного кода, перед тем как попасть в каталог. Лебар предлагает расширить спектр обязательных проверок и добавить поиск утечек памяти в стандартный процесс приёма новых дополнений; Обеспечение возможности пометки и публичной идентификации дополнений, потребляющих слишком много памяти. Для стимулирования разработчиков и информирования пользователей можно сформировать рейтинг самых прожорливых дополнений, по аналогии с уже существующим рейтингом самых медленных дополнений; Создание набора инструментов для создателей дополнений, позволяющего на этапе разработки выявлять и решать проблемы с использованием памяти. Одновременно, объявлено о появлении в неофициальных ночных Ash-сборках поддержки фоновой установки обновлений. Технология подготовлена с целью минимизации времени, отнимаемого у пользователя на ожидание окончания процесса установки обновления, и прекращения участия пользователя в процессе приёма обновлений (хочет пользователь или нет, а обновление будет активировано при первом перезапуске). Напомним, что по статистике около 15% пользователей Firefox по тем или иным причинам отказываются от загрузки обновлений и остаются на старых версиях, подверженных известным уязвимостям. Суть метода фоновой установки обновлений в том, что после того как обновление загрузится (автоматически или по инициативе пользователя), без вывода дополнительных диалогов сразу запустится приложение для установки обновления, которое его применит, но разместит обновлённую версию Firefox в отдельной директории, не пересекающейся с текущей установочной директорией. После этого пользователь будет ненавязчиво информирован и, в дальнейшем, при первом перезапуске вместо длительного применения обновления рабочая директория мгновенно будет перенаправлена на директорию с установленным обновлением. Новая техника фоновой установки обновлений пока носит экспериментальный характер и нуждается в дополнительном тестировании. Пока не ясно начиная с какого релиза Firefox подобная возможность будет активирована по умолчанию.