В COMSTAR/ZFS в Illumos силами сообщества добавлена поддержка SCSI UNMAP

Гарретт Д'Аморе (Garrett D'Amore), лидер проекта Illumos, в рамках которого создано полностью свободное и развиваемое независимым сообществом ответвление от кодовой базы OpenSolaris, представил реализацию поддержки SCSI-команды UNMAP для файловой системы ZFS и фреймворка COMSTAR (Common Multiprotocol SCSI Target), который обеспечивает работу системы в режиме SCSI target, позволяющего организовать доступ к сетевым хранилищам данных посредством протоколов FC (Fibre Channel), FCoE (Fibre Channel over Ethernet), iSCSI или iSER. Реализация поддержки UNMAP является наглядной демонстрацией возможности сообщества самостоятельно не только исправлять ошибки в ZFS, но и развивать её функциональность. UNMAP - первое значительное улучшение, реализованное после основания проекта Illumos независимо от компании Oracle. В настоящий момент в Solaris и OpenSolaris поддержка UNMAP отсутствует. Используя SCSI-команду UNMAP, файловая система может информировать хранилище об освобождении блоков данных и возможности их возвращения в пул свободных блоков физического хранилища. Например, когда для хранения задействован SSD-накопитель, производится не только изменение мета-данных ФС, но и уведомление контроллера SSD о возможности перераспределения указанных блоков, что позволяет заметно повысить эффективность работы сборщика мусора.