Новости развития OpenBSD за июнь

Очередная сводка новостей развития OpenBSD за последний месяц. Многие изменения были произведены во время недавнего hackathon'а в Эдмонтоне. Архитектура hppa получила поддержку SMP. OpenCVS, предмет многих споров на OpenNet, отключён от общей сборки. Причина банальна — отсутствие maintainer'ов. Вместо опций командной строки -s и -r в OpenBGPD управляющие теперь задаются в конфигурационном файле. Это позволяет добавлять и удалять их (сокеты) без полного рестарта bgpd. Поддержка diskmap(4) — псевдоустройства, обеспечивающего атомарный доступ к дискам по их UID, — добавлена в opendev(3) и системные утилиты. Частично переработан ACPI-стек, с учётом проблем, возникающих на некоторых «брендовых» ноутбуках, в основном HP. iked(8), недавно импортированный IKEv2-демон теперь умеет работать в качестве инициатора (клиента), умеет импортировать и экспортировать сертификаты и поддерживает NAT-T. ipsecctl(8) умеет с ним работать параллельно с isakmpd(8), поддерживающем IKEv1. OpenSSH: Опции AuthorizedKeysFile, AuthorizedPrincipalsFile, HostbasedUsesNameFromPacketOnly и PermitTunnel теперь доступны внутри Match-блоков в sshd_config(5). Исправлена ошибка, приводящая к требованию существования /dev/null при использовании ChrootDirectory. KDE 4 в портах обновлён до актуальной версии, но ещё не подключён в общую сборку пакетов. Для сборки требуется GCC 4.x из базовой системы, поэтому сборка на данный момент возможна только на amd64 и sparc64. Переход платформы i386 на GCC 4 задерживается из-за проблем с новым компилятором, в том числе связанных с заметным замедлением скорости сборки и возросшими требованиями к оперативной памяти на данной платформе по сравнению с GCC 3. Желающие могут на свой страх и риск попробовать принудительно собрать систему с параметром COMPILER_VERSION=gcc4 в /etc/mk.conf. Новый порт PHP www/php, параллельный нынешнему php5, но с большими возможностями: поддержка параллельной установки нескольких версий PHP; конфигурационные файлы перемещены из /var/www/conf в /etc: Apache всё равно загружает модули до chroot, поэтому /etc на этом этапе доступен. пакеты теперь называются не php5-, а php- Новый порт ещё не включён в систему сборки: требуется обеспечить плавный переезд с пакетов от старого порта и доделать несколько других мелочей. Прочие исправления и улучшения в aucat(1), mandoc(1), ssh(1), tmux(1), azalia(4), bridge(4), trunk(4), ldapd(8), ospfd(8), sysmerge(8) и ядре (UVM, загрузка по сети). Кроме того, по мотивам обсуждения аналогичной прошлой темы был составлен и отправлен на tech@openbsd.org патч для реализации прямого инспектирования пакетов в pf. В результате выяснилось, что уже есть подобное предложение от Reyk Floeter, причём более совершенное в техническом плане (использование BPF), но оно (пока?) не принято по соображениям безопасности.