Релиз FreeBSD 10.2

После девяти месяцев разработки официально представлен релиз FreeBSD 10.2, который доступен для архитектур amd64, i386, ia64, powerpc, powerpc64, sparc64 и armv6. Дополнительно подготовлены образы для систем виртуализации (QCOW2, VMDK, raw) и облачных окружений Amazon EC2, Google Compute Engine и Microsoft Azure. Основные новшества: Добавлена новая утилита uefisign для формирования цифровых подписей для файлов EFI, используемых для загрузки в конфигурациях с UEFI Secure Boot. В состав загрузчика EFI включен bzipfs; Представлен новый rc-скрипт growfs, предназначенный для осуществления операции по изменению размера корневой ФС во время первой загрузки (если создан файл /firstboot), давая возможность автоматически занять корневой ФС всё нераспределённое место на диске. Управление работой скрипта производится через опцию growfs_enable в rc.conf. Скрипт также можно выполнить вручную ("/etc/rc.d/growfs onestart"), а не на этапе перезагрузки; Поддерживаемая во FreeBSD инфраструктура эмуляции окружения Linux обновленa до CentOS 6.6 (порт emulators/linux-c6). Связанные с эмулятором порты адаптированы для использования CentOS 6.6, который теперь предлагается по умолчанию вместо пакетов на основе Fedora 10. Слой совместимости с ядром Linux теперь ссылается на выпуск 2.6.18; Код drm-драйверов для графических карт синхронизирован с ядром Linux 3.8.13, что позволило реализовать ioctl-вызовы setmaster/dropmaster для решения проблемы с запуском одновременно нескольких X-серверов; Расширены возможности порта FreeBSD/arm. Добавлена поддержка систем Exynos 5420 Octa и плат Toradex Apalis i.MX6. Добавлен драйвер bcm2835_cpufreq, позволяющий управлять частотой CPU и напряжением на Raspberry Pi. Для всех систем Exynos 5 активирована поддержка SMP. Добавлены драйверы передачи звука с поддержкой AUDMUXM (Digital Audio Multiplexer), SDMA (Smart Direct Memory Access Controller) и SSI (Syncronous Serial Interface). Реализованы корректные средства завершения работы на платах BeagleBone Black; В ядро FreeBSD/i386 добавлена настройка PAE_TABLES, при которой в pmap включается использование формата PAE при работе с таблицами страниц памяти в условиях 32-разрядной физической адресации. В данном режиме возможен маппинг памяти в режиме "no execute", что позволяет повысить защищённость системы от некоторых видов атак. Кроме того, в отличие от режима PAE, режим PAE_TABLES сохраняет совместимость на уровне бинарных интерфейсов (KBI) с не-PAE ядрами, позволяя использовать собранные для них модули и драйверы. При включении режиме PAE_TABLES лимиты ядра настраиваются с расчётом на размер ОЗУ 4 Гб; Добавлен драйвер vxlan для создания виртуальных расширяемых локальных сетей (Virtual Extensible LAN), используемых для туннелирования виртуализированных сетей второго уровня поверх сетей третьего уровня. VXLAN позволяет обойти ограничение на 4096 VLAN-ов за счёт использования 24-разрядных идентификаторов; Обновлён гипервизор bhyve: добавлена поддержка процессоров AMD c аппаратными расширениями SVM и AMD-V, добавлена поддержка команды DSM TRIM для виртуальных дисков AHCI; В подсистеме autofs реализован новый тип сопоставлений "-media", позволяющий организовать автоматическое монтирование встраиваемых накопителей, таких как CD и USB Flash. Также добавлен тип "-noauto" аналогичный использованию флага noauto в fstab; В сетевой драйвер em добавлена поддержка многоуровневых очередей (multiqueue). Включение производится через опцию ядра EM_MULTIQUEUE; В ядре GENERIC по умолчанию включена поддержка RACCT и RCTL, подсистем для аккаунтинга и лимитирования ресурсов; Для ZFS добавлена настройка vfs.zfs.spa_slop_shift, позволяющая изменить зарезервированное по умолчанию дисковое пространство; Обновлена подсистема ctl (CAM Target Layer), в которой со 128 до 256 увеличен лимит на число портов, и с 256 до 1024 на число LUN; В загрузчик добавлена поддержка ввода пароля для GELI-шифрования на этапе до загрузки ядра; Существенно переработан драйвер gre, который теперь разделён на два отдельных модуля gre и me; Добавлен драйвер virtio_console, предоставляющий интерфейс для проброса консольных устройств VirtIO через устройство tty; Решены проблемы при использовании jail совместно с gif- и gre-туннелями; В GENERIC ядре по умолчанию включены драйверы nvd и nvme с поддержкой дисковых контроллеров NVM Express; В драйвер psm добавлена поддержка тачпадов Synaptics и мышей ClickPad, используемых в новых моделях ноутбуков Lenovo; В драйвер ral добавлена поддержка чипов RT5390 и RT5392; В утилите mount_nfs появилась поддержка опций timeo, actimeo, noac и proto; В TCP-стеке по умолчанию отключено определение PLPMTUD (Packetization Layer Path MTU Discovery, RFC 4821). Для включения следует использовать sysctl net.inet.tcp.pmtud_blackhole_detection, net.inet.tcp.pmtud_blackhole_mss и net.inet.tcp.v6pmtud_blackhole_mss; В базовую систему включена новая утилита dpv, наглядно отображающая прогресс передачи данных для одного или нескольких потоков; Добавлена утилита fstyp для определения типа файловой системы на указанном разделе; Добавлена библиотека figpar, предоставляющая API для разбора файлов конфигурации; В утилиту gpart добавлена поддержка схем разделов в MBR apple-boot, apple-hfs и apple-ufs; В утилиту mkimg добавлена поддержка разделов MBR EFI и реализован флаг "-c" для задания минимального виртуального размера итогового образа; В утилиту netstat добавлена флаг "-R", при указании которого выводится информация об RSS/flow; В утилите date для улучшения совместимости с GNU date реализовано отображение времени модификации файла, указанного через флаг "-r"; В bsdinstall добавлена возможность выбора схемы дисковых разделов при установке на UFS. Реализована поддержка выравнивания разделов по границе в 1 Мб при определении такой необходимости. Добавлен обходной путь для загрузки на различных ноутбуках и материнских платах, на которых ранее наблюдались проблемы с загрузкой с дисков с GPT-разделами; Во freebsd-update добавлена защита от загрузки новых бинарных патчей, если прошлое обновление ещё не завершено; Утилита resolvconf обновлена до версии openresolv 3.7.0, примечательной добавлением возможности установки флага приватности для интерфейсов в resolv.conf, что позволяет использовать данные интерфейсы только для осуществления резолвинга доменов по явно заданной в resolv.conf маске (domain/search); Обновлены версии сторонних программ, в том числе ntp 4.2.8p3, acpi 20150515, file 5.23, unbound 1.5.3, sendmail 8.15.2, OpenSSL 1.0.1p. Обновлены предлагаемые из портов десктоп-окружения: GNOME 3.14.2 и KDE 4.14.3. Обновлён графический стек (x11-servers/xorg-server 1.14.7_5, x11/xorg 7.7_2).